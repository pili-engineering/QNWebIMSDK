!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).QNIM={})}(this,(function(exports){"use strict";var version="1.0.5",__assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==n.return||n.return()}finally{if(a)throw o}}return i}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(e,t){var n,r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return r&&(e=r),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var core={exports:{}},coreIM=(function(module,exports){var V;V=function(){return W=[function(e,t,n){e.exports=n(117)},function(e,t,n){var r,o,i=e.exports=n(5),s=n(54),a=(i.codegen=n(128),i.fetch=n(129),i.path=n(130),i.fs=i.inquire("fs"),i.toArray=function(e){if(e){for(var t=Object.keys(e),n=new Array(t.length),r=0;r<t.length;)n[r]=e[t[r++]];return n}return[]},i.toObject=function(e){for(var t={},n=0;n<e.length;){var r=e[n++],o=e[n++];void 0!==o&&(t[r]=o)}return t},/\\/g),u=/"/g,c=(i.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},i.safeProp=function(e){return!/^[$\w_]+$/.test(e)||i.isReserved(e)?'["'+e.replace(a,"\\\\").replace(u,'\\"')+'"]':"."+e},i.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},/_([a-z])/g),f=(i.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))},i.compareFieldsById=function(e,t){return e.id-t.id},i.decorateType=function(e,t){return e.$type?(t&&e.$type.name!==t&&(i.decorateRoot.remove(e.$type),e.$type.name=t,i.decorateRoot.add(e.$type)),e.$type):(t=new(r=r||n(56))(t||e.name),i.decorateRoot.add(t),t.ctor=e,Object.defineProperty(e,"$type",{value:t,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:t,enumerable:!1}),t)},0);i.decorateEnum=function(e){if(e.$type)return e.$type;var t=new(o=o||n(6))("Enum"+f++,e);return i.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},i.setProperty=function(e,t,n){if("object"!=_typeof(e))throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,n,r){var o=n.shift();return 0<n.length?t[o]=e(t[o]||{},n,r):((n=t[o])&&(r=[].concat(n).concat(r)),t[o]=r),t}(e,t=t.split("."),n)},Object.defineProperty(i,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(n(64)))}})},function(e,t,n){var r;n=[n(0)];void 0===(t="function"==typeof(r=function(e){return(e.roots.xsync||(e.roots.xsync=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{Frame:{fields:{vsn:{type:"VSN",id:1},compress_method:{type:"CompressMethod",id:2},command:{type:"Command",id:3},payload:{type:"bytes",id:4},encrypt_method:{type:"EncryptMethod",id:5},encrypt_key:{type:"bytes",id:6},check_sum:{type:"uint32",id:7},tag:{type:"string",id:8}},nested:{VSN:{values:{XSYNC_V1:0,XSYNC_V2:1}},Command:{values:{UNREAD:0,SYNC:1,NOTICE:2,PROVISION:3}},CompressMethod:{values:{NONE:0,ZLIB:1}},EncryptMethod:{values:{ENCRYPT_NONE:0,AES_CBC_128:1,AES_CBC_256:2,CUSTOM:3}}}},Status:{fields:{code:{type:"ErrorCode",id:1},reason:{type:"string",id:2}},nested:{ErrorCode:{values:{UNKNOWN:0,OK:1,FAIL:2,UNKNOWN_COMMAND:3,PB_PARSER_ERROR:4,DECRYPT_FAILURE:5,PUBLIC_KEY_CHANGED:6,INVALID_TOKEN:7,INVALID_PARAMETER:8,UNAUTHORIZED:9,USER_FROZEN:10,USER_BANNED:11,WORD_CENSORED:12,TOO_MANY_DEVICES:13,ENCRYPT_METHOD_UNSUPPORTED:14,DEVICE_GUID_CONFLICT:15,CHECK_SUM_FAILURE:16,INVALID_LICENSE:17,LICENSE_LIMIT:18,APP_FROZEN:19}}}},ConversationUnread:{fields:{xid:{type:"XID",id:1},n:{type:"uint32",id:2},type:{type:"ConvType",id:3}},nested:{ConvType:{values:{UNKNOWN:0,CHAT:1,GROUPCHAT:2}}}},UnreadUL:{fields:{}},UnreadDL:{fields:{status:{type:"Status",id:1},unread:{rule:"repeated",type:"ConversationUnread",id:2}}},SyncUL:{fields:{xid:{type:"XID",id:1},key:{type:"uint64",id:2},meta:{type:"Meta",id:3},is_full_sync:{type:"bool",id:4},full_sync_num:{type:"sint32",id:5}}},SyncDL:{fields:{status:{type:"Status",id:1},metas:{rule:"repeated",type:"Meta",id:2},next_key:{type:"uint64",id:3},xid:{type:"XID",id:4},client_mid:{type:"uint64",id:5},server_mid:{type:"uint64",id:6},server_time:{type:"uint64",id:7},is_full_sync:{type:"bool",id:8},prev_mid:{type:"uint64",id:9},is_eager_sync:{type:"bool",id:10}}},Notice:{fields:{xid:{type:"XID",id:1}}},Provision:{fields:{status:{type:"Status",id:1},xid:{type:"XID",id:2},password:{type:"string",id:5},token:{type:"string",id:6},os_type:{type:"OsType",id:7},sdk_vsn:{type:"string",id:8},is_manual_login:{type:"bool",id:9},device_guid:{type:"string",id:10},device_notifier:{type:"string",id:11},device_token:{type:"string",id:12},device_info:{type:"string",id:13},last_login_time:{type:"uint64",id:14}},nested:{OsType:{values:{UNKNOWN:0,IOS:1,ANDR:2,WIN:3,OSX:4,LINUX:5,WEB:6}}}},Meta:{fields:{id:{type:"uint64",id:1},from:{type:"XID",id:2},to:{type:"XID",id:3},timestamp:{type:"uint64",id:4},ns:{type:"NameSpace",id:5},payload:{type:"bytes",id:6}},nested:{NameSpace:{values:{UNKNOWN:0,MESSAGE:1,GROUP_NOTICE:2,ROSTER_NOTICE:3,USER_NOTICE:4,INFO:5,CONVERSATION:6,PUSH:7}}}},XID:{fields:{uid:{type:"uint64",id:1},deviceSN:{type:"uint32",id:2}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=t)},function(e,t,n){var r=n(43),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function s(e){return void 0===e}function a(e){return null!==e&&"object"==_typeof(e)}function u(e){return"[object Object]"===o.call(e)&&(null===(e=Object.getPrototypeOf(e))||e===Object.prototype)}function c(e){return"[object Function]"===o.call(e)}function f(e,t){if(null!=e)if(i(e="object"!=_typeof(e)?[e]:e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:u,isUndefined:s,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:f,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)f(arguments[r],n);return t},extend:function(e,t,n){return f(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)?e.slice(1):e}}},function(e,t){e.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function o(e){return!0===(e&&e.__isLong__)}Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=o;var i={},s={};function a(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=s[e])?r:(n=c(e,(0|e)<0?-1:0,!0),o&&(s[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),o&&(i[e]=n),n)}function u(e,t){if(isNaN(e))return t?v:m;if(t){if(e<0)return v;if(h<=e)return A}else{if(e<=-y)return C;if(y<=e+1)return w}return e<0?u(-e,t).neg():c(e%l|0,e/l|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=u,r.fromBits=c;var f=Math.pow;function p(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if(t="number"==typeof t?(n=t,!1):!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return p(e.substring(1),t,n).neg();for(var o=u(f(n,8)),i=m,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),n);i=a<8?(a=u(f(n,a)),i.mul(a).add(u(c))):(i=i.mul(o)).add(u(c))}return i.unsigned=t,i}function d(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?p(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=p,r.fromValue=d;var l=4294967296,h=l*l,y=h/2,g=a(1<<24),m=a(0),v=(r.ZERO=m,a(0,!0)),_=(r.UZERO=v,a(1)),b=(r.ONE=_,a(1,!0)),E=(r.UONE=b,a(-1)),w=(r.NEG_ONE=E,c(-1,2147483647,!1)),A=(r.MAX_VALUE=w,c(-1,-1,!0)),C=(r.MAX_UNSIGNED_VALUE=A,c(0,-2147483648,!1)),N=(r.MIN_VALUE=C,r.prototype);N.toInt=function(){return this.unsigned?this.low>>>0:this.low},N.toNumber=function(){return this.unsigned?(this.high>>>0)*l+(this.low>>>0):this.high*l+(this.low>>>0)},N.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";var t,n;if(this.isNegative())return this.eq(C)?(n=u(e),n=(t=this.div(n)).mul(n).sub(this),t.toString(e)+n.toInt().toString(e)):"-"+this.neg().toString(e);for(var r=u(f(e,6),this.unsigned),o=this,i="";;){var s=o.div(r),a=(o.sub(s.mul(r)).toInt()>>>0).toString(e);if((o=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},N.getHighBits=function(){return this.high},N.getHighBitsUnsigned=function(){return this.high>>>0},N.getLowBits=function(){return this.low},N.getLowBitsUnsigned=function(){return this.low>>>0},N.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},N.isZero=function(){return 0===this.high&&0===this.low},N.eqz=N.isZero,N.isNegative=function(){return!this.unsigned&&this.high<0},N.isPositive=function(){return this.unsigned||0<=this.high},N.isOdd=function(){return 1==(1&this.low)},N.isEven=function(){return 0==(1&this.low)},N.equals=function(e){return o(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},N.eq=N.equals,N.notEquals=function(e){return!this.eq(e)},N.neq=N.notEquals,N.ne=N.notEquals,N.lessThan=function(e){return this.comp(e)<0},N.lt=N.lessThan,N.lessThanOrEqual=function(e){return this.comp(e)<=0},N.lte=N.lessThanOrEqual,N.le=N.lessThanOrEqual,N.greaterThan=function(e){return 0<this.comp(e)},N.gt=N.greaterThan,N.greaterThanOrEqual=function(e){return 0<=this.comp(e)},N.gte=N.greaterThanOrEqual,N.ge=N.greaterThanOrEqual,N.compare=function(e){if(o(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},N.comp=N.compare,N.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(_)},N.neg=N.negate,N.add=function(e){o(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,f=0,p=0,l=0,h=0;return p+=(l=l+((h+=i+(65535&e.low))>>>16)+(r+u))>>>16,c((l&=65535)<<16|(h&=65535),((f+=(p+=n+a)>>>16)+(t+s)&65535)<<16|(p&=65535),this.unsigned)},N.subtract=function(e){return o(e)||(e=d(e)),this.add(e.neg())},N.sub=N.subtract,N.multiply=function(e){if(this.isZero())return m;if(o(e)||(e=d(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(C))return e.isOdd()?C:m;if(e.eq(C))return this.isOdd()?C:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,f=65535&e.high,p=e.low>>>16,l=0,h=0,y=0,v=(v=0)+((h=h+((y+=s*(e=65535&e.low))>>>16)+i*e)>>>16)+((h=(65535&h)+s*p)>>>16);return c((h&=65535)<<16|(y&=65535),((l+=(v+=r*e)>>>16)+((v=(65535&v)+i*p)>>>16)+((v=(65535&v)+s*f)>>>16)+(t*e+r*p+i*f+s*a)&65535)<<16|(v&=65535),this.unsigned)},N.mul=N.multiply,N.divide=function(e){if((e=o(e)?e:d(e)).isZero())throw Error("division by zero");var t,r;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:m;if(this.unsigned){if((e=e.unsigned?e:e.toUnsigned()).gt(this))return v;if(e.gt(this.shru(1)))return b;r=v}else{if(this.eq(C))return e.eq(_)||e.eq(E)?C:e.eq(C)?_:(i=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?_:E:(t=this.sub(e.mul(i)),i.add(t.div(e)));if(e.eq(C))return this.unsigned?v:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=m}for(t=this;t.gte(e);){for(var i=Math.max(1,Math.floor(t.toNumber()/e.toNumber())),s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:f(2,s-48),p=u(i),l=p.mul(e);l.isNegative()||l.gt(t);)l=(p=u(i-=a,this.unsigned)).mul(e);p.isZero()&&(p=_),r=r.add(p),t=t.sub(l)}return r},N.div=N.divide,N.modulo=function(e){return o(e)||(e=d(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},N.mod=N.modulo,N.rem=N.modulo,N.not=function(){return c(~this.low,~this.high,this.unsigned)},N.and=function(e){return o(e)||(e=d(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},N.or=function(e){return o(e)||(e=d(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},N.xor=function(e){return o(e)||(e=d(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},N.shiftLeft=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},N.shl=N.shiftLeft,N.shiftRight=function(e){return o(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},N.shr=N.shiftRight,N.shiftRightUnsigned=function(e){if(o(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},N.shru=N.shiftRightUnsigned,N.shr_u=N.shiftRightUnsigned,N.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},N.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},N.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},N.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},N.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},function(e,t,n){(function(e){var r=t;function o(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function i(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(51),r.base64=n(119),r.EventEmitter=n(120),r.float=n(121),r.inquire=n(52),r.utf8=n(122),r.pool=n(123),r.LongBits=n(124),r.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),r.global=r.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==_typeof(e)},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=_typeof(n)||0<(Array.isArray(n)?n:Object.keys(n)).length)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){return e=r.LongBits.fromHash(e),r.Long?r.Long.fromBits(e.lo,e.hi,t):e.toNumber(Boolean(t))},r.merge=o,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;-1<n;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(33))},function(e,t,n){e.exports=s;var r=n(9),o=(((s.prototype=Object.create(r.prototype)).constructor=s).className="Enum",n(11)),i=n(1);function s(e,t,n,o,i){if(r.call(this,e,n),t&&"object"!=_typeof(t))throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=o,this.comments=i||{},this.reserved=void 0,t)for(var s=Object.keys(t),a=0;a<s.length;++a)"number"==typeof t[s[a]]&&(this.valuesById[this.values[s[a]]=t[s[a]]]=s[a])}s.fromJSON=function(e,t){return(e=new s(e,t.values,t.options,t.comment,t.comments)).reserved=t.reserved,e},s.prototype.toJSON=function(e){return e=!!e&&Boolean(e.keepComments),i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])},s.prototype.add=function(e,t,n){if(!i.isString(e))throw TypeError("name must be a string");if(!i.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return this.comments[e]=n||null,this},s.prototype.remove=function(e){if(!i.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this},s.prototype.isReservedId=function(e){return o.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return o.isReservedName(this.reserved,e)}},function(e,t,n){function r(e){if(e){var t,n=e;for(t in r.prototype)n[t]=r.prototype[t];return n}}(e.exports=r).prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r,o=n(84),i=n(37),s=n(86),a=n(87),u=n(88),c=("undefined"!=typeof ArrayBuffer&&(r=n(89)),"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent)),f="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),p=c||f,d=(t.protocol=3,t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6}),l=o(d),h={type:"error",data:"parser error"},y=n(90);function g(e,t,n){for(var r=new Array(e.length),o=a(e.length,n),i=0;i<e.length;i++)!function(e,n,o){t(n,(function(t,n){r[e]=n,o(t,r)}))}(i,e[i],o)}t.encodePacket=function(e,n,r,o){"function"==typeof n&&(o=n,n=!1),"function"==typeof r&&(o=r,r=null);var i=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer){var s=e,a=o;if(!n)return t.encodeBase64Packet(s,a);var c=s.data,f=new Uint8Array(c),l=new Uint8Array(1+c.byteLength);l[0]=d[s.type];for(var h=0;h<f.length;h++)l[h+1]=f[h];return a(l.buffer)}if(void 0!==y&&i instanceof y){if(c=e,a=o,!(s=n))return t.encodeBase64Packet(c,a);if(p){var g=c,m=s,v=a;if(!m)return t.encodeBase64Packet(g,v);var _=new FileReader;return _.onload=function(){t.encodePacket({type:g.type,data:_.result},m,!0,v)},_.readAsArrayBuffer(g.data)}return(s=new Uint8Array(1))[0]=d[c.type],a(new y([s.buffer,c.data]))}return i&&i.base64?o("b"+t.packets[e.type]+e.data.data):(n=d[e.type],void 0!==e.data&&(n+=r?u.encode(String(e.data),{strict:!1}):String(e.data)),o(""+n))},t.encodeBase64Packet=function(e,n){var r,o,i="b"+t.packets[e.type];if(void 0!==y&&e.data instanceof y)return(o=new FileReader).onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(e.data);try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),u=0;u<s.length;u++)a[u]=s[u];r=String.fromCharCode.apply(null,a)}return i+=btoa(r),n(i)},t.decodePacket=function(e,n,r){if(void 0===e)return h;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=u.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return h;var o=e.charAt(0);return Number(o)==o&&l[o]?1<e.length?{type:l[o],data:e.substring(1)}:{type:l[o]}:h}return o=new Uint8Array(e)[0],r=s(e,1),y&&"blob"===n&&(r=new y([r])),{type:l[o],data:r}},t.decodeBase64Packet=function(e,t){var n=l[e.charAt(0)];return r?(e=r.decode(e.substr(1)),{type:n,data:e="blob"===t&&y?new y([e]):e}):{type:n,data:{base64:!0,data:e.substr(1)}}},t.encodePayload=function(e,n,r){"function"==typeof n&&(r=n,n=null);var o=i(e);return n&&o?y&&!p?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r):e.length?void g(e,(function(e,r){t.encodePacket(e,!!o&&n,!1,(function(e){r(null,e.length+":"+e)}))}),(function(e,t){return r(t.join(""))})):r("0:")},t.decodePayload=function(e,n,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,r);if("function"==typeof n&&(r=n,n=null),""===e)return r(h,0,1);for(var o,i,s="",a=0,u=e.length;a<u;a++){var c=e.charAt(a);if(":"===c){if(""===s||s!=(o=Number(s)))return r(h,0,1);if(s!=(i=e.substr(a+1,o)).length)return r(h,0,1);if(i.length){if(i=t.decodePacket(i,n,!1),h.type===i.type&&h.data===i.data)return r(h,0,1);if(!1===r(i,a+o,u))return}a+=o,s=""}else s+=c}return""!==s?r(h,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));g(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){return e+(e="string"==typeof t?t.length:t.byteLength).toString().length+e+2}),0),o=new Uint8Array(r),i=0;return t.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}o[i++]=t?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)o[i++]=parseInt(a[s]);for(o[i++]=255,r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]})),n(o.buffer)}))},t.encodePayloadAsBlob=function(e,n){g(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),o=0;o<e.length;o++)r[o]=e.charCodeAt(o);e=r.buffer,t[0]=0}var i=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(i.length+1);for(o=0;o<i.length;o++)s[o]=parseInt(i[o]);s[i.length]=255,y&&(t=new y([t.buffer,s.buffer,e]),n(null,t))}))}),(function(e,t){return n(new y(t))}))},t.decodePayloadAsBinary=function(e,n,r){"function"==typeof n&&(r=n,n=null);for(var o=e,i=[];0<o.byteLength;){for(var a=new Uint8Array(o),u=0===a[0],c="",f=1;255!==a[f];f++){if(310<c.length)return r(h,0,1);c+=a[f]}o=s(o,2+c.length),c=parseInt(c);var p=s(o,0,c);if(u)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(e){var d=new Uint8Array(p);for(p="",f=0;f<d.length;f++)p+=String.fromCharCode(d[f])}i.push(p),o=s(o,c)}var l=i.length;i.forEach((function(e,o){r(t.decodePacket(e,n,!0),o,l)}))}},function(e,t,n){(e.exports=i).className="ReflectionObject";var r,o=n(1);function i(e,t){if(!o.isString(e))throw TypeError("name must be a string");if(t&&!o.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1,(e=e.root)instanceof r&&e._handleAdd(this)},i.prototype.onRemove=function(e){(e=e.root)instanceof r&&e._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},i.prototype.getOption=function(e){if(this.options)return this.options[e]},i.prototype.setOption=function(e,t,n){return n&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},i.prototype.setParsedOption=function(e,t,n){this.parsedOptions||(this.parsedOptions=[]);var r,i,s=this.parsedOptions;return n?(r=s.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)})))?(i=r[e],o.setProperty(i,n,t)):((r={})[e]=o.setProperty({},n,t),s.push(r)):((i={})[e]=t,s.push(i)),this},i.prototype.setOptions=function(e,t){if(e)for(var n=Object.keys(e),r=0;r<n.length;++r)this.setOption(n[r],e[n[r]],t);return this},i.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},i._configure=function(e){r=e}},function(e,t,n){e.exports=c;var r=n(9);((c.prototype=Object.create(r.prototype)).constructor=c).className="Field";var o,i=n(6),s=n(12),a=n(1),u=/^required|optional|repeated$/;function c(e,t,n,o,i,c,f){if(a.isObject(o)?(f=i,c=o,o=i=void 0):a.isObject(i)&&(f=c,c=i,i=void 0),r.call(this,e,c),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(n))throw TypeError("type must be a string");if(void 0!==o&&!u.test(o=o.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!a.isString(i))throw TypeError("extend must be a string");this.rule=o&&"optional"!==o?o:void 0,this.type=n,this.id=t,this.extend=i||void 0,this.required="required"===o,this.optional=!this.required,this.repeated="repeated"===o,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==s.long[n],this.bytes="bytes"===n,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=f}c.fromJSON=function(e,t){return new c(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(c.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),c.prototype.setOption=function(e,t,n){return"packed"===e&&(this._packed=null),r.prototype.setOption.call(this,e,t,n)},c.prototype.toJSON=function(e){return e=!!e&&Boolean(e.keepComments),a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},c.prototype.resolve=function(){return this.resolved?this:(void 0===(this.typeDefault=s.defaults[this.type])&&(this.resolvedType=(this.declaringField||this).parent.lookupTypeOrEnum(this.type),this.resolvedType instanceof o?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long?(this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault)):this.bytes&&"string"==typeof this.typeDefault&&(a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e),this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof o&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this));var e},c.d=function(e,t,n,r){return"function"==typeof t?t=a.decorateType(t).name:t&&"object"==_typeof(t)&&(t=a.decorateEnum(t).name),function(o,i){a.decorateType(o.constructor).add(new c(i,e,t,n,{default:r}))}},c._configure=function(e){o=e}},function(e,t,n){e.exports=f;var r=n(9);((f.prototype=Object.create(r.prototype)).constructor=f).className="Namespace";var o,i,s,a=n(10),u=n(1);function c(e,t){if(e&&e.length){for(var n={},r=0;r<e.length;++r)n[e[r].name]=e[r].toJSON(t);return n}}function f(e,t){r.call(this,e,t),this.nested=void 0,this._nestedArray=null}function p(e){return e._nestedArray=null,e}f.fromJSON=function(e,t){return new f(e,t.options).addJSON(t.nested)},f.arrayToJSON=c,f.isReservedId=function(e,t){if(e)for(var n=0;n<e.length;++n)if("string"!=typeof e[n]&&e[n][0]<=t&&e[n][1]>t)return!0;return!1},f.isReservedName=function(e,t){if(e)for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1},Object.defineProperty(f.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),f.prototype.toJSON=function(e){return u.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},f.prototype.addJSON=function(e){if(e)for(var t,n=Object.keys(e),r=0;r<n.length;++r)t=e[n[r]],this.add((void 0!==t.fields?o:void 0!==t.values?s:void 0!==t.methods?i:void 0!==t.id?a:f).fromJSON(n[r],t));return this},f.prototype.get=function(e){return this.nested&&this.nested[e]||null},f.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},f.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof o||e instanceof s||e instanceof i||e instanceof f))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof f&&e instanceof f)||t instanceof o||t instanceof i)throw Error("duplicate name '"+e.name+"' in "+this);for(var n=t.nestedArray,r=0;r<n.length;++r)e.add(n[r]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return(this.nested[e.name]=e).onAdd(this),p(this)},f.prototype.remove=function(e){if(!(e instanceof r))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),p(this)},f.prototype.define=function(e,t){if(u.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var n=this;0<e.length;){var r=e.shift();if(n.nested&&n.nested[r]){if(!((n=n.nested[r])instanceof f))throw Error("path conflicts with non-namespace objects")}else n.add(n=new f(r))}return t&&n.addJSON(t),n},f.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof f?e[t++].resolveAll():e[t++].resolve();return this.resolve()},f.prototype.lookup=function(e,t,n){if("boolean"==typeof t?(n=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),u.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var r=this.get(e[0]);if(r){if(1===e.length){if(!t||-1<t.indexOf(r.constructor))return r}else if(r instanceof f&&(r=r.lookup(e.slice(1),t,!0)))return r}else for(var o=0;o<this.nestedArray.length;++o)if(this._nestedArray[o]instanceof f&&(r=this._nestedArray[o].lookup(e,t,!0)))return r;return null===this.parent||n?null:this.parent.lookup(e,t)},f.prototype.lookupType=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such type: "+e);return t},f.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},f.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[o,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},f.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},f._configure=function(e,t,n){o=e,i=t,s=n}},function(e,t,n){n=n(1);var r=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(e,t){var n=0,o={};for(t|=0;n<e.length;)o[r[n+t]]=e[n++];return o}t.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),t.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),t.long=o([0,0,0,1,1],7),t.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),t.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},function(e,t,n){e.exports=n(97)},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r?r.env.DEBUG:e}(t=e.exports=n(73)).log=function(){return"object"==("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n,r,o=this.useColors;e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+t.humanize(this.diff),o&&(o="color: "+this.color,e.splice(1,0,o,"color: inherit"),e[r=n=0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))})),e.splice(r,0,o))},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(15))},function(e,t){var n,r;e=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return(n=setTimeout)(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}var a,u=[],c=!1,f=-1;function p(){c&&a&&(c=!1,a.length?u=a.concat(u):f=-1,u.length&&d())}function d(){if(!c){var e=s(p);c=!0;for(var t=u.length;t;){for(a=u,u=[];++f<t;)a&&a[f].run();f=-1,t=u.length}a=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return(r=clearTimeout)(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function l(e,t){this.fun=e,this.array=t}function h(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new l(e,t)),1!==u.length||c||s(d)},l.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=h,e.addListener=h,e.once=h,e.off=h,e.removeListener=h,e.removeAllListeners=h,e.emit=h,e.prependListener=h,e.prependOnceListener=h,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t){t.encode=function(e){var t,n="";for(t in e)e.hasOwnProperty(t)&&(n.length&&(n+="&"),n+=encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n},t.decode=function(e){for(var t={},n=e.split("&"),r=0,o=n.length;r<o;r++){var i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r?r.env.DEBUG:e}(t=e.exports=n(91)).log=function(){return"object"==("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n,r,o=this.useColors;e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+t.humanize(this.diff),o&&(o="color: "+this.color,e.splice(1,0,o,"color: inherit"),e[r=n=0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))})),e.splice(r,0,o))},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(15))},function(e,t,n){var r=n(114),o=n(115),i=n(116);function s(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function a(e,t){return t.encode?(t.strict?r:encodeURIComponent)(e):e}function u(e,t){return t.decode?o(e):e}function c(e){var t=e.indexOf("#");return-1!==t?e.slice(0,t):e}function f(e){var t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){s((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var o="string"==typeof n&&n.includes(e.arrayFormatSeparator),i="string"==typeof n&&!o&&u(n,e).includes(e.arrayFormatSeparator);n=i?u(n,e):n,o=o||i?n.split(e.arrayFormatSeparator).map((function(t){return u(t,e)})):null===n?n:u(n,e);r[t]=o};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;var o,a=_createForOfIteratorHelper(e.split("&"));try{for(a.s();!(o=a.n()).done;){var c=o.value,f=_slicedToArray(i(t.decode?c.replace(/\+/g," "):c,"="),2),d=f[0],l=void 0===(l=f[1])?null:["comma","separator"].includes(t.arrayFormat)?l:u(l,t);n(u(d,t),l,r)}}catch(e){a.e(e)}finally{a.f()}for(var h=0,y=Object.keys(r);h<y.length;h++){var g=y[h],m=r[g];if("object"==_typeof(m)&&null!==m)for(var v=0,_=Object.keys(m);v<_.length;v++){var b=_[v];m[b]=p(m[b],t)}else r[g]=p(m,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==_typeof(n)&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==_typeof(t)?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))}t.extract=f,t.parse=d,t.stringify=function(e,t){if(!e)return"";s((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n,r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var o=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(_toConsumableArray(n),null===r?[[a(t,e),"[",o,"]"].join("")]:[[a(t,e),"[",a(o,e),"]=",a(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(_toConsumableArray(n),null===r?[[a(t,e),"[]"].join("")]:[[a(t,e),"[]=",a(r,e)].join("")])}};case"comma":case"separator":return function(t){return function(n,r){return null==r||0===r.length?n:0===n.length?[[a(t,e),"=",a(r,e)].join("")]:[[n,a(r,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(_toConsumableArray(n),null===r?[a(t,e)]:[[a(t,e),"=",a(r,e)].join("")])}}}}(t),o={},i=0,u=Object.keys(e);i<u.length;i++){var c=u[i];n=c,t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n]||(o[c]=e[c])}var f=Object.keys(o);return!1!==t.sort&&f.sort(t.sort),f.map((function(n){var o=e[n];return void 0===o?"":null===o?a(n,t):Array.isArray(o)?o.reduce(r(n),[]).join("&"):a(n,t)+"="+a(o,t)})).filter((function(e){return 0<e.length})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=(r=_slicedToArray(i(e,"#"),2))[0],r=r[1];return Object.assign({url:n.split("?")[0]||"",query:d(f(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign({encode:!0,strict:!0},n);var r,o,i=c(e.url).split("?")[0]||"",s=t.extract(e.url),u=(s=t.parse(s,{sort:!1}),s=Object.assign(s,e.query),s=(s=t.stringify(s,n))&&"?"+s,r="",r=-1!==(o=(u=e.url).indexOf("#"))?u.slice(o):r);return e.fragmentIdentifier&&(u="#"+a(e.fragmentIdentifier,n)),"".concat(i).concat(s).concat(u)}},function(e,t){var n=36e5,r=864e5;function o(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var i=_typeof(e);if(!("string"===i&&0<e.length)){if("number"===i&&!1===isNaN(e))return t.long?o(i=e,r,"day")||o(i,n,"hour")||o(i,6e4,"minute")||o(i,1e3,"second")||i+" ms":r<=(t=e)?Math.round(t/r)+"d":n<=t?Math.round(t/n)+"h":6e4<=t?Math.round(t/6e4)+"m":1e3<=t?Math.round(t/1e3)+"s":t+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}if(i=void 0,!(100<(i=String(e)).length)&&(i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(i))){var s=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*r;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*s;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}},function(e,t,n){var r=n(74)("socket.io-parser"),o=n(7),i=n(76),s=n(31),a=n(32);function u(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=u,t.Decoder=p;var c=t.ERROR+'"encode error"';function f(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===o)return c;n+=o}return r("encoded %j as %s",e,n),n}function p(){this.reconstructor=null}function d(e){this.reconPack=e,this.buffers=[]}function l(e){return{type:t.ERROR,data:"parser error: "+e}}u.prototype.encode=function(e,n){var o;r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type?(o=n,i.removeBlobs(e,(function(e){var t=f((e=i.deconstructPacket(e)).packet);(e=e.buffers).unshift(t),o(e)}))):n([f(e)])},o(p.prototype),p.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n,o=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return l("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var a=o+1;"-"!==e.charAt(++o)&&o!=e.length;);var u;if((u=e.substring(a,o))!=Number(u)||"-"!==e.charAt(o))throw new Error("Illegal attachments");i.attachments=Number(u)}if("/"===e.charAt(o+1)){for(a=o+1;++o&&","!==(n=e.charAt(o))&&o!==e.length;);i.nsp=e.substring(a,o)}else i.nsp="/";if(""!==(u=e.charAt(o+1))&&Number(u)==u){for(a=o+1;++o;){if(null==(n=e.charAt(o))||Number(n)!=n){--o;break}if(o===e.length)break}i.id=Number(e.substring(a,o+1))}if(e.charAt(++o)){if(!1===(u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(o)))||i.type!==t.ERROR&&!s(u))return l("invalid payload");i.data=u}return r("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new d(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},p.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},d.prototype.takeBinaryData=function(e){return this.buffers.push(e),this.buffers.length===this.reconPack.attachments?(e=i.reconstructPacket(this.reconPack,this.buffers),this.finishedReconstruction(),e):null},d.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){(function(e){var r=n(77),o=n(78),i=n(79);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(e=null===e?new u(t):e).length=t,e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"!=typeof e)return c(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}function c(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=e,s=t,c=n;if(s.byteLength,c<0||s.byteLength<c)throw new RangeError("'offset' is out of bounds");if(s.byteLength<c+(r||0))throw new RangeError("'length' is out of bounds");return s=void 0===c&&void 0===r?new Uint8Array(s):void 0===r?new Uint8Array(s,c):new Uint8Array(s,c,r),u.TYPED_ARRAY_SUPPORT?(o=s).__proto__=u.prototype:o=d(o,s),o}if("string"==typeof t){if(c=e,r=t,s=n,!u.isEncoding(s="string"==typeof s&&""!==s?s:"utf8"))throw new TypeError('"encoding" must be a valid string encoding');return(r=(c=a(c,o=0|h(r,s))).write(r,s))!==o?c.slice(0,r):c}var f;n=e,r=t;if(u.isBuffer(r))return 0===(n=a(n,f=0|l(r.length))).length||r.copy(n,0,0,f),n;if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||(f=r.length)!=f?a(n,0):d(n,r);if("Buffer"===r.type&&i(r.data))return d(n,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(f(t),e=a(e,t<0?0:0|l(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|l(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function l(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function h(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return T(e).length;default:if(r)return R(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var o,i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var s=t,a=n,u=this.length;(!a||a<0||u<a)&&(a=u);for(var c="",f=s=!s||s<0?0:s;f<a;++f)c+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(this[f]);return c;case"utf8":case"utf-8":return b(this,t,n);case"ascii":u=t;var p=n,d="";p=Math.min(this.length,p);for(var l=u;l<p;++l)d+=String.fromCharCode(127&this[l]);return d;case"latin1":case"binary":s=t;var h=n,y="";h=Math.min(this.length,h);for(var g=s;g<h;++g)y+=String.fromCharCode(this[g]);return y;case"base64":return m=this,o=n,0===(v=t)&&o===m.length?r.fromByteArray(m):r.fromByteArray(m.slice(v,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var m=t,v=n,_=this.slice(m,v),E="",w=0;w<_.length;w+=2)E+=String.fromCharCode(_[w]+256*_[w+1]);return E;default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?o?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,o);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):v(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,o){var i=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,n/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,f=n;f<s;f++)if(u(e,f)===u(t,-1===c?0:f-c)){if(f-(c=-1===c?f:c)+1===a)return c*i}else-1!==c&&(f-=f-c),c=-1;else for(f=n=s<n+a?s-a:n;0<=f;f--){for(var p=!0,d=0;d<a;d++)if(u(e,f+d)!==u(t,d)){p=!1;break}if(p)return f}return-1}function _(e,t,n,r){return I(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,u,c=e[o],f=null,p=239<c?4:223<c?3:191<c?2:1;if(o+p<=n)switch(p){case 1:c<128&&(f=c);break;case 2:128==(192&(i=e[o+1]))&&127<(u=(31&c)<<6|63&i)&&(f=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(f=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(f=u)}null===f?(f=65533,p=1):65535<f&&(f-=65536,r.push(f>>>10&1023|55296),f=56320|1023&f),r.push(f),o+=p}var d=r,l=d.length;if(l<=4096)return String.fromCharCode.apply(String,d);for(var h="",y=0;y<l;)h+=String.fromCharCode.apply(String,d.slice(y,y+=4096));return h}function E(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function w(e,t,n,r,o,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function C(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function N(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(e,t,n,r,i){return i||N(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function O(e,t,n,r,i){return i||N(e,0,n,8),o.write(e,t,n,r,52,8),n+8}t.Buffer=u,t.SlowBuffer=function(e){return u.alloc(+(e=+e!=e?0:e))},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return c(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return t=t,n=n,f(e=e),e<=0||void 0===t?a(null,e):"string"==typeof n?a(null,e).fill(t,n):a(null,e).fill(t)},u.allocUnsafe=function(e){return p(null,e)},u.allocUnsafeSlow=function(e){return p(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var n=u.allocUnsafe(t),r=0,o=0;o<e.length;++o){var s=e[o];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},u.byteLength=h,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?b(this,0,e):y.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),c=this.slice(r,o),f=e.slice(t,n),p=0;p<a;++p)if(c[p]!==f[p]){i=c[p],s=f[p];break}return i<s?-1:s<i?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,s,a,u,c=!1;;)switch(r){case"hex":var f=e,p=t,d=n,l=(p=Number(p)||0,this.length-p);if((!d||(d=Number(d))>l)&&(d=l),(l=f.length)%2!=0)throw new TypeError("Invalid hex string");l/2<d&&(d=l/2);for(var h=0;h<d;++h){var y=parseInt(f.substr(2*h,2),16);if(isNaN(y))return h;this[p+h]=y}return h;case"utf8":case"utf-8":return l=t,u=n,I(R(e,(a=this).length-l),a,l,u);case"ascii":case"latin1":case"binary":return _(this,e,t,n);case"base64":return a=this,u=t,s=n,I(T(e),a,u,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return s=t,i=n,I(function(e,t){for(var n,r,o=[],i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,o.push(n%256),o.push(r);return o}(e,this.length-s),this,s,i);default:if(c)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),c=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=u.prototype;else for(var r=t-e,o=new u(r,void 0),i=0;i<r;++i)o[i]=this[i+e];return o},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},u.prototype.readUInt8=function(e,t){return t||E(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||E(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||E(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){return t||E(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},u.prototype.readInt16BE=function(e,t){return t||E(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},u.prototype.readInt32LE=function(e,t){return t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||E(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||E(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||E(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||E(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||w(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||w(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):C(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||w(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||w(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=n-1,i=1,s=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):C(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||w(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):C(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return k(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return k(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return O(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return O(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var o,i=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(o=i-1;0<=o;--o)e[o+t]=this[o+n];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){var o;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length&&(o=e.charCodeAt(0))<256&&(e=o),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var i=u.isBuffer(e)?e:R(new u(e,r).toString()),s=i.length,a=0;a<n-t;++a)this[a+t]=i[a%s];return this};var S=/[^+\/0-9A-Za-z-_]/g;function R(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function T(e){return r.toByteArray(function(e){if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(S,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function I(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(33))},function(e,t,n){var r=n(82),o=n(24);e.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){var r=n(8);function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}n(7)((e.exports=o).prototype),o.prototype.onError=function(e,t){return(e=new Error(e)).type="TransportError",e.description=t,this.emit("error",e),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){e=r.decodePacket(e,this.socket.binaryType),this.onPacket(e)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){e.exports=p;var r,o=n(5),i=o.LongBits,s=o.base64,a=o.utf8;function u(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function c(){}function f(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function p(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}function d(){return o.Buffer?function(){return(p.create=function(){return new r})()}:function(){return new p}}function l(e,t,n){t[n]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}p.create=d(),p.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(p.alloc=o.pool(p.alloc,o.Array.prototype.subarray)),p.prototype._push=function(e,t,n){return this.tail=this.tail.next=new u(e,t,n),this.len+=t,this},(h.prototype=Object.create(u.prototype)).fn=function(e,t,n){for(;127<e;)t[n++]=127&e|128,e>>>=7;t[n]=e},p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},p.prototype.int32=function(e){return e<0?this._push(y,10,i.fromNumber(e)):this.uint32(e)},p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},p.prototype.int64=p.prototype.uint64=function(e){return e=i.from(e),this._push(y,e.length(),e)},p.prototype.sint64=function(e){return e=i.from(e).zzEncode(),this._push(y,e.length(),e)},p.prototype.bool=function(e){return this._push(l,1,e?1:0)},p.prototype.sfixed32=p.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},p.prototype.sfixed64=p.prototype.fixed64=function(e){return e=i.from(e),this._push(g,4,e.lo)._push(g,4,e.hi)},p.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},p.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var m=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};p.prototype.bytes=function(e){var t,n=e.length>>>0;return n?(o.isString(e)&&(t=p.alloc(n=s.length(e)),s.decode(e,t,0),e=t),this.uint32(n)._push(m,n,e)):this._push(l,1,0)},p.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(l,1,0)},p.prototype.fork=function(){return this.states=new f(this),this.head=this.tail=new u(c,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},p.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},p._configure=function(e){r=e,p.create=d(),r._configure()}},function(e,t,n){e.exports=u;var r,o=n(5),i=o.LongBits,s=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function u(e){this.buf=e,this.pos=0,this.len=e.length}function c(){return o.Buffer?function(e){return(u.create=function(e){return o.Buffer.isBuffer(e)?new r(e):p(e)})(e)}:p}var f,p="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new u(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new u(e);throw Error("illegal buffer")};function d(){var e=new i(0,0),t=0;if(!(4<this.len-this.pos)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,4<this.len-this.pos){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function l(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw a(this,8);return new i(l(this.buf,this.pos+=4),l(this.buf,this.pos+=4))}u.create=c(),u.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,u.prototype.uint32=(f=4294967295,function(){if(f=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return f;if(f=(f|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return f;if(f=(f|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return f;if(f=(f|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return f;if(f=(f|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return f;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return f}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return l(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|l(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},u.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},u.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},u.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},u.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},u._configure=function(e){r=e,u.create=c(),r._configure();var t=o.Long?"toLong":"toNumber";o.merge(u.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},function(e,t,n){e.exports=s;var r=n(9),o=(((s.prototype=Object.create(r.prototype)).constructor=s).className="OneOf",n(10)),i=n(1);function s(e,t,n,o){if(Array.isArray(t)||(n=t,t=void 0),r.call(this,e,n),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=o}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){return e=!!e&&Boolean(e.keepComments),i.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),a(e.partOf=this),this},s.prototype.remove=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),-1<(t=this.oneof.indexOf(e.name))&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){r.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var n=e.get(this.oneof[t]);n&&!n.partOf&&(n.partOf=this).fieldsArray.push(n)}a(this)},s.prototype.onRemove=function(e){for(var t,n=0;n<this.fieldsArray.length;++n)(t=this.fieldsArray[n]).parent&&t.parent.remove(t);r.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,n){i.decorateType(t.constructor).add(new s(n,e)),Object.defineProperty(t,n,{get:i.oneOfGetter(e),set:i.oneOfSetter(e)})}}},function(e,t,n){e.exports=o;var r=n(5);function o(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)this[t[n]]=e[t[n]]}o.create=function(e){return this.$type.create(e)},o.encode=function(e,t){return this.$type.encode(e,t)},o.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},o.decode=function(e){return this.$type.decode(e)},o.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},o.verify=function(e){return this.$type.verify(e)},o.fromObject=function(e){return this.$type.fromObject(e)},o.toObject=function(e,t){return this.$type.toObject(e,t)},o.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),i=e.indexOf("]");-1!=o&&-1!=i&&(e=e.substring(0,o)+e.substring(o,i).replace(/:/g,";")+e.substring(i,e.length));for(var s,a=n.exec(e||""),u={},c=14;c--;)u[r[c]]=a[c]||"";return-1!=o&&-1!=i&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=(o=(e=u.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=e.substr(0,1)&&0!==e.length||o.splice(0,1),"/"==e.substr(e.length-1,1)&&o.splice(o.length-1,1),o),u.queryKey=(i=u.query,s={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(s[t]=n)})),s),u}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||(e=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer))};var n="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer}).call(this,n(22).Buffer)},function(e,t){var n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==("undefined"==typeof window?"undefined":_typeof(window))&&(n=window)}e.exports=n},function(e,t,n){var r=n(80),o=n(40),i=n(7),s=n(21),a=n(41),u=n(42),c=n(14)("socket.io-client:manager"),f=n(39),p=n(96),d=Object.prototype.hasOwnProperty;function l(e,t){if(!(this instanceof l))return new l(e,t);e&&"object"==_typeof(e)&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],e=t.parser||s,this.encoder=new e.Encoder,this.decoder=new e.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}(e.exports=l).prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)d.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},l.prototype.updateSocketIds=function(){for(var e in this.nsps)d.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},l.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},i(l.prototype),l.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},l.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},l.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},l.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},l.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},l.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},l.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},l.prototype.open=l.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n,o,i=this.engine,s=this,u=(this.readyState="opening",this.skipReconnect=!1,a(i,"open",(function(){s.onopen(),e&&e()}))),f=a(i,"error",(function(t){var n;c("connect_error"),s.cleanup(),s.readyState="closed",s.emitAll("connect_error",t),e?((n=new Error("Connection error")).data=t,e(n)):s.maybeReconnectOnOpen()}));return!1!==this._timeout&&(n=this._timeout,c("connect attempt will timeout after %d",n),0===n&&u.destroy(),o=setTimeout((function(){c("connect attempt timed out after %d",n),u.destroy(),i.close(),i.emit("error","timeout"),s.emitAll("connect_timeout",n)}),n),this.subs.push({destroy:function(){clearTimeout(o)}})),this.subs.push(u),this.subs.push(f),this},l.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",u(this,"ondata"))),this.subs.push(a(e,"ping",u(this,"onping"))),this.subs.push(a(e,"pong",u(this,"onpong"))),this.subs.push(a(e,"error",u(this,"onerror"))),this.subs.push(a(e,"close",u(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",u(this,"ondecoded")))},l.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},l.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},l.prototype.ondata=function(e){this.decoder.add(e)},l.prototype.ondecoded=function(e){this.emit("packet",e)},l.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},l.prototype.socket=function(e,t){var n,r=this.nsps[e];function i(){~f(n.connecting,r)||n.connecting.push(r)}return r||(r=new o(this,e,t),this.nsps[e]=r,n=this,r.on("connecting",i),r.on("connect",(function(){r.id=n.generateId(e)})),this.autoConnect&&i()),r},l.prototype.destroy=function(e){~(e=f(this.connecting,e))&&this.connecting.splice(e,1),this.connecting.length||this.close()},l.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},l.prototype.processPacketQueue=function(){var e;0<this.packetBuffer.length&&!this.encoding&&(e=this.packetBuffer.shift(),this.packet(e))},l.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++)this.subs.shift().destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},l.prototype.close=l.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},l.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},l.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e,t,n=this;this.backoff.attempts>=this._reconnectionAttempts?(c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1):(e=this.backoff.duration(),c("will wait %dms before reconnect attempt",e),this.reconnecting=!0,t=setTimeout((function(){n.skipReconnect||(c("attempting reconnect"),n.emitAll("reconnect_attempt",n.backoff.attempts),n.emitAll("reconnecting",n.backoff.attempts),n.skipReconnect||n.open((function(e){e?(c("reconnect attempt error"),n.reconnecting=!1,n.reconnect(),n.emitAll("reconnect_error",e.data)):(c("reconnect success"),n.onreconnect())})))}),e),this.subs.push({destroy:function(){clearTimeout(t)}}))},l.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(23),o=n(83),i=n(92);n=n(93);t.polling=function(e){var t,n,s=!1,a=!1,u=!1!==e.jsonp;if("undefined"!=typeof location&&(t="https:"===location.protocol,n=(n=location.port)||(t?443:80),s=e.hostname!==location.hostname||n!==e.port,a=e.secure!==t),e.xdomain=s,e.xscheme=a,"open"in new r(e)&&!e.forceJSONP)return new o(e);if(!u)throw new Error("JSONP disabled");return new i(e)},t.websocket=n},function(e,t,n){var r=n(25),o=n(16),i=n(8),s=n(17),a=n(38),u=n(18)("engine.io-client:polling"),c=(e.exports=f,null!=new(n(23))({xdomain:!1}).responseType);function f(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),r.call(this,e)}s(f,r),f.prototype.name="polling",f.prototype.doOpen=function(){this.poll()},f.prototype.pause=function(e){var t,n=this;function r(){u("paused"),n.readyState="paused",e()}this.readyState="pausing",this.polling||!this.writable?(t=0,this.polling&&(u("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){u("pre-pause polling complete"),--t||r()}))),this.writable||(u("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){u("pre-pause writing complete"),--t||r()})))):r()},f.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},f.prototype.onData=function(e){var t=this;u("polling got data %s",e),i.decodePayload(e,this.socket.binaryType,(function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},f.prototype.doClose=function(){var e=this;function t(){u("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},f.prototype.write=function(e){function t(){n.writable=!0,n.emit("drain")}var n=this;this.writable=!1,i.encodePayload(e,this.supportsBinary,(function(e){n.doWrite(e,t)}))},f.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"==t&&443!==Number(this.port)||"http"==t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var r=n(85),o=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.exports=function e(n){if(!n||"object"!=_typeof(n))return!1;if(r(n)){for(var o=0,a=n.length;o<a;o++)if(e(n[o]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||i&&n instanceof Blob||s&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var u in n)if(Object.prototype.hasOwnProperty.call(n,u)&&e(n[u]))return!0;return!1}}).call(this,n(22).Buffer)},function(e,t,n){var r,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},s=0,a=0;function u(e){for(var t="";t=o[e%64]+t,0<(e=Math.floor(e/64)););return t}function c(){var e=u(+new Date);return e!==r?(s=0,r=e):e+"."+u(s++)}for(;a<64;a++)i[o[a]]=a;c.encode=u,c.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+i[e.charAt(a)];return t},e.exports=c},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(21),o=n(7),i=n(95),s=n(41),a=n(42),u=n(14)("socket.io-client:socket"),c=n(16),f=n(37),p=(e.exports=l,{connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1}),d=o.prototype.emit;function l(e,t,n){this.io=e,this.nsp=t,(this.json=this).ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(l.prototype),l.prototype.subEvents=function(){var e;this.subs||(e=this.io,this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))])},l.prototype.open=l.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},l.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},l.prototype.emit=function(e){if(p.hasOwnProperty(e))return d.apply(this,arguments),this;e=i(arguments);var t={type:(void 0!==this.flags.binary?this.flags.binary:f(e))?r.BINARY_EVENT:r.EVENT,data:e,options:{}};return t.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),t.id=this.ids++),this.connected?this.packet(t):this.sendBuffer.push(t),this.flags={},this},l.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},l.prototype.onopen=function(){var e;u("transport is open - connecting"),"/"!==this.nsp&&(this.query?(e="object"==_typeof(this.query)?c.encode(this.query):this.query,u("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})):this.packet({type:r.CONNECT}))},l.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},l.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},l.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?d.apply(this,t):this.receiveBuffer.push(t)},l.prototype.ack=function(e){var t=this,n=!1;return function(){var o;n||(n=!0,o=i(arguments),u("sending ack %j",o),t.packet({type:f(o)?r.BINARY_ACK:r.ACK,id:e,data:o}))}},l.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},l.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},l.prototype.emitBuffered=function(){for(var e=0;e<this.receiveBuffer.length;e++)d.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},l.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},l.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},l.prototype.close=l.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},l.prototype.compress=function(e){return this.flags.compress=e,this},l.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("function"!=typeof(t="string"==typeof t?e[t]:t))throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){var r=n(3);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;n=n?n(t):r.isURLSearchParams(t)?t.toString():(i=[],r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))})))})),i.join("&"));return n&&(-1!==(t=e.indexOf("#"))&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+n),e}},function(e,t,n){e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){(function(t){var r=n(3),o=n(102),i={"Content-Type":"application/x-www-form-urlencoded"};function s(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:a="undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t)?n(47):a,transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(s(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(s(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){u.headers[e]=r.merge(i)})),e.exports=u}).call(this,n(15))},function(e,t,n){var r=n(3),o=n(103),i=n(105),s=n(44),a=n(106),u=n(109),c=n(110),f=n(48);e.exports=function(e){return new Promise((function(t,n){var p,d,l=e.data,h=e.headers,y=(r.isFormData(l)&&delete h["Content-Type"],new XMLHttpRequest),g=(e.auth&&(g=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"",h.Authorization="Basic "+btoa(g+":"+p)),a(e.baseURL,e.url));if(y.open(e.method.toUpperCase(),s(g,e.params,e.paramsSerializer),!0),y.timeout=e.timeout,y.onreadystatechange=function(){var r;y&&4===y.readyState&&(0!==y.status||y.responseURL&&0===y.responseURL.indexOf("file:"))&&(r="getAllResponseHeaders"in y?u(y.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?y.response:y.responseText,status:y.status,statusText:y.statusText,headers:r,config:e,request:y},o(t,n,r),y=null)},y.onabort=function(){y&&(n(f("Request aborted",e,"ECONNABORTED",y)),y=null)},y.onerror=function(){n(f("Network Error",e,null,y)),y=null},y.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(f(t,e,"ECONNABORTED",y)),y=null},r.isStandardBrowserEnv()&&(d=(e.withCredentials||c(g))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0)&&(h[e.xsrfHeaderName]=d),"setRequestHeader"in y&&r.forEach(h,(function(e,t){void 0===l&&"content-type"===t.toLowerCase()?delete h[t]:y.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(y.withCredentials=!!e.withCredentials),e.responseType)try{y.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&y.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&y.upload&&y.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){y&&(y.abort(),n(e),y=null)})),l=l||null,y.send(l)}))}},function(e,t,n){var r=n(104);e.exports=function(e,t,n,o,i){return e=new Error(e),r(e,t,n,o,i)}},function(e,t,n){var r=n(3);e.exports=function(e,t){t=t||{};var n={},o=["url","method","data"],i=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function c(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=u(void 0,e[o])):n[o]=u(e[o],t[o])}r.forEach(o,(function(e){r.isUndefined(t[e])||(n[e]=u(void 0,t[e]))})),r.forEach(i,c),r.forEach(s,(function(o){r.isUndefined(t[o])?r.isUndefined(e[o])||(n[o]=u(void 0,e[o])):n[o]=u(void 0,t[o])})),r.forEach(a,(function(r){r in t?n[r]=u(e[r],t[r]):r in e&&(n[r]=u(void 0,e[r]))}));var f=o.concat(i).concat(s).concat(a);o=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===f.indexOf(e)}));return r.forEach(o,c),n}},function(e,t,n){function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){e.exports=function(e,t){for(var n=new Array(arguments.length-1),r=0,o=2,i=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,s){n[r]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,s(e))}}))}},function(module,exports,__webpack_require__){function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,n){t.Service=n(127)},function(e,t,n){e.exports={}},function(e,t,n){e.exports=function(e){for(var t=i.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),n=e.fieldsArray.slice().sort(i.compareFieldsById),a=0;a<n.length;++a){var u=n[a].resolve(),c=e._fieldsArray.indexOf(u),f=u.resolvedType instanceof r?"int32":u.type,p=o.basic[f],d="m"+i.safeProp(u.name);u.map?(t("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",d,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",d)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|o.mapKey[u.keyType],u.keyType),void 0===p?t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,d):t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|p,f,d),t("}")("}")):u.repeated?(t("if(%s!=null&&%s.length){",d,d),u.packed&&void 0!==o.packed[f]?t("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",d)("w.%s(%s[i])",f,d)("w.ldelim()"):(t("for(var i=0;i<%s.length;++i)",d),void 0===p?s(t,u,c,d+"[i]"):t("w.uint32(%i).%s(%s[i])",(u.id<<3|p)>>>0,f,d)),t("}")):(u.optional&&t("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",d,u.name),void 0===p?s(t,u,c,d):t("w.uint32(%i).%s(%s)",(u.id<<3|p)>>>0,f,d))}return t("return w")};var r=n(6),o=n(12),i=n(1);function s(e,t,n,r){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",n,r,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",n,r,(t.id<<3|2)>>>0)}},function(e,t,n){e.exports=v;var r=n(11),o=(((v.prototype=Object.create(r.prototype)).constructor=v).className="Type",n(6)),i=n(28),s=n(10),a=n(57),u=n(58),c=n(29),f=n(27),p=n(26),d=n(1),l=n(55),h=n(60),y=n(61),g=n(62),m=n(63);function v(e,t){r.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var n=this.fields[e[t]],r=n.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=n}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof c||((e.prototype=new c).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,c,!0),this._ctor=e;for(var n=0;n<this.fieldsArray.length;++n)this._fieldsArray[n].resolve();var r={};for(n=0;n<this.oneofsArray.length;++n)r[this._oneofsArray[n].resolve().name]={get:d.oneOfGetter(this._oneofsArray[n].oneof),set:d.oneOfSetter(this._oneofsArray[n].oneof)};n&&Object.defineProperties(e.prototype,r)}}}),v.generateConstructor=function(e){for(var t,n=d.codegen(["p"],e.name),r=0;r<e.fieldsArray.length;++r)(t=e._fieldsArray[r]).map?n("this%s={}",d.safeProp(t.name)):t.repeated&&n("this%s=[]",d.safeProp(t.name));return n("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var n=new v(e,t.options);n.extensions=t.extensions,n.reserved=t.reserved;for(var c=Object.keys(t.fields),f=0;f<c.length;++f)n.add((void 0!==t.fields[c[f]].keyType?a:s).fromJSON(c[f],t.fields[c[f]]));if(t.oneofs)for(c=Object.keys(t.oneofs),f=0;f<c.length;++f)n.add(i.fromJSON(c[f],t.oneofs[c[f]]));if(t.nested)for(c=Object.keys(t.nested),f=0;f<c.length;++f){var p=t.nested[c[f]];n.add((void 0!==p.id?s:void 0!==p.fields?v:void 0!==p.values?o:void 0!==p.methods?u:r).fromJSON(c[f],p))}return t.extensions&&t.extensions.length&&(n.extensions=t.extensions),t.reserved&&t.reserved.length&&(n.reserved=t.reserved),t.group&&(n.group=!0),t.comment&&(n.comment=t.comment),n},v.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return d.toObject(["options",t&&t.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,e),"fields",r.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var n=this.oneofsArray;for(t=0;t<n.length;)n[t++].resolve();return r.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&void 0===e.extend){if((this._fieldsById||this.fieldsById)[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),(this.fields[e.name]=e).message=this,e.onAdd(this),_(this)}return e instanceof i?(this.oneofs||(this.oneofs={}),(this.oneofs[e.name]=e).onAdd(this),_(this)):r.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof s&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),_(this)}if(e instanceof i){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),_(this)}return r.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return r.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return r.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],n=0;n<this.fieldsArray.length;++n)t.push(this._fieldsArray[n].resolve().resolvedType);var r;return this.encode=l(this)({Writer:p,types:t,util:d}),this.decode=h(this)({Reader:f,types:t,util:d}),this.verify=y(this)({types:t,util:d}),this.fromObject=g.fromObject(this)({types:t,util:d}),this.toObject=g.toObject(this)({types:t,util:d}),(e=m[e])&&((r=Object.create(this)).fromObject=this.fromObject,this.fromObject=e.fromObject.bind(r),r.toObject=this.toObject,this.toObject=e.toObject.bind(r)),this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof f||(e=f.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){d.decorateType(t,e)}}},function(e,t,n){e.exports=s;var r=n(10),o=(((s.prototype=Object.create(r.prototype)).constructor=s).className="MapField",n(12)),i=n(1);function s(e,t,n,o,s,a){if(r.call(this,e,t,o,void 0,void 0,s,a),!i.isString(n))throw TypeError("keyType must be a string");this.keyType=n,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){return e=!!e&&Boolean(e.keepComments),i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===o.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},s.d=function(e,t,n){return"function"==typeof n?n=i.decorateType(n).name:n&&"object"==_typeof(n)&&(n=i.decorateEnum(n).name),function(r,o){i.decorateType(r.constructor).add(new s(o,e,t,n))}}},function(e,t,n){e.exports=a;var r=n(11),o=(((a.prototype=Object.create(r.prototype)).constructor=a).className="Service",n(59)),i=n(1),s=n(53);function a(e,t){r.call(this,e,t),this.methods={},this._methodsArray=null}function u(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var n=new a(e,t.options);if(t.methods)for(var r=Object.keys(t.methods),i=0;i<r.length;++i)n.add(o.fromJSON(r[i],t.methods[r[i]]));return t.nested&&n.addJSON(t.nested),n.comment=t.comment,n},a.prototype.toJSON=function(e){var t=r.prototype.toJSON.call(this,e),n=!!e&&Boolean(e.keepComments);return i.toObject(["options",t&&t.options||void 0,"methods",r.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",n?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||r.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof o?u((this.methods[e.name]=e).parent=this):r.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof o){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,u(this)}return r.prototype.remove.call(this,e)},a.prototype.create=function(e,t,n){for(var r,o=new s.Service(e,t,n),a=0;a<this.methodsArray.length;++a){var u=i.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");o[u]=i.codegen(["r","c"],i.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return o}},function(e,t,n){e.exports=i;var r=n(9),o=(((i.prototype=Object.create(r.prototype)).constructor=i).className="Method",n(1));function i(e,t,n,i,s,a,u,c,f){if(o.isObject(s)?(u=s,s=a=void 0):o.isObject(a)&&(u=a,a=void 0),void 0!==t&&!o.isString(t))throw TypeError("type must be a string");if(!o.isString(n))throw TypeError("requestType must be a string");if(!o.isString(i))throw TypeError("responseType must be a string");r.call(this,e,u),this.type=t||"rpc",this.requestType=n,this.requestStream=!!s||void 0,this.responseType=i,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=c,this.parsedOptions=f}i.fromJSON=function(e,t){return new i(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},i.prototype.toJSON=function(e){return e=!!e&&Boolean(e.keepComments),o.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},function(e,t,n){e.exports=function(e){var t=i.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var n=0;n<e.fieldsArray.length;++n){var s=e._fieldsArray[n].resolve(),a=s.resolvedType instanceof r?"int32":s.type,u="m"+i.safeProp(s.name);t("case %i:",s.id),s.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==o.defaults[s.keyType]?t("k=%j",o.defaults[s.keyType]):t("k=null"),void 0!==o.defaults[a]?t("value=%j",o.defaults[a]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",s.keyType)("case 2:"),void 0===o.basic[a]?t("value=types[%i].decode(r,r.uint32())",n):t("value=r.%s()",a),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==o.long[s.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',u):t("%s[k]=value",u)):s.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==o.packed[a]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,a)("}else"),void 0===o.basic[a]?t(s.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,n):t("%s.push(r.%s())",u,a)):void 0===o.basic[a]?t(s.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,n):t("%s=r.%s()",u,a),t("break")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),n=0;n<e._fieldsArray.length;++n){var c=e._fieldsArray[n];c.required&&t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})","missing required '"+c.name+"'")}return t("return m")};var r=n(6),o=n(12),i=n(1)},function(e,t,n){e.exports=function(e){var t=o.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n={};e.oneofsArray.length&&t("var p={}");for(var r=0;r<e.fieldsArray.length;++r){var a,u=e._fieldsArray[r].resolve(),c="m"+o.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,u.name),u.map){t("if(!util.isObject(%s))",c)("return%j",i(u,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),f=void 0;var f=t,p=u,d="k[i]";switch(p.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":f("if(!util.key32Re.test(%s))",d)("return%j",i(p,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":f("if(!util.key64Re.test(%s))",d)("return%j",i(p,"integer|Long key"));break;case"bool":f("if(!util.key2Re.test(%s))",d)("return%j",i(p,"boolean key"))}s(t,u,r,c+"[k[i]]")("}")}else u.repeated?(t("if(!Array.isArray(%s))",c)("return%j",i(u,"array"))("for(var i=0;i<%s.length;++i){",c),s(t,u,r,c+"[i]")("}")):(u.partOf&&(a=o.safeProp(u.partOf.name),1===n[u.partOf.name]&&t("if(p%s===1)",a)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,t("p%s=1",a)),s(t,u,r,c));u.optional&&t("}")}return t("return null")};var r=n(6),o=n(1);function i(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,n,o){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(%s){",o)("default:")("return%j",i(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,o)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",o)("return%j",i(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",o,o,o,o)("return%j",i(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',o)("return%j",i(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',o)("return%j",i(t,"boolean"));break;case"string":e("if(!util.isString(%s))",o)("return%j",i(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',o,o,o)("return%j",i(t,"buffer"))}return e}},function(e,t,n){var r=n(6),o=n(1);function i(e,t,n,o){if(t.resolvedType)if(t.resolvedType instanceof r){e("switch(d%s){",o);for(var i=t.resolvedType.values,s=Object.keys(i),a=0;a<s.length;++a)t.repeated&&i[s[a]]===t.typeDefault&&e("default:"),e("case%j:",s[a])("case %i:",i[s[a]])("m%s=%j",o,i[s[a]])("break");e("}")}else e('if(typeof d%s!=="object")',o)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",o,n,o);else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",o,o);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",o,o);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",o,o);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",o,o,u)('else if(typeof d%s==="string")',o)("m%s=parseInt(d%s,10)",o,o)('else if(typeof d%s==="number")',o)("m%s=d%s",o,o)('else if(typeof d%s==="object")',o)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",o,o,o,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',o)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",o,o,o)("else if(d%s.length)",o)("m%s=d%s",o,o);break;case"string":e("m%s=String(d%s)",o,o);break;case"bool":e("m%s=Boolean(d%s)",o,o)}}return e}function s(e,t,n,o){if(t.resolvedType)t.resolvedType instanceof r?e("d%s=o.enums===String?types[%i].values[m%s]:m%s",o,n,o,o):e("d%s=types[%i].toObject(m%s,o)",o,n,o);else{var i=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",o,o,o,o);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',o)("d%s=o.longs===String?String(m%s):m%s",o,o,o)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",o,o,o,o,i?"true":"",o);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",o,o,o,o,o);break;default:e("d%s=m%s",o,o)}}return e}t.fromObject=function(e){var t=e.fieldsArray,n=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return n("return new this.ctor");n("var m=new this.ctor");for(var s=0;s<t.length;++s){var a=t[s].resolve(),u=o.safeProp(a.name);a.map?(n("if(d%s){",u)('if(typeof d%s!=="object")',u)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",u)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",u),i(n,a,s,u+"[ks[i]]")("}")("}")):a.repeated?(n("if(d%s){",u)("if(!Array.isArray(d%s))",u)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",u)("for(var i=0;i<d%s.length;++i){",u),i(n,a,s,u+"[i]")("}")("}")):(a.resolvedType instanceof r||n("if(d%s!=null){",u),i(n,a,s,u),a.resolvedType instanceof r||n("}"))}return n("return m")},t.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var n=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],a=[],u=[],c=0;c<t.length;++c)t[c].partOf||(t[c].resolve().repeated?i:t[c].map?a:u).push(t[c]);if(i.length){for(n("if(o.arrays||o.defaults){"),c=0;c<i.length;++c)n("d%s=[]",o.safeProp(i[c].name));n("}")}if(a.length){for(n("if(o.objects||o.defaults){"),c=0;c<a.length;++c)n("d%s={}",o.safeProp(a[c].name));n("}")}if(u.length){for(n("if(o.defaults){"),c=0;c<u.length;++c){var f,p=u[c],d=o.safeProp(p.name);p.resolvedType instanceof r?n("d%s=o.enums===String?%j:%j",d,p.resolvedType.valuesById[p.typeDefault],p.typeDefault):p.long?n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",p.typeDefault.low,p.typeDefault.high,p.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,p.typeDefault.toString(),p.typeDefault.toNumber()):p.bytes?(f="["+Array.prototype.slice.call(p.typeDefault).join(",")+"]",n("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,p.typeDefault))("else{")("d%s=%s",d,f)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")):n("d%s=%j",d,p.typeDefault)}n("}")}var l=!1;for(c=0;c<t.length;++c){p=t[c];var h=e._fieldsArray.indexOf(p);d=o.safeProp(p.name);p.map?(l||(l=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),s(n,p,h,d+"[ks2[j]]")("}")):p.repeated?(n("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),s(n,p,h,d+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",d,p.name),s(n,p,h,d),p.partOf&&n("if(o.oneofs)")("d%s=%j",o.safeProp(p.partOf.name),p.name)),n("}")}return n("return d")}},function(e,t,n){var r=n(29);t[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t,n=e["@type"].substring(e["@type"].lastIndexOf("/")+1);if(n=this.lookup(n))return-1===(t="."===e["@type"].charAt(0)?e["@type"].substr(1):e["@type"]).indexOf("/")&&(t="/"+t),this.create({type_url:t,value:n.encode(n.fromObject(e)).finish()})}return this.fromObject(e)},toObject:function(e,t){var n,o="",i="";return t&&t.json&&e.type_url&&e.value&&(i=e.type_url.substring(e.type_url.lastIndexOf("/")+1),o=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1),(n=this.lookup(i))&&(e=n.decode(e.value))),!(e instanceof this.ctor)&&e instanceof r?(n=e.$type.toObject(e,t),i=(o=""===o?"type.googleapis.com/":o)+("."===e.$type.fullName[0]?e.$type.fullName.substr(1):e.$type.fullName),n["@type"]=i,n):this.toObject(e,t)}}},function(e,t,n){e.exports=p;var r=n(11);((p.prototype=Object.create(r.prototype)).constructor=p).className="Root";var o,i,s,a=n(10),u=n(6),c=n(28),f=n(1);function p(e){r.call(this,"",e),this.deferred=[],this.files=[]}function d(){}p.fromJSON=function(e,t){return t=t||new p,e.options&&t.setOptions(e.options),t.addJSON(e.nested)},p.prototype.resolvePath=f.path.resolve,p.prototype.fetch=f.fetch,p.prototype.load=function e(t,n,r){"function"==typeof n&&(r=n,n=void 0);var o=this;if(!r)return f.asPromise(e,o,t,n);var a=r===d;function u(e,t){if(r){var n=r;if(r=null,a)throw e;n(e,t)}}function c(e){var t=e.lastIndexOf("google/protobuf/");return-1<t&&(e=e.substring(t))in s?e:null}function p(e,t){try{if(f.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),f.isString(t)){i.filename=e;var r,s=i(t,o,n),p=0;if(s.imports)for(;p<s.imports.length;++p)(r=c(s.imports[p])||o.resolvePath(e,s.imports[p]))&&l(r);if(s.weakImports)for(p=0;p<s.weakImports.length;++p)(r=c(s.weakImports[p])||o.resolvePath(e,s.weakImports[p]))&&l(r,!0)}else o.setOptions(t.options).addJSON(t.nested)}catch(e){u(e)}a||h||u(null,o)}function l(e,t){if(!(-1<o.files.indexOf(e)))if(o.files.push(e),e in s)a?p(e,s[e]):(++h,setTimeout((function(){--h,p(e,s[e])})));else if(a){var n;try{n=f.fs.readFileSync(e).toString("utf8")}catch(e){return t||u(e),0}p(e,n)}else++h,o.fetch(e,(function(n,i){--h,r&&(n?t?h||u(null,o):u(n):p(e,i))}))}var h=0;f.isString(t)&&(t=[t]);for(var y,g=0;g<t.length;++g)(y=o.resolvePath("",t[g]))&&l(y);if(a)return o;h||u(null,o)},p.prototype.loadSync=function(e,t){if(!f.isNode)throw Error("not supported");return this.load(e,t,d)},p.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var l=/^[A-Z]/;function h(e,t){var n,r=t.parent.lookup(t.extend);if(r)return((n=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options)).declaringField=t).extensionField=n,r.add(n),1}p.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||h(0,e)||this.deferred.push(e);else if(e instanceof u)l.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof c)){if(e instanceof o)for(var t=0;t<this.deferred.length;)h(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var n=0;n<e.nestedArray.length;++n)this._handleAdd(e._nestedArray[n]);l.test(e.name)&&(e.parent[e.name]=e)}},p.prototype._handleRemove=function(e){var t;if(e instanceof a)void 0!==e.extend&&(e.extensionField?(e.extensionField.parent.remove(e.extensionField),e.extensionField=null):-1<(t=this.deferred.indexOf(e))&&this.deferred.splice(t,1));else if(e instanceof u)l.test(e.name)&&delete e.parent[e.name];else if(e instanceof r){for(var n=0;n<e.nestedArray.length;++n)this._handleRemove(e._nestedArray[n]);l.test(e.name)&&delete e.parent[e.name]}},p._configure=function(e,t,n){o=e,i=t,s=n}},function(e,t,n){var r=n(72),o=n(21),i=n(34),s=n(14)("socket.io-client"),a=(e.exports=t=u,t.managers={});function u(e,t){"object"==_typeof(e)&&(t=e,e=void 0),t=t||{};var n=(e=r(e)).source,o=e.id,u=e.path;u=a[o]&&u in a[o].nsps,u=t.forceNew||t["force new connection"]||!1===t.multiplex||u?(s("ignoring socket cache for %s",n),i(n,t)):(a[o]||(s("new io instance for %s",n),a[o]=i(n,t)),a[o]);return e.query&&!t.query&&(t.query=e.query),u.socket(e.path,t)}t.protocol=o.protocol,t.connect=u,t.Manager=n(34),t.Socket=n(40)},function(e,t,n){var r;n=[n(0)];void 0===(t="function"==typeof(r=function(e){return(e.roots.messagebody||(e.roots.messagebody=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{MessageOperation:{fields:{type:{type:"OpType",id:1},mid:{type:"uint64",id:2},xid:{type:"XID",id:3}},nested:{OpType:{values:{UNKNOWN:0,READ_ACK:1,READ_ALL:2,READ_CANCEL:3,DELIVER_ACK:4,RECALL:5,DELETE:6,PLAY_ACK:7}}}},MessageBody:{fields:{type:{type:"Type",id:1},content:{type:"string",id:4},ctype:{type:"ContentType",id:5},operation:{type:"MessageOperation",id:6},config:{type:"string",id:7},attachment:{type:"string",id:8},ext:{type:"string",id:9},qos:{type:"QoS",id:10},sender_name:{type:"string",id:11},is_system:{type:"bool",id:12},priority:{type:"uint32",id:13},status:{type:"Status",id:14}},nested:{Type:{values:{NORMAL:0,OPER:1,CHAT:2,GROUPCHAT:3}},ContentType:{values:{TEXT:0,IMAGE:1,AUDIO:2,VIDEO:3,FILE:4,LOCATION:5,COMMAND:6,FORWARD:7}},QoS:{values:{AT_LEAST_ONCE:0,AT_MOST_ONCE:1,EXACTLY_ONCE:2}},Status:{values:{UNREAD:0,DELIVERED:1,READ:2}}}},XID:{fields:{uid:{type:"uint64",id:1},deviceSN:{type:"uint32",id:2}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=t)},function(e,t,n){var r;n=[n(0)];void 0===(t="function"==typeof(r=function(e){return(e.roots.groupnotice||(e.roots.groupnotice=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{GroupNotice:{fields:{type:{type:"Type",id:1},gid:{type:"XID",id:2},from:{type:"XID",id:3},to:{rule:"repeated",type:"XID",id:4},content:{type:"string",id:5}},nested:{Type:{values:{UNKNOWN:0,PRESENCE:1,ABSENCE:2,CREATED:3,DESTROYED:4,JOINED:5,LEAVED:6,APPLYED:7,APPLY_ACCEPTED:8,APPLY_DECLINED:9,INVITED:10,INVITE_ACCEPTED:11,INVITE_DECLINED:12,KICKED:13,BLOCKED:14,UNBLOCKED:15,OWNER_ASSIGNED:16,ADMIN_GRANTED:17,ADMIN_REVOKED:18,MUTED:19,UNMUTED:20,BANNED:21,UNBANNED:22,INFO_UPDATED:23,ANNOUNCEMENT_UPDATED:24,MESSAGE_SETTING:25,FILE_UPLOADED:26,FILE_DELETED:27,FILE_UPDATED:28}}}},XID:{fields:{uid:{type:"uint64",id:1},deviceSN:{type:"uint32",id:2}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=t)},function(e,t,n){var r;n=[n(0)];void 0===(t="function"==typeof(r=function(e){return(e.roots.rosternotice||(e.roots.rosternotice=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{RosterNotice:{fields:{type:{type:"Type",id:1},from:{type:"XID",id:2},to:{rule:"repeated",type:"XID",id:3},content:{type:"string",id:4},roster_vsn:{type:"string",id:5}},nested:{Type:{values:{UNKNOWN:0,ADDED:1,REMOVED:2,ACCEPTED:3,DECLINED:4,APPLIED:7,BLOCKED:5,UNBLOCKED:6,INFO_UPDATED:8,MUTED:9,UNMUTED:10}}}},XID:{fields:{uid:{type:"uint64",id:1},deviceSN:{type:"uint32",id:2}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=t)},function(e,t,n){var r;n=[n(0)];void 0===(t="function"==typeof(r=function(e){return(e.roots.usernotice||(e.roots.usernotice=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{UserNotice:{fields:{type:{type:"Type",id:1},content:{type:"string",id:2}},nested:{Type:{values:{UNKNOWN:0,PASSWORD_CHANGED:1,FROZEN:2,REMOVED:3,KICK_BY_SAME_DEVICE:4,KICKED_BY_OTHER_DEVICE:5,INFO_UPDATED:6,DEVICE_LOGIN:7,DEVICE_LOGOUT:8,DEVICE_ADDED:9,DEVICE_REMOVED:10,CLUSTER_CHANGED:11}}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=t)},function(e,t,n){var r;n=[n(0)];void 0===(t="function"==typeof(r=function(e){return(e.roots.info||(e.roots.info=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{Info:{fields:{sdk_vsn:{type:"string",id:1},network:{type:"Network",id:2},content:{type:"string",id:3}},nested:{Network:{values:{WIRE:0,WIFI:1,NET_2G:2,NET_3G:3,NET_4G:4,NET_5G:5,UNKNOWN:6}}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=t)},function(e,t,n){var r;n=[n(0)];void 0===(t="function"==typeof(r=function(e){return(e.roots.conversation||(e.roots.conversation=new e.Root)).addJSON({im:{nested:{floo:{nested:{protobuf:{nested:{Conversation:{fields:{type:{type:"Type",id:1},operation:{type:"ConversationOperation",id:2}},nested:{Type:{values:{UNKNOWN:0,OPER:1}}}},ConversationOperation:{fields:{type:{type:"OpType",id:1},xid:{type:"XID",id:2}},nested:{OpType:{values:{UNKNOWN:0,DELETE:1,DELETE_EVERYWHERE:2}}}},XID:{fields:{uid:{type:"uint64",id:1},deviceSN:{type:"uint32",id:2}}}}}}}}}})})?r.apply(t,n):r)||(e.exports=t)},function(e,t,n){var r=n(30),o=n(14)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,"string"==typeof(e=null==e?t.protocol+"//"+t.host:e)&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=r(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/",e=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+e+":"+n.port,n.href=n.protocol+"://"+e+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,i=o-(n||o);e.diff=i,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){return"%%"===n||(u++,"function"==typeof(r=t.formatters[r])&&(o=s[u],n=r.call(e,o),s.splice(u,1),u--)),n;var o})),t.formatArgs.call(e,s),(r.log||t.log||console.log.bind(console)).apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(o=0;o<t.instances.length;o++){var i=t.instances[o];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;for(var n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(20),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r?r.env.DEBUG:e}(t=e.exports=n(75)).log=function(){return"object"==("undefined"==typeof console?"undefined":_typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n,r,o=this.useColors;e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+t.humanize(this.diff),o&&(o="color: "+this.color,e.splice(1,0,o,"color: inherit"),e[r=n=0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(r=n))})),e.splice(r,0,o))},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(15))},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,i=o-(n||o);e.diff=i,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){return"%%"===n||(u++,"function"==typeof(r=t.formatters[r])&&(o=s[u],n=r.call(e,o),s.splice(u,1),u--)),n;var o})),t.formatArgs.call(e,s),(r.log||t.log||console.log.bind(console)).apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(o=0;o<t.instances.length;o++){var i=t.instances[o];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;for(var n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(20),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(31),o=n(32),i=(n=Object.prototype.toString,"function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===n.call(Blob)),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===n.call(File);t.deconstructPacket=function(e){var t=[],n=e.data;return e.data=function e(t,n){if(!t)return t;var i,s;if(o(t))return i={_placeholder:!0,num:n.length},n.push(t),i;if(r(t)){for(var a=new Array(t.length),u=0;u<t.length;u++)a[u]=e(t[u],n);return a}if("object"!=_typeof(t)||t instanceof Date)return t;for(s in a={},t)a[s]=e(t[s],n);return a}(n,t),e.attachments=t.length,{packet:e,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(r(t))for(var o=0;o<t.length;o++)t[o]=e(t[o],n);else if("object"==_typeof(t))for(var i in t)t[i]=e(t[i],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,a=e;!function e(u,c,f){if(!u)return u;if(i&&u instanceof Blob||s&&u instanceof File){n++;var p=new FileReader;p.onload=function(){f?f[c]=this.result:a=this.result,--n||t(a)},p.readAsArrayBuffer(u)}else if(r(u))for(var d=0;d<u.length;d++)e(u[d],d,u);else if("object"==_typeof(u)&&!o(u))for(var l in u)e(u[l],l,u)}(a),n||t(a)}},function(e,t,n){t.byteLength=function(e){return 3*((e=c(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){for(var t,n=(r=c(e))[0],r=r[1],s=new i(3*(n+r)/4-r),a=0,u=0<r?n-4:n,f=0;f<u;f+=4)t=o[e.charCodeAt(f)]<<18|o[e.charCodeAt(f+1)]<<12|o[e.charCodeAt(f+2)]<<6|o[e.charCodeAt(f+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===r&&(t=o[e.charCodeAt(f)]<<2|o[e.charCodeAt(f+1)]>>4,s[a++]=255&t),1===r&&(t=o[e.charCodeAt(f)]<<10|o[e.charCodeAt(f+1)]<<4|o[e.charCodeAt(f+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],s=0,a=n-o;s<a;s+=16383)i.push(function(e,t,n){for(var o,i=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),i.push(r[(o=o)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return i.join("")}(e,s,a<s+16383?a:s+16383));return 1==o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2==o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],o[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return[e=-1===(e=e.indexOf("="))?t:e,e===t?0:4-e%4]}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,f=-7,p=n?o-1:0,d=n?-1:1;o=e[t+p];for(p+=d,i=o&(1<<-f)-1,o>>=-f,f+=a;0<f;i=256*i+e[t+p],p+=d,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=r;0<f;s=256*s+e[t+p],p+=d,f-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,r),i-=c}return(o?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,u=8*i-o-1,c=(1<<u)-1,f=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,l=r?1:-1;i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+f?p/r:p*Math.pow(2,1-f))*r&&(s++,r/=2),c<=s+f?(a=0,s=c):1<=s+f?(a=(t*r-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));8<=o;e[n+d]=255&a,d+=l,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;e[n+d]=255&s,d+=l,s/=256,u-=8);e[n+d-l]|=128*i}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(81),e.exports.parser=n(8)},function(e,t,n){var r=n(35),o=n(7),i=n(18)("engine.io-client:socket"),s=n(39),a=n(8),u=n(30),c=n(16);function f(e,t){if(!(this instanceof f))return new f(e,t);t=t||{},e&&"object"==_typeof(e)&&(t=e,e=null),e?(e=u(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=u(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),"undefined"!=typeof self&&!this.isReactNative||(t.extraHeaders&&0<Object.keys(t.extraHeaders).length&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}(e.exports=f).priorWebsocketSuccess=!1,o(f.prototype),f.protocol=a.protocol,(f.Socket=f).Transport=n(25),f.transports=n(35),f.parser=n(8),f.prototype.createTransport=function(e){i('creating transport "%s"',e);var t=function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(this.query),n=(t.EIO=a.protocol,t.transport=e,this.transportOptions[e]||{});return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},f.prototype.open=function(){var e,t;if(this.rememberUpgrade&&f.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return t=this,void setTimeout((function(){t.emit("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},f.prototype.setTransport=function(e){i("setting transport %s",e.name);var t=this;this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),(this.transport=e).on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},f.prototype.probe=function(e){i('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function o(){var o;r.onlyBinaryUpgrades&&(o=!this.supportsBinary&&r.transport.supportsBinary,n=n||o),n||(i('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){n||("pong"===o.type&&"probe"===o.data?(i('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),t&&(f.priorWebsocketSuccess="websocket"===t.name,i('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(i("changing transport and sending upgrade packet"),d(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())})))):(i('probe transport "%s" failed',e),(o=new Error("probe error")).transport=t.name,r.emit("upgradeError",o)))})))}function s(){n||(n=!0,d(),t.close(),t=null)}function a(n){var o=new Error("probe error: "+n);o.transport=t.name,s(),i('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",o)}function u(){a("transport closed")}function c(){a("socket closed")}function p(e){t&&e.name!==t.name&&(i('"%s" works - aborting "%s"',e.name,t.name),s())}function d(){t.removeListener("open",o),t.removeListener("error",a),t.removeListener("close",u),r.removeListener("close",c),r.removeListener("upgrading",p)}f.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",a),t.once("close",u),this.once("close",c),this.once("upgrading",p),t.open()},f.prototype.onOpen=function(){if(i("socket open"),this.readyState="open",f.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){i("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},f.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else i('packet received with socket readyState "%s"',this.readyState)},f.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},f.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},f.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){i("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},f.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},f.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),(this.prevBufferLen=0)===this.writeBuffer.length?this.emit("drain"):this.flush()},f.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},f.prototype.write=f.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},f.prototype.sendPacket=function(e,t,n,r){"function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState&&((n=n||{}).compress=!1!==n.compress,this.emit("packetCreate",e={type:e,data:t,options:n}),this.writeBuffer.push(e),r&&this.once("flush",r),this.flush())},f.prototype.close=function(){var e;function t(){e.onClose("forced close"),i("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",(e=this).writeBuffer.length?this.once("drain",(function(){(this.upgrading?r:t)()})):(this.upgrading?r:t)()),this},f.prototype.onError=function(e){i("socket error %j",e),f.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},f.prototype.onClose=function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(i('socket close with reason: "%s"',e),clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)},f.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~s(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var r=n(23),o=n(36),i=n(7),s=n(17),a=n(18)("engine.io-client:polling-xhr");n=n(24);function u(){}function c(e){var t,n;o.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location&&(t="https:"===location.protocol,n=(n=location.port)||(t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t)}function f(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function p(){for(var e in f.requests)f.requests.hasOwnProperty(e)&&f.requests[e].abort()}e.exports=c,e.exports.Request=f,s(c,o),c.prototype.supportsBinary=!0,c.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new f(e)},c.prototype.doWrite=function(e,t){e=this.request({method:"POST",data:e,isBinary:"string"!=typeof e&&void 0!==e});var n=this;e.on("success",t),e.on("error",(function(e){n.onError("xhr post error",e)})),this.sendXhr=e},c.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},i(f.prototype),f.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR},t=(e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.xhr=new r(e)),n=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},a("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},f.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},f.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var e,t;try{try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},f.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},f.requestsCount=0,f.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",p):"function"==typeof addEventListener&&addEventListener("onpagehide"in n?"pagehide":"unload",p,!1))},function(e,t){e.exports=Object.keys||function(e){var t,n=[],r=Object.prototype.hasOwnProperty;for(t in e)r.call(e,t)&&n.push(t);return n}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),r<n&&(n=r),r<=t||n<=t||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(e),i=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var o=!1;return r=r||n,0===(i.count=e)?t():i;function i(e,n){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(o=!0,t(e),t=r):0!==i.count||o||t(null,n)}}},function(e,t){var n,r,o,i=String.fromCharCode;function s(e){for(var t,n,r=[],o=0,i=e.length;o<i;)55296<=(t=e.charCodeAt(o++))&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function a(e,t){if(!(55296<=e&&e<=57343))return 1;if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function u(e,t){return i(e>>t&63|128)}function c(){if(r<=o)throw Error("Invalid byte index");var e=255&n[o];if(o++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=s(e),o=r.length,c=-1,f="";++c<o;)f+=function(e,t){if(0==(4294967168&e))return i(e);var n="";return 0==(4294965248&e)?n=i(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),n=i(e>>12&15|224),n+=u(e,6)):0==(4292870144&e)&&(n=i(e>>18&7|240),n=(n+=u(e,12))+u(e,6)),n+i(63&e|128)}(r[c],n);return f},decode:function(e,t){var u=!1!==(t=t||{}).strict;n=s(e),r=n.length,o=0;for(var f,p=[];!1!==(f=function(e){var t,i;if(r<o)throw Error("Invalid byte index");if(o==r)return!1;if(t=255&n[o],o++,0==(128&t))return t;if(192==(224&t)){if(128<=(i=(31&t)<<6|c()))return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if(2048<=(i=(15&t)<<12|c()<<6|c()))return a(i,e)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&65536<=(i=(7&t)<<18|c()<<12|c()<<6|c())&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}(u));)p.push(f);for(var d,l=p,h=l.length,y=-1,g="";++y<h;)65535<(d=l[y])&&(g+=i((d-=65536)>>>10&1023|55296),d=56320|1023&d),g+=i(d);return g}}},function(e,t){var n;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.encode=function(e){for(var t=new Uint8Array(e),r=t.length,o="",i=0;i<r;i+=3)o=(o=(o=(o+=n[t[i]>>2])+n[(3&t[i])<<4|t[i+1]>>4])+n[(15&t[i+1])<<2|t[i+2]>>6])+n[63&t[i+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(e){for(var t,r,o,i,s=.75*e.length,a=e.length,u=0,c=(s=("="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--),new ArrayBuffer(s)),new Uint8Array(s)),f=0;f<a;f+=4)t=n.indexOf(e[f]),r=n.indexOf(e[f+1]),o=n.indexOf(e[f+2]),i=n.indexOf(e[f+3]),c[u++]=t<<2|r>>4,c[u++]=(15&r)<<4|o>>2,c[u++]=(3&o)<<6|63&i;return s}},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),i=n&&n.prototype.append&&n.prototype.getBlob;function s(e){return e.map((function(e){var t,n;return e.buffer instanceof ArrayBuffer?(t=e.buffer,e.byteLength!==t.byteLength&&((n=new Uint8Array(e.byteLength)).set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer),t):e}))}function a(e,t){t=t||{};var r=new n;return s(e).forEach((function(e){r.append(e)})),t.type?r.getBlob(t.type):r.getBlob()}function u(e,t){return new Blob(s(e),t||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,u.prototype=Blob.prototype),e.exports=r?o?Blob:u:i?a:void 0},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,o=+new Date,i=o-(n||o);e.diff=i,e.prev=n,e.curr=o,n=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){return"%%"===n||(u++,"function"==typeof(r=t.formatters[r])&&(o=s[u],n=r.call(e,o),s.splice(u,1),u--)),n;var o})),t.formatArgs.call(e,s),(r.log||t.log||console.log.bind(console)).apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=o,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(o=0;o<t.instances.length;o++){var i=t.instances[o];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;for(var n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(20),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(36),o=n(17),i=n(24);e.exports=f;var s,a=/\n/g,u=/\\n/g;function c(){}function f(e){r.call(this,e),this.query=this.query||{},s=s||(i.___eio=i.___eio||[]),this.index=s.length;var t=this;s.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=c)}),!1)}o(f,r),f.prototype.supportsBinary=!1,f.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},f.prototype.doPoll=function(){var e=this,t=document.createElement("script"),n=(this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)},document.getElementsByTagName("script")[0]);n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},f.prototype.doWrite=function(e,t){var n,r,o,i,s=this;function c(){f(),t()}function f(){if(s.iframe)try{s.form.removeChild(s.iframe)}catch(e){s.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+s.iframeId+'">';n=document.createElement(e)}catch(e){(n=document.createElement("iframe")).name=s.iframeId,n.src="javascript:0"}n.id=s.iframeId,s.form.appendChild(n),s.iframe=n}this.form||(r=document.createElement("form"),o=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index,r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=i,r.method="POST",r.setAttribute("accept-charset","utf-8"),o.name="d",r.appendChild(o),document.body.appendChild(r),this.form=r,this.area=o),this.form.action=this.uri(),f(),e=e.replace(u,"\\\n"),this.area.value=e.replace(a,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===s.iframe.readyState&&c()}:this.iframe.onload=c}},function(e,t,n){(function(t){var r,o,i=n(25),s=n(8),a=n(16),u=n(17),c=n(38),f=n(18)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{o=n(94)}catch(u){}var p=r||o;function d(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(p=o),i.call(this,e)}u(e.exports=d,i),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new p(e,t):new p(e):new p(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},d.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,o=0,i=r;o<i;o++)!function(e){s.encodePacket(e,n.supportsBinary,(function(o){var i;n.usingBrowserWebSocket||(i={},e.options&&(i.compress=e.options.compress),!n.perMessageDeflate||("string"==typeof o?t.byteLength(o):o.length)<n.perMessageDeflate.threshold&&(i.compress=!1));try{n.usingBrowserWebSocket?n.ws.send(o):n.ws.send(o,i)}catch(o){f("websocket closed before onclose event")}--r||(n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0))}))}(e[o])},d.prototype.onClose=function(){i.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!==Number(this.port)||"ws"==t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},d.prototype.check=function(){return!(!p||"__initialize"in p&&this.name===d.prototype.name)}}).call(this,n(22).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function n(e){this.ms=(e=e||{}).min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=0<e.jitter&&e.jitter<=1?e.jitter:0,this.attempts=0}(e.exports=n).prototype.duration=function(){var e,t,n=this.ms*Math.pow(this.factor,this.attempts++);return this.jitter&&(e=Math.random(),t=Math.floor(e*this.jitter*n),n=0==(1&Math.floor(10*e))?n-t:n+t),0|Math.min(n,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){var r=n(3),o=n(43),i=n(98),s=n(49);function a(e){e=new i(e);var t=o(i.prototype.request,e);return r.extend(t,i.prototype,e),r.extend(t,e),t}var u=a(n(46));u.Axios=i,u.create=function(e){return a(s(u.defaults,e))},u.Cancel=n(50),u.CancelToken=n(111),u.isCancel=n(45),u.all=function(e){return Promise.all(e)},u.spread=n(112),u.isAxiosError=n(113),e.exports=u,e.exports.default=u},function(e,t,n){var r=n(3),o=n(44),i=n(99),s=n(100),a=n(49);function u(e){this.defaults=e,this.interceptors={request:new i,response:new i}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[s,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},u.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=u},function(e,t,n){var r=n(3);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,n){var r=n(3),o=n(101),i=n(45),s=n(46);function a(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return a(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return a(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(a(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){var r=n(3);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},function(e,t,n){var r=n(3);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){var r=n(48);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,n){var r=n(3);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){return(e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)")))?decodeURIComponent(e[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){var r=n(107),o=n(108);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},function(e,t,n){e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){var r=n(3),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i={};return e&&r.forEach(e.split("\n"),(function(e){n=e.indexOf(":"),t=r.trim(e.substr(0,n)).toLowerCase(),n=r.trim(e.substr(n+1)),t&&(i[t]&&0<=o.indexOf(t)||(i[t]="set-cookie"===t?(i[t]||[]).concat([n]):i[t]?i[t]+", "+n:n))})),i}},function(e,t,n){var r,o,i,s=n(3);function a(e){return o&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}e.exports=s.isStandardBrowserEnv()?(o=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),r=a(window.location.href),function(e){return(e=s.isString(e)?a(e):e).protocol===r.protocol&&e.host===r.host}):function(){return!0}},function(e,t,n){var r=n(50);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");this.promise=new Promise((function(e){t=e}));var t,n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,n){e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){e.exports=function(e){return"object"==_typeof(e)&&!0===e.isAxiosError}},function(e,t,n){e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},function(e,t,n){var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=function e(t,n){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;var r=t.slice(0,n=n||1);n=t.slice(n);return Array.prototype.concat.call([],e(r),e(n))}(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+_typeof(e)+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(f){for(var t=e,n={"%FE%FF":"","%FF%FE":""},r=o.exec(t);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var s=i(r[0]);s!==r[0]&&(n[r[0]]=s)}r=o.exec(t)}n["%C2"]="";for(var a=Object.keys(n),u=0;u<a.length;u++){var c=a[u];t=t.replace(new RegExp(c,"g"),n[c])}return t}}},function(e,t,n){e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){var r=e.exports=n(118);r.build="light",r.load=function(e,t,n){return(t="function"==typeof t?(n=t,new r.Root):t||new r.Root).load(e,n)},r.loadSync=function(e,t){return(t=t||new r.Root).loadSync(e)},r.encoder=n(55),r.decoder=n(60),r.verifier=n(61),r.converter=n(62),r.ReflectionObject=n(9),r.Namespace=n(11),r.Root=n(64),r.Enum=n(6),r.Type=n(56),r.Field=n(10),r.OneOf=n(28),r.MapField=n(57),r.Service=n(58),r.Method=n(59),r.Message=n(29),r.wrappers=n(63),r.types=n(12),r.util=n(1),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},function(e,t,n){var r=t;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(26),r.BufferWriter=n(125),r.Reader=n(27),r.BufferReader=n(126),r.util=n(5),r.rpc=n(53),r.roots=n(54),r.configure=o,o()},function(e,t,n){t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),o=new Array(123),i=0;i<64;)o[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;t.encode=function(e,t,n){for(var o,i=null,s=[],a=0,u=0;t<n;){var c=e[t++];switch(u){case 0:s[a++]=r[c>>2],o=(3&c)<<4,u=1;break;case 1:s[a++]=r[o|c>>4],o=(15&c)<<2,u=2;break;case 2:s[a++]=r[o|c>>6],s[a++]=r[63&c],u=0}8191<a&&((i=i||[]).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=r[o],s[a++]=61,1===u&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))},t.decode=function(e,t,n){for(var r,i=n,s=0,a=0;a<e.length;){var u=e.charCodeAt(a++);if(61===u&&1<s)break;if(void 0===(u=o[u]))throw Error("invalid encoding");switch(s){case 0:r=u,s=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,s=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,s=3;break;case 3:t[n++]=(3&r)<<6|u,s=0}}if(1===s)throw Error("invalid encoding");return n-i},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,n){function r(){this._listeners={}}(e.exports=r).prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t,n){function r(e){return"undefined"!=typeof Float32Array?(l=new Float32Array([-0]),y=128===(h=new Uint8Array(l.buffer))[3],e.writeFloatLE=y?v:_,e.writeFloatBE=y?_:v,e.readFloatLE=y?b:E,e.readFloatBE=y?E:b):(e.writeFloatLE=g.bind(null,o),e.writeFloatBE=g.bind(null,i),e.readFloatLE=m.bind(null,s),e.readFloatBE=m.bind(null,a)),"undefined"!=typeof Float64Array?(p=new Float64Array([-0]),y=128===(d=new Uint8Array(p.buffer))[7],e.writeDoubleLE=y?r:u,e.writeDoubleBE=y?u:r,e.readDoubleLE=y?c:f,e.readDoubleBE=y?f:c):(e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)),e;function t(e,t,n,r,o,i){var s,a,u=r<0?1:0;0===(r=u?-r:r)?(e(0,o,i+t),e(0<1/r?0:2147483648,o,i+n)):isNaN(r)?(e(0,o,i+t),e(2146959360,o,i+n)):17976931348623157e292<r?(e(0,o,i+t),e((u<<31|2146435072)>>>0,o,i+n)):r<22250738585072014e-324?(e((s=r/5e-324)>>>0,o,i+t),e((u<<31|s/4294967296)>>>0,o,i+n)):(1024===(a=Math.floor(Math.log(r)/Math.LN2))&&(a=1023),e(4503599627370496*(s=r*Math.pow(2,-a))>>>0,o,i+t),e((u<<31|a+1023<<20|1048576*s&1048575)>>>0,o,i+n))}function n(e,t,n,r,o){return t=e(r,o+t),r=2*((e=e(r,o+n))>>31)+1,n=4294967296*(1048575&e)+t,2047==(o=e>>>20&2047)?n?NaN:1/0*r:0==o?5e-324*r*n:r*Math.pow(2,o-1075)*(n+4503599627370496)}function r(e,t,n){p[0]=e,t[n]=d[0],t[n+1]=d[1],t[n+2]=d[2],t[n+3]=d[3],t[n+4]=d[4],t[n+5]=d[5],t[n+6]=d[6],t[n+7]=d[7]}function u(e,t,n){p[0]=e,t[n]=d[7],t[n+1]=d[6],t[n+2]=d[5],t[n+3]=d[4],t[n+4]=d[3],t[n+5]=d[2],t[n+6]=d[1],t[n+7]=d[0]}function c(e,t){return d[0]=e[t],d[1]=e[t+1],d[2]=e[t+2],d[3]=e[t+3],d[4]=e[t+4],d[5]=e[t+5],d[6]=e[t+6],d[7]=e[t+7],p[0]}function f(e,t){return d[7]=e[t],d[6]=e[t+1],d[5]=e[t+2],d[4]=e[t+3],d[3]=e[t+4],d[2]=e[t+5],d[1]=e[t+6],d[0]=e[t+7],p[0]}var p,d,l,h,y;function g(e,t,n,r){var o=t<0?1:0;0===(t=o?-t:t)?e(0<1/t?0:2147483648,n,r):isNaN(t)?e(2143289344,n,r):e(34028234663852886e22<t?(o<<31|2139095040)>>>0:t<11754943508222875e-54?(o<<31|Math.round(t/1401298464324817e-60))>>>0:(o<<31|(e=Math.floor(Math.log(t)/Math.LN2))+127<<23|8388607&Math.round(t*Math.pow(2,-e)*8388608))>>>0,n,r)}function m(e,t,n){return t=2*((e=e(t,n))>>31)+1,n=e>>>23&255,e&=8388607,255==n?e?NaN:1/0*t:0==n?1401298464324817e-60*t*e:t*Math.pow(2,n-150)*(8388608+e)}function v(e,t,n){l[0]=e,t[n]=h[0],t[n+1]=h[1],t[n+2]=h[2],t[n+3]=h[3]}function _(e,t,n){l[0]=e,t[n]=h[3],t[n+1]=h[2],t[n+2]=h[1],t[n+3]=h[0]}function b(e,t){return h[0]=e[t],h[1]=e[t+1],h[2]=e[t+2],h[3]=e[t+3],l[0]}function E(e,t){return h[3]=e[t],h[2]=e[t+1],h[1]=e[t+2],h[0]=e[t+3],l[0]}}function o(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function i(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},function(e,t,n){t.length=function(e){for(var t,n=0,r=0;r<e.length;++r)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},t.read=function(e,t,n){if(n-t<1)return"";for(var r,o=null,i=[],s=0;t<n;)(r=e[t++])<128?i[s++]=r:191<r&&r<224?i[s++]=(31&r)<<6|63&e[t++]:239<r&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(r>>10),i[s++]=56320+(1023&r)):i[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<s&&((o=o||[]).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},t.write=function(e,t,n){for(var r,o,i=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(o=e.charCodeAt(s+1)))?(++s,t[n++]=(r=65536+((1023&r)<<10)+(1023&o))>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128);return n-i}},function(e,t,n){e.exports=function(e,t,n){var r=n||8192,o=r>>>1,i=null,s=r;return function(n){return n<1||o<n?e(n):(r<s+n&&(i=e(r),s=0),n=t.call(i,s,s+=n),7&s&&(s=1+(7|s)),n)}}},function(e,t,n){e.exports=o;var r=n(5);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0),s=(i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1},o.zeroHash="\0\0\0\0\0\0\0\0",o.fromNumber=function(e){if(0===e)return i;var t=e<0,n=(e=t?-e:e)>>>0;e=(e-n)/4294967296>>>0;return t&&(e=~e>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++e&&(e=0))),new o(n,e)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(r.isString(e)){if(!r.Long)return o.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){var t;return!e&&this.hi>>>31?(e=1+~this.lo>>>0,t=~this.hi>>>0,-(e+4294967296*(t=e?t:t+1>>>0))):this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}},String.prototype.charCodeAt);o.fromHash=function(e){return"\0\0\0\0\0\0\0\0"===e?i:new o((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0==n?0==t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){e.exports=i;var r=n(26),o=((i.prototype=Object.create(r.prototype)).constructor=i,n(5));function i(){r.call(this)}function s(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},i.prototype.bytes=function(e){var t=(e=o.isString(e)?o._Buffer_from(e,"base64"):e).length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},function(e,t,n){e.exports=i;var r=n(27),o=((i.prototype=Object.create(r.prototype)).constructor=i,n(5));function i(e){r.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},function(e,t,n){e.exports=o;var r=n(5);function o(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}((o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o).prototype.rpcCall=function e(t,n,o,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,o,i);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof o))try{n=o[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){(e.exports=function e(t,n){"string"==typeof t&&(n=t,t=void 0);var r=[];function o(t){if("string"!=typeof t){var n=i();if(e.verbose,n="return "+n,t){for(var s=Object.keys(t),a=new Array(s.length+1),u=new Array(s.length),c=0;c<s.length;)a[c]=s[c],u[c]=t[s[c++]];return a[c]=n,Function.apply(null,a).apply(null,u)}return Function(n)()}for(var f=new Array(arguments.length-1),p=0;p<f.length;)f[p]=arguments[++p];if(p=0,t=t.replace(/%([%dfijs])/g,(function(e,t){var n=f[p++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),p!==f.length)throw Error("parameter count mismatch");return r.push(t),o}function i(e){return"function "+(e||n||"")+"("+(t&&t.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return o.toString=i,o}).verbose=!1},function(e,t,n){e.exports=i;var r=n(51),o=n(52)("fs");function i(e,t,n){return t="function"==typeof t?(n=t,{}):t||{},n?!t.xhr&&o&&o.readFile?o.readFile(e,(function(r,o){return r&&"undefined"!=typeof XMLHttpRequest?i.xhr(e,t,n):r?n(r):n(null,t.binary?o:o.toString("utf8"))})):i.xhr(e,t,n):r(i,this,e,t)}i.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){if(!(e=r.response))for(var e=[],o=0;o<r.responseText.length;++o)e.push(255&r.responseText.charCodeAt(o));return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)}},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}},function(e,t,n){var r=t.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},o=t.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=r(e);e="";n&&(e=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?0<o&&".."!==t[o-1]?t.splice(--o,2):n?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return e+t.join("/")};t.resolve=function(e,t,n){return n||(t=o(t)),r(t)?t:(e=(e=n?e:o(e)).replace(/(?:\/|^)[^/]+$/,"")).length?o(e+"/"+t):t}},function(e,t,n){function r(){}function o(e){var t,n=e.low,r=e.high,i=e.unsigned;if(void 0!==n&&void 0!==r)return new D.a(n,r,i);if("boolean"===(n=_typeof(e))||"string"===n||"number"===n)return e;if(Array.isArray(e))return t=[],e.forEach((function(e){t.push(o(e))})),t;var s={};return Object.keys(e).forEach((function(t){s[t]=o(e[t])})),s}function i(){if("string"==typeof(n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0))return+n;if("number"==typeof n)return n;var e=n.low,t=n.high,n=n.unsigned;return void 0!==e&&"undefined"!==t?new D.a(e,t,void 0===n||n).toNumber():void 0}function s(e){if("string"==typeof e)return D.a.fromString(e);var t=e.low,n=e.high,r=e.unsigned;return void 0!==t&&"undefined"!==n?new D.a(t,n,void 0===r||r):"number"==typeof e?D.a.fromNumber(e):new D.a}function a(e){return void 0===e?"":"string"==typeof e?e:"number"==typeof e?e+"":(void 0!==e.low&&void 0!==e.high?new D.a(e.low,e.high,!0):new D.a(e)).toString()}function u(e){if(!e.payload)return e;var t=e.payload,n=void 0===(n=e.from)?{}:n,r=void 0===(r=e.to)?{}:r,o=void 0===(o=e.id)?{}:o,i=e.status,s=e.timestamp,u=void 0===(u=t.content)?"":u,c=void 0===(c=t.attachment)?"":c,f=void 0===(f=t.ctype)?0:f,p=t.ext,d=t.config,l=t.type,h=null,y=null;try{h=JSON.parse(c)}catch(e){}try{y=JSON.parse(d)}catch(e){}return c=i||t.status,d={id:a(o),from:a(n.uid),to:a(r.uid),content:u,type:Object.keys(Y)[f].toLowerCase(),ext:p,status:c||$.UNREAD,timestamp:a(s||0),toType:2==l?"roster":"group"},h&&(d.attach=h),y&&(d.config=y),d}function c(){var e=window.localStorage.getItem("key_user_id");if(e)return+e}function f(e){return e%31}function p(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(void 0!==e){var r=e;if(t=(t&&(r=c()+"_"+e),0<n&&(r=r+"_"+f(n)),window.localStorage.getItem(r))){n=t;try{n=JSON.parse(t)}catch(e){}return(n=o(n)).data||n}}else x.error("localstorage get error:",e)}function d(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:-1,r=e;t&&(r=c()+"_"+e),0<=n&&(r=r+"_"+f(n)),window.localStorage.removeItem(r)}function l(e){for(var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=0;n<31;n++)d(e,t,n)}function h(){var e=p("key_user_id",!1);if(e)return+e}function y(){d("key_user_id")}function g(){d("key_user_token")}function m(){d("key_user_aes_key")}function v(){d("key_user_device_sn")}function _(e){return void 0===re[e]&&(re[e]=[]),re[e]}function b(e,t){var n=_(e).findIndex((function(e){return e.toString()===t.toString()}));-1<n&&_(e).splice(n,1),_(e).push(t)}function E(e,t){var n=_(e).findIndex((function(e){return e.toString()===t.toString()}));0<=n&&re[e].splice(n,1)}function w(e){var t;if(e=e.payload)return t=e.type,(e=void 0===(e=e.operation)?{}:e)&&t===G.OPER?(t=e.type)===q.READ_ACK||t==q.READ_ALL:void 0}function A(e,t){var n=s(t.id);if(0===e.length)e.push(t);else{var r=e[0],o=e[e.length-1];if(-1===n.comp(s(r.id)))e.unshift(t);else if(1===n.comp(s(o.id)))e.push(t);else{for(var i=0,a=0;i<e.length;){var u=e[i];if(0===(u=n.comp(s(u.id)))&&(a=1),1!==u)break;i++}e.splice(i,a,t)}}return e}function C(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"get",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],o=4<arguments.length&&void 0!==arguments[4]&&arguments[4],i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{};return(r=function(e,t){var n=0<arguments.length&&void 0!==e?e:{},r=[];return(1<arguments.length&&void 0!==t?t:[]).forEach((function(e){var t;"string"==typeof e&&void 0===n[e]&&r.push(e+" can not be null.."),Array.isArray(e)&&(t=!1,e.forEach((function(e){void 0!==n[e]&&(t=!0)})),t||r.push(e.join("")+" can not be all null"))})),r}(n,r)).length?(r=r.join(","),Promise.reject(new Error(r))):(r={},"get"===(t=t.toLowerCase())||"post"===t&&o?(0<e.indexOf("?")?e+="&":e+="?",e+=le.a.stringify(n)):((o=n).group_id&&(o.group_id=+o.group_id),o.user_id&&(o.user_id=+o.user_id),o.new_owner&&(o.new_owner=+o.new_owner),o.apply_approval&&(o.apply_approval=+o.apply_approval),o.duration&&(o.duration=+o.duration),o.limit&&(o.limit=+o.limit),o.version&&(o.version=+o.version),o.announcement_id&&(o.announcement_id=+o.announcement_id),o.user_list&&Array.isArray(o.user_list)&&(o.user_list=o.user_list.map((function(e){return+e}))),o.user_list&&Array.isArray(o.user_list)&&(o.user_list=o.user_list.map((function(e){return+e}))),o.file_list&&Array.isArray(o.file_list)&&(o.file_list=o.file_list.map((function(e){return+e}))),r=o),I.a[t](e,r,i).then((function(t){if(he.errTimer&&clearTimeout(he.errTimer),he.errTimer=null,he.errCount=0,t=void 0===(t=t.data)?{}:t,0!==Object.keys(i).length)return"boolean"==typeof t.data&&t.data||"string"==typeof t.Status&&"OK"===t.Status?void 0:Promise.reject({config:i,url:e});var n=t.data,r=t.code;t=t.message;return 200===r?n:(402===r&&oe("flooNotice",{category:"action",desc:"relogin"}),Promise.reject({url:e,code:r,message:t}))})).catch((function(e){return he.errTimer&&clearTimeout(he.errTimer),he.errTimer=null,he.errCount=he.errCount+1,5<=he.errCount?(he.errCount=0,oe("ratelError")):he.errTimer=setTimeout((function(){he.errCount=0}),18e5),Promise.reject(e)})))}function N(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.uid=e.uid||0,e=void 0===e.deviceSN?ne.getDeviceSN():e.deviceSN;this.deviceSN=e}n.r(t),n.d(t,"flooim",(function(){return po}));var k={},O=(n.r(k),n.d(k,"STATIC_FRAME_VSN",(function(){return U})),n.d(k,"STATIC_FRAME_COMMAND",(function(){return M})),n.d(k,"STATIC_FRAME_COMPRESS_METHOD",(function(){return B})),n.d(k,"STATIC_FRAME_ERROR_STATUS",(function(){return P})),n.d(k,"STATIC_FRAME_OSTYPE",(function(){return L})),n.d(k,"STATIC_FRAME_ENCRYPTMETHOD",(function(){return F})),n.d(k,"STATIC_META_NAMESPACE",(function(){return j})),n.d(k,"STATIC_MESSAGE_OPTYPE",(function(){return q})),n.d(k,"STATIC_MESSAGE_TYPE",(function(){return G})),n.d(k,"STATIC_MESSAGE_CONTENT_TYPE",(function(){return Y})),n.d(k,"STATIC_MESSAGE_QOS",(function(){return J})),n.d(k,"STATIC_GROUPNOTICE_TYPE",(function(){return V})),n.d(k,"STATIC_INFO_NETWORK",(function(){return K})),n.d(k,"STATIC_USERNOTICE_TYPE",(function(){return W})),n.d(k,"STATIC_ROSTERNONTICE_TYPE",(function(){return H})),n.d(k,"STATIC_CONVERSATION_TYPE",(function(){return X})),n.d(k,"STATIC_CONVERSATION_OPTYPE",(function(){return z})),n.d(k,"STATIC_MESSAGE_STATUS",(function(){return $})),{}),S=(n.r(O),n.d(O,"getServers",(function(){return ge})),n.d(O,"tokenUser",(function(){return me})),n.d(O,"tokenId",(function(){return ve})),n.d(O,"userRegister",(function(){return _e})),n.d(O,"userBindMobile",(function(){return be})),n.d(O,"userSendSms",(function(){return we})),n.d(O,"userNameCheck",(function(){return Ae})),n.d(O,"userMobileBind",(function(){return Ce})),n.d(O,"userMobileBindSign",(function(){return Ne})),n.d(O,"userMobileLogin",(function(){return ke})),n.d(O,"userUpdateMobile",(function(){return Ee})),n.d(O,"captchaImagePost",(function(){return Oe})),n.d(O,"captchaSms",(function(){return Se})),n.d(O,"rosterAccept",(function(){return Re})),n.d(O,"rosterApply",(function(){return Te})),n.d(O,"rosterDecline",(function(){return Ie})),n.d(O,"rosterDelete",(function(){return xe})),n.d(O,"rosterExt",(function(){return De})),n.d(O,"rosterId",(function(){return Ue})),n.d(O,"rosterList",(function(){return Me})),n.d(O,"rosterListPost",(function(){return Be})),n.d(O,"rosterName",(function(){return Pe})),n.d(O,"rosterApplylist",(function(){return Le})),n.d(O,"rosterBlockedlist",(function(){return Fe})),n.d(O,"rosterBlockedAdd",(function(){return je})),n.d(O,"rosterBlockeRemove",(function(){return Ge})),n.d(O,"groupAdminAdd",(function(){return qe})),n.d(O,"groupAdminList",(function(){return Ye})),n.d(O,"groupAdminRemove",(function(){return Je})),n.d(O,"groupAnnouncement",(function(){return Ve})),n.d(O,"groupAnnouncementDelete",(function(){return Ke})),n.d(O,"groupAnnouncementEdit",(function(){return He})),n.d(O,"groupAnnouncementList",(function(){return We})),n.d(O,"groupCreate",(function(){return Xe})),n.d(O,"groupDestroy",(function(){return ze})),n.d(O,"groupInfo",(function(){return $e})),n.d(O,"groupInfoAvatar",(function(){return Ze})),n.d(O,"groupInfoDdscription",(function(){return Qe})),n.d(O,"groupInfoExt",(function(){return et})),n.d(O,"groupInfoName",(function(){return tt})),n.d(O,"groupMemberlist",(function(){return nt})),n.d(O,"groupMsgMutemode",(function(){return rt})),n.d(O,"groupMsgNotdisturb",(function(){return ot})),n.d(O,"groupPubliclist",(function(){return it})),n.d(O,"groupBannedList",(function(){return st})),n.d(O,"groupBab",(function(){return at})),n.d(O,"groupUnban",(function(){return ut})),n.d(O,"groupSettings",(function(){return ct})),n.d(O,"groupSettingsAllowmemberinvitation",(function(){return ft})),n.d(O,"groupSettingsAllowmembermodify",(function(){return pt})),n.d(O,"groupSettingsEnablereadack",(function(){return dt})),n.d(O,"groupSettingsHistoryvisible",(function(){return lt})),n.d(O,"groupSettingsRequireadminapproval",(function(){return ht})),n.d(O,"groupSettingsBanAll",(function(){return yt})),n.d(O,"groupSettingsUnBanAll",(function(){return gt})),n.d(O,"groupTransfer",(function(){return mt})),n.d(O,"groupUserjoined",(function(){return vt})),n.d(O,"groupApply",(function(){return _t})),n.d(O,"groupApplicationlist",(function(){return It})),n.d(O,"groupInvitationlist",(function(){return xt})),n.d(O,"groupApplyHandle",(function(){return bt})),n.d(O,"groupBockedlist",(function(){return Et})),n.d(O,"groupBlock",(function(){return wt})),n.d(O,"groupUnblock",(function(){return At})),n.d(O,"groupKick",(function(){return Ct})),n.d(O,"groupInvite",(function(){return Nt})),n.d(O,"groupInviteHandle",(function(){return kt})),n.d(O,"groupInfoBatch",(function(){return Ot})),n.d(O,"groupMembersDidpayname",(function(){return St})),n.d(O,"groupLeave",(function(){return Rt})),n.d(O,"groupDisplayname",(function(){return Tt})),n.d(O,"groupFilelist",(function(){return Dt})),n.d(O,"groupFiledelete",(function(){return Ut})),n.d(O,"groupFileupload",(function(){return Mt})),n.d(O,"userAuthmode",(function(){return Bt})),n.d(O,"userAvatar",(function(){return Pt})),n.d(O,"userMobile",(function(){return Lt})),n.d(O,"userNickname",(function(){return Ft})),n.d(O,"userProfile",(function(){return jt})),n.d(O,"userProfilePost",(function(){return Gt})),n.d(O,"userPush",(function(){return qt})),n.d(O,"userPushDetail",(function(){return Yt})),n.d(O,"userPushLimit",(function(){return Jt})),n.d(O,"userPushNickname",(function(){return Vt})),n.d(O,"userSettings",(function(){return Kt})),n.d(O,"userSettingsPost",(function(){return Ht})),n.d(O,"userSounds",(function(){return Wt})),n.d(O,"userVibratory",(function(){return Xt})),n.d(O,"bindDeviceToken",(function(){return zt})),n.d(O,"unbindDeviceToken",(function(){return $t})),n.d(O,"fileForward",(function(){return Zt})),n.d(O,"asyncFileUpload",(function(){return Qt})),n.d(O,"fileUploadAvatarUrl",(function(){return en})),n.d(O,"fileUploadGroupAvatarUrl",(function(){return tn})),n.d(O,"fileUploadChatFileUrl",(function(){return nn})),n.d(O,"fileDownloadChatFileUrl",(function(){return rn})),n.d(O,"qrcode",(function(){return on})),n.d(O,"qrlogin",(function(){return sn})),n.d(O,"qrcodeGroupsign",(function(){return an})),n.d(O,"qrcodeGroupinvite",(function(){return un})),n.d(O,"wxbind",(function(){return cn})),n.d(O,"wxlogin",(function(){return fn})),n.d(O,"getStaticContact",(function(){return pn})),n.d(O,"wechatUnbind",(function(){return dn})),n.d(O,"wechatIsbind",(function(){return ln})),n.d(O,"wechatBind",(function(){return hn})),{}),R=(S=(n.r(S),n.d(S,"decode",(function(){return ar})),n.d(S,"encode",(function(){return ur})),{}),S=(n.r(S),n.d(S,"decode",(function(){return br})),n.d(S,"encode",(function(){return Er})),{}),n.r(S),n.d(S,"decode",(function(){return kr})),n.d(S,"encode",(function(){return Or})),n(65)),T=n.n(R),I=(R=n(13),n.n(R)),x={error:r,log:r,info:r,warn:r,dir:r,req:r},D=(R=n(4),n.n(R)),U={XSYNC_V1:0,XSYNC_V2:1},M={UNREAD:0,SYNC:1,NOTICE:2,PROVISION:3},B={NONE:0,ZLIB:1},P={UNKNOWN:0,OK:1,FAIL:2,UNKNOWN_COMMAND:3,PB_PARSER_ERROR:4,DECRYPT_FAILURE:5,PUBLIC_KEY_CHANGED:6,INVALID_TOKEN:7,INVALID_PARAMETER:8,UNAUTHORIZED:9,USER_FROZEN:10,USER_BANNED:11,WORD_CENSORED:12,TOO_MANY_DEVICES:13,ENCRYPT_METHOD_UNSUPPORTED:14,DEVICE_GUID_CONFLICT:15,CHECK_SUM_FAILURE:16,INVALID_LICENSE:17,LICENSE_LIMIT:18,APP_FROZEN:19},L={UNKNOWN:0,IOS:1,ANDR:2,WIN:3,OSX:4,LINUX:5,WEB:6},F={ENCRYPT_NONE:0,AES_CBC_128:1,AES_CBC_256:2,CUSTOM:3},j={UNKNOWN:0,MESSAGE:1,GROUP_NOTICE:2,ROSTER_NOTICE:3,USER_NOTICE:4,INFO:5,CONVERSATION:6},G={NORMAL:0,OPER:1,CHAT:2,GROUPCHAT:3},q={UNKNOWN:0,READ_ACK:1,READ_ALL:2,READ_CANCEL:3,DELIVER_ACK:4,RECALL:5,DELETE:6},Y={TEXT:0,IMAGE:1,AUDIO:2,VIDEO:3,FILE:4,LOCATION:5,COMMAND:6,FORWARD:7},J={AT_LEAST_ONCE:0,AT_MOST_ONCE:1,EXACTLY_ONCE:2},V={UNKNOWN:0,PRESENCE:1,ABSENCE:2,CREATED:3,DESTROYED:4,JOINED:5,LEAVED:6,APPLYED:7,APPLY_ACCEPTED:8,APPLY_DECLINED:9,INVITED:10,INVITE_ACCEPTED:11,INVITE_DECLINED:12,KICKED:13,BLOCKED:14,UNBLOCKED:15,OWNER_ASSIGNED:16,ADMIN_GRANTED:17,ADMIN_REVOKED:18,MUTED:19,UNMUTED:20,BANNED:21,UNBANNED:22,INFO_UPDATED:23,ANNOUNCEMENT_UPDATED:24,MESSAGE_SETTING:25,FILE_UPLOADED:26,FILE_DELETED:27,FILE_UPDATED:28},K={WIRE:0,WIFI:1,NET_2G:2,NET_3G:3,NET_4G:4,NET_5G:5,UNKNOWN:6},H={UNKNOWN:0,ADDED:1,REMOVED:2,ACCEPTED:3,DECLINED:4,BLOCKED:5,UNBLOCKED:6,APPLIED:7,INFO_UPDATED:8,MUTED:9,UNMUTED:10},W={UNKNOWN:0,PASSWORD_CHANGED:1,FROZEN:2,REMOVED:3,KICK_BY_SAME_DEVICE:4,KICKED_BY_OTHER_DEVICE:5,INFO_UPDATED:6,DEVICE_LOGIN:7,DEVICE_LOGOUT:8,DEVICE_ADDED:9,DEVICE_REMOVED:10,CLUSTER_CHANGED:11},X={UNKNOWN:0,OPER:1},z={UNKNOWN:0,DELETE:1,DELETE_EVERYWHERE:2},$={UNREAD:0,DELIVERED:1,READ:2},Z=function e(t){if(t instanceof D.a)return t.toString();var n,r=t.low,o=t.high,i=t.unsigned;if(void 0!==r&&void 0!==o)return new D.a(r,o,void 0===i||i).toString();if("boolean"===(r=_typeof(t))||"string"===r||"number"===r)return t;if(Array.isArray(t))return n=[],t.forEach((function(t){void 0!==t&&n.push(e(t))})),n;var s={};return Object.keys(t).forEach((function(n){void 0!==t[n]&&(s[n]=e(t[n]))})),s},Q=function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;if(void 0!==t&&void 0!==e){var o=e;if(n&&(o=c()+"_"+e),0<r&&(o=o+"_"+f(r)),"string"!=typeof t){n=Array.isArray(t)?{data:t}:t;try{var i=JSON.stringify(n);i&&window.localStorage.setItem(o,i)}catch(e){}}else window.localStorage.setItem(o,t)}else x.error("localstorage save error:",e,t)},ee={saveJoinedGroups:function(e){var t;e&&(e=(e=Array.isArray(e)?e:[e]).map((function(e){return e.group_id||e})),t=p("key_group_lists")||[],e=Array.from(new Set(e.concat(t))),Q("key_group_lists",e))},removeGroup:function(e){var t=p("key_group_lists")||[],n=t.findIndex((function(t){return t===e}));0<=n&&(t.splice(n,1),Q("key_group_lists",t))},getJoinedGroups:function(){return p("key_group_lists")},saveGroupInfo:function(e){Array.isArray(e)||(e=[e]);var t=p("key_group_infos")||{};e.forEach((function(e){var n={},r=e.group_id;Object.keys(e).forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),t[r]=t[r]||{},Object.assign(t[r],n)})),Q("key_group_infos",t)},getGroupInfo:function(e){var t=p("key_group_infos")[e]||{};return Object.assign(t,{group_id:e})},getGroupInfoList:function(){var e=ee.getJoinedGroups()||[],t=ee.getAllGroupInfos()||{},n=[];return e.forEach((function(e){var r=t[e]||{};n.push(Object.assign({},r,{group_id:e}))})),n},getAllGroupInfos:function(){return p("key_group_infos")||{}},saveGroupMembers:function(e,t,n){Array.isArray(t)||(t=[t]);var r=p("key_group_members")||{},o=r[e]||[];if(n)return r[e]=t,void Q("key_group_members",r);t.forEach((function(e){o.findIndex((function(t){return t===e}))<0&&o.push(e)})),r[e]=o},removeGroupMembers:function(e,t){var n=(p("key_group_members")||{})[e]||[];t.forEach((function(e){var t=n.findIndex((function(t){return t===e}));0<=t&&n.splice(t,1)})),Q("key_group_members",n)},getGroupMembers:function(e){return(p("key_group_members")||{})[e]||[]},clear:function(){d("key_group_infos"),d("key_group_members"),d("key_group_lists")}},te=ee,ne={saveToken:function(e){return Q("key_user_token",e)},getToken:function(){return p("key_user_token")},deleteToken:g,getAesKey:function(){return p("key_user_aes_key")},saveAesKey:function(e){return Q("key_user_aes_key",e)},deleteAesKey:m,saveDeviceSN:function(e){return Q("key_user_device_sn",e)},getDeviceSN:function(){return+(p("key_user_device_sn")||999999999+Math.floor(214e4*Math.random())+"")},deleteDeviceSN:v,saveUid:function(e){if(!e)throw new Error("uid is error ...");Q("key_user_id",e+"",!1)},getUid:h,removeUid:y,getDeviceGuid:function(){if(!h())return"";var e=p("key_user_device_guid");return e||(e=h()+"_"+Math.floor(2147483648*Math.random()),Q("key_user_device_guid",e)),e},saveProfile:function(e){return Q("key_user_profile",e)},getProfile:function(){return p("key_user_profile")},clear:function(){v(),m(),g(),y()},saveAppid:function(e){if(!e)throw new Error("Invalid appid ...");Q("key_app_id",e+"",!1)},getAppid:function(){return p("key_app_id",!1)}},re={},oe=function(e,t){_(e).forEach((function(e){e(t)}))},ie={saveRecent:function(e){var t,n,r,o,s,a,u,c,f;!function(){var t=e.ext,n={};try{n=JSON.parse(t)}catch(t){}return void 0!==n.input_status&&(n.input_status,1)}()&&(t=e.from,n=e.to,c=e.type,r=e.toType,f=e.attach,o=e.ext,s=e.timestamp,(a=e.content)||f?("text"!=c&&(a=c),u=i(n),f=ne.getUid(),u===f&&(u=i(t)),-1<(f=(c=p("key_recent_store")||[]).findIndex((function(e){return e.type===r&&e.id===u})))&&c.splice(f,1),c.unshift({type:r,id:u,content:a,ext:o,timestamp:s}),Q("key_recent_store",c),oe("recentlistUpdate")):o&&o.typing&&oe("onInputStatusMessage",{from:t,to:n,ext:o}))},saveUnreadRecent:function(e,t){e.forEach((function(e){var n=t,r=p("key_recent_store")||[],o="",i="",s=r.findIndex((function(t){return t.type===n&&t.id===e}));-1<s&&(o=r[s].content,i=r[s].timestamp,r.splice(s,1)),r.unshift({type:n,id:e,content:o,timestamp:i}),Q("key_recent_store",r)})),oe("recentlistUpdate")},getRecents:function(){var e=p("key_recent_store")||[],t=e.filter((function(e){return"roster"==e.type})).map((function(e){return e.id}));return oe("imGetRecent",t),e},getRecentById:function(e){var t=p("key_recent_store")||[],n=t.findIndex((function(t){return t.id+""==e+""}));return n<0?{idx:n}:(t=t[n].type,{idx:n,id:e,type:t})},deleteRecentById:function(e){var t;(e=ie.getRecentById(e).idx)<0||((t=p("key_recent_store")||[]).splice(e,1),Q("key_recent_store",t))},clear:function(){d("key_recent_store")}},se=ie,ae={saveSendingRosterMessage:function(e){var t=(100<(t=((n=p("key_roster_sending_message")||[]).push(e),n.length))&&n.splice(0,t-100),Q("key_roster_sending_message",n),e.to),n=e.id;oe("onSendingMessageStatusChanged",{status:"sending",uid:t.uid,mid:n})},dealSendedRosterMessage:function(e){var t,n=e.client_mid,r=e.server_mid,o=p("key_roster_sending_message")||[];if(!r)return x.log("failed to send message due to: ",e.status.reason),void(-1<(e=o.findIndex((function(e){return i(e.id)===i(n)})))&&(p("key_roster_sending_message")||[]).splice(e,1));-1<(e=o.findIndex((function(e){return i(e.id)===i(n)})))&&((t=o[e]).id=r,(r=u(t)).status=$.UNREAD,ae.saveRosterMessage(r),r.toType="roster",se.saveRecent(r),o.splice(e,1),Q("key_roster_sending_message",o),oe("onRosterMessage",r),w(r)||oe("onSendingMessageStatusChanged",{status:"sent",mid:i(n)}))},saveRosterMessage:function(e){var t=e.from,n=e.to,r=e.type;"command"!=r&&"forward"!=r&&(r=i(t),t=i(ne.getUid()),n=i(n),A(r=(n=p("key_roster_message_store",!0,t=r===t?n:r)||{})[t]||[],e),100<r.length?n[t]=r.slice(r.length-100):n[t]=r,Q("key_roster_message_store",n,!0,t))},getRosterMessage:function(e){return(p("key_roster_message_store",!0,e)||{})[e]||[]},saveFormatedRosterMessage:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=p("key_roster_message_store",!0,e)||{};n[e]=t,Q("key_roster_message_store",n,!0,e)},getRosterUnreadMessageIdsByRosterid:function(e){e=(p("key_roster_message_store",!0,e)||{})[e]||[];var t=[];return e.forEach((function(e){var n=void 0===(n=e.status)?$.READ:n;e=e.id;n==$.UNREAD&&t.push(e)})),t},deleteRosterMessageByRosterId:function(e){var t=p("key_roster_message_store",!0,e)||{};t[e]&&delete t[e],Q("key_roster_message_store",t,!0,e)},deleteSingleRosterMessage:function(e,t){var n=p("key_roster_message_store",!0,e)||{},r=a(t),o=(t=n[e]||[]).findIndex((function(e){return a(e.id)===r}));-1<o&&(t.splice(o,1),n[e]=t,Q("key_roster_message_store",n,!0,e))},saveSendingGroupMessage:function(e){var t=(100<(t=((n=p("key_group_sending_message")||[]).push(e),n.length))&&n.splice(0,t-100),Q("key_group_sending_message",n),e.to),n=e.id;oe("onSendingMessageStatusChanged",{status:"sending",uid:t.uid,mid:n})},dealSendedGroupMessage:function(e){var t,n=e.client_mid,r=(e=e.server_mid,p("key_group_sending_message")||[]),o=r.findIndex((function(e){return i(e.id)===i(n)}));-1<o&&((t=r[o]).id=e,(e=u(t)).status=$.UNREAD,ae.saveGroupMessage(e),e.toType="group",se.saveRecent(e),r.splice(o,1),Q("key_group_sending_message",r),oe("onGroupMessage",e),w(e)||oe("onSendingMessageStatusChanged",{status:"sent",mid:i(n)}))},saveGroupMessage:function(e){var t,n=e.to,r=e.type;"command"!=r&&"forward"!=r&&(A(t=(n=p("key_group_message_store",!0,r=i(n))||{})[r]||[],e),100<t.length?n[r]=t.slice(t.length-100):n[r]=t,Q("key_group_message_store",n,!0,r))},getGroupMessage:function(e){return(p("key_group_message_store",!0,e)||{})[e]||[]},saveFormatedGroupMessage:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=p("key_group_message_store",!0,e)||{};n[e]=t,Q("key_group_message_store",n,!0,e)},getGroupUnreadMessageIdsByGid:function(e){e=(p("key_group_message_store",!0,e)||{})[e]||[];var t=[];return e.forEach((function(e){var n=e.r;e=e.id;void 0!==n&&n||t.push(e)})),t},deleteGroupMessageByGid:function(e){var t=p("key_group_message_store",!0,e)||{};t[e]&&delete t[e],Q("key_group_message_store",t,!0,e)},deleteSingleGroupMessage:function(e,t){var n=p("key_group_message_store",!0,e)||{},r=(t=a(t),n[e]||[]),o=r.findIndex((function(e){return a(e.id)===t}));-1<o&&(r.splice(o,1),n[e]=r,Q("key_group_message_store",n,!0,e))},getUnreadByRosterId:function(e){e=ae.getRosterMessage(e)||[];var t=0,n=ne.getUid();return e.forEach((function(e){var r=e.from;e=e.status;0<(r=i(r))&&r!==n&&e!==$.READ&&t++})),t},getUnreadByGroupId:function(e){e=ae.getGroupMessage(e)||[];var t=0,n=ne.getUid();return e.forEach((function(e){var r=e.from;e=e.status;0<(r=i(r))&&r!==n&&e!==$.READ&&t++})),t},getRosterMessageById:function(e,t){var n,r=p("key_roster_message_store",!0,e)||{};for(n in r){var o=r[n];if(o&&o.length&&(o=o.find((function(e){return e.id==t})),o))return o}},getGroupMessageById:function(e,t){var n,r=p("key_group_message_store",!0,e)||{};for(n in r){var o=r[n];if(o&&o.length&&(o=o.find((function(e){return e.id==t})),o))return o}},clear:function(e,t){"group"==t?ae.deleteGroupMessageByGid(e):ae.deleteRosterMessageByRosterId(e)},clearAll:function(){l("key_roster_message_store"),l("key_group_message_store")}},ue=ae,ce=function(e){var t=p("key_notice_store")||[];50<(e=(t.push(e),t.length))&&t.splice(0,e-50),Q("key_notice_store",t)},fe=(R=function(){return p("key_notice_store")||[]},{saveRosterList:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=(e=Array.isArray(e)?e:[e]).map((function(e){return e.roster_user_id||e.user_id||e})),n=fe.getRosterList()||[];n=Array.isArray(n)?Array.from(new Set(n.concat(t))):t;Q("key_roster_lists",n),fe.saveRosterInfo(e)},getRosterList:function(){return p("key_roster_lists")},getRosterInfoList:function(){var e=fe.getRosterList()||[],t=fe.getAllRosterInfos()||{},n=[];return e.forEach((function(e){var r=t[e]||{};n.push(Object.assign({},r,{user_id:e}))})),n},removeRoster:function(e){var t=fe.getRosterList();0<=(e=t.indexOf(e))&&t.splice(e,1),Q("key_roster_lists",t)},removeRosterList:function(){return d("key_roster_lists")},saveRosterInfo:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=(Array.isArray(e)||(e=[e]),fe.getAllRosterInfos()||{});e.forEach((function(e){var n=e.user_id,r={};Object.keys(e).forEach((function(t){var n=e[t];void 0!==n&&(r[t]=n)})),n&&(t[n]=t[n]||{},Object.assign(t[n],r))})),Q("key_roster_infos",t)},getRosterInfo:function(e){var t=(p("key_roster_infos")||{})[e]||{user_id:e};return t&&Object.assign(t,{user_id:e})},getAllRosterInfos:function(){return p("key_roster_infos")},clear:function(){d("key_roster_infos"),d("key_roster_lists")}}),pe=fe,de=n(19),le=n.n(de),he={errTimer:null,errCount:0},ye=(b("refresh_ratel",(function(e){e&&(I.a.defaults.baseURL=e)})),["app_dns","app/captcha/image","app/captcha/sms","app/captcha/sms_web","app/user/info_pwd","app/wechat_login","mobile_bind_with_sign","qr_code","qr_login","token/id","token/user","user/register"]),ge=(I.a.defaults.timeout=2e4,I.a.interceptors.request.use((function(e){var t,n,r=ne.getToken(),o=ne.getAppid();if(o&&(e.headers.common.app_id=o),r&&(e.headers.common["access-token"]=r),t=e.url,n=!0,ye.forEach((function(e){-1<t.indexOf(e)&&(n=!1)})),n&&!r)throw new Error("you should login  ...");return e}),(function(e){return Promise.reject(e)})),function(e,t){return C(e,"get",t,["app_id"],!0)}),me=function(e){return C("/token/user","post",e,[["mobile","name"],"password"])},ve=function(e){return C("/token/id","post",e,["user_id","password"])},_e=function(e){return C("/user/register/v2","post",e,["username","password"])},be=function(e){return C("/app/user/mobile_bind","post",e,["captcha","mobile"])},Ee=function(e){return C("/app/user/mobile_update","post",e,["mobile"])},we=function(e){return C("/app/captcha/sms","get",e,["mobile"],!0)},Ae=function(e){return C("/app/user/name_check","get",e,["username"],!0)},Ce=function(e){return C("/app/user/mobile_bind","post",e,["captcha","mobile"])},Ne=function(e){return C("/app/user/mobile_bind_with_sign","post",e,["sign","mobile"])},ke=function(e){return C("/app/user/info_pwd","get",e,["captcha","mobile"],!0)},Oe=function(e){return C("/app/captcha/image","post",e,[])},Se=function(e){return C("/app/captcha/sms_web","get",e,["captcha","image_id","mobile"],!0)},Re=function(e){return C("/roster/accept","post",e,["user_id"],!0)},Te=function(e){return C("/roster/apply","post",e,["user_id","alias"])},Ie=function(e){return C("/roster/decline","post",e,["user_id"])},xe=function(e){return C("/roster/delete","post",e,["user_id"],!0)},De=function(e){return C("/roster/ext","post",e,["user_id","ext"])},Ue=function(e){return C("/roster/id","get",e,["user_id"])},Me=function(e){return C("/roster/list","get",e,[])},Be=function(e){return C("/roster/list","post",e,["list"])},Pe=function(e){return C("/roster/name","get",e,["username"])},Le=function(e){return C("/roster/apply/list","get",e,["cursor"],!0)},Fe=function(e){return C("/roster/blocked_list","get",e,[""],!0)},je=function(e){return C("/roster/block","post",e,["user_id"],!0)},Ge=function(e){return C("/roster/unblock","post",e,["user_id"],!0)},qe=function(e){return C("/group/admin/add","post",e,["group_id","user_list"])},Ye=function(e){return C("/group/admin_list","get",e,["group_id"],!0)},Je=function(e){return C("/group/admin/remove","post",e,["group_id","user_list"])},Ve=function(e){return C("/group/announcement","get",e,["announcement_id","group_id"])},Ke=function(e){return C("/group/announcement/delete","post",e,["announcement_id","group_id"],!0)},He=function(e){return C("/group/announcement/edit","post",e,["group_id","content","title"])},We=function(e){return C("/group/announcement/list","get",e,["group_id"],!0)},Xe=function(e){return C("/group/create","post",e,["name"])},ze=function(e){return C("/group/destroy","post",e,["group_id"],!0)},$e=function(e){return C("/group/info","get",e,["group_id"])},Ze=function(e){return C("/group/info/avatar","post",e,["group_id","value"])},Qe=function(e){return C("/group/info/description","post",e,["group_id","value"])},et=function(e){return C("/group/info/ext","post",e,["group_id","value"])},tt=function(e){return C("/group/info/name","post",e,["group_id","value"])},nt=function(e){return C("/group/member_list","get",e,["group_id"])},rt=function(e){return C("/group/msg/mute_mode","post",e,["group_id","msg_mute_mode"])},ot=function(e){return C("/group/msg/not_disturb","post",e,["group_id","value"])},it=function(){return C("/group/public_list","get",{},[])},st=function(e){return C("/group/banned_list","get",e,["group_id"])},at=function(e){return C("/group/ban","post",e,["group_id","duration","user_list"])},ut=function(e){return C("/group/unban","post",e,["group_id","user_list"])},ct=function(e){return C("/group/settings","get",e,["group_id"])},ft=function(e){return C("/group/settings/allow_member_invitation","post",e,["group_id","value"])},pt=function(e){return C("/group/settings/allow_member_modify","post",e,["group_id","value"])},dt=function(e){return C("/group/settings/enable_read_ack","post",e,["group_id","value"])},lt=function(e){return C("/group/settings/history_visible","post",e,["group_id","value"])},ht=function(e){return C("/group/settings/require_admin_approval","post",e,["group_id","apply_approval"])},yt=function(e){return C("/group/settings/ban_all","post",e,["group_id","duration"])},gt=function(e){return C("/group/settings/unban_all","post",e,["group_id"])},mt=function(e){return C("/group/transfer","post",e,["group_id","new_owner"])},vt=function(e){return C("/group/user_joined","get",e)},_t=function(e){return C("/group/apply","post",e,["group_id"])},bt=function(e){return C("/group/apply/handle","post",e,["approval","group_id","user_id"])},Et=function(e){return C("/group/blocked_list","get",e,["group_id"])},wt=function(e){return C("/group/block","post",e,["user_list","group_id"])},At=function(e){return C("/group/unblock","post",e,["user_list","group_id"])},Ct=function(e){return C("/group/kick","post",e,["user_list","group_id"])},Nt=function(e){return C("/group/invite","post",e,["user_list","group_id"])},kt=function(e){return C("/group/invite/handle","post",e,["approval","user_id","group_id"])},Ot=function(e){return C("/group/info/batch","post",e,["group_list"])},St=function(e){return C("/group/members/display_name","post",e,["group_id","user_list"])},Rt=function(e){return C("/group/leave","post",e,["group_id"],!0)},Tt=function(e){return C("/group/display_name","post",e,["group_id","value"])},It=function(e){return C("/group/application_list","post",e,["group_list"])},xt=function(){return C("/group/invitation_list","get",{},[])},Dt=function(e){return C("/group/file/list","get",e,["group_id"],!0)},Ut=function(e){return C("/group/file/delete","post",e,["file_list","group_id"])},Mt=function(e){return C("/group/file/upload","post",e,["name","size","url","group_id"])},Bt=function(e){return C("/user/authmode","post",e,["value"],!0)},Pt=function(e){return C("/user/avatar","post",e,["avatar"])},Lt=function(e){return C("/user/mobile","post",e,["mobile"],!0)},Ft=function(e){return C("/user/nickname","post",e,["nick_name"],!0)},jt=function(){return C("/user/profile","get",{},[])},Gt=function(e){return C("/user/profile","post",e,[])},qt=function(e){return C("/user/push","post",e,["value"])},Yt=function(e){return C("/user/push/detail","post",e,["value"])},Jt=function(e){return C("/user/push/limit","post",e,["no_push_end_hour","no_push_start_hour"])},Vt=function(e){return C("/user/push/nickname","post",e,["value"])},Kt=function(){return C("/user/settings","get",{},[])},Ht=function(e){return C("/user/settings","post",e,["user_id"])},Wt=function(e){return C("/user/sounds","post",e,["value"])},Xt=function(e){return C("/user/vibratory","post",e,["value"])},zt=function(e){return C("/user/token/bind","post",e,["device_sn","device_token","notifier_name"])},$t=function(e){return C("/user/token/unbind","post",e,[],!0)},Zt=function(e){return C("/file/upload/forward","get",e,["file_sign","access-token","to_id","to_type"],!0)},Qt=function(e,t,n){return C(e,"post",t,[],!1,n)},en=function(e){return C("/file/upload/avatar/user","get",e,[],!0)},tn=function(e){return C("/file/upload/avatar/group","get",e,["group_id"],!0)},nn=function(e){return C("/file/upload/chat","get",e,["file_type","to_id","to_type"],!0)},rn=function(e,t,n){return C(e,"get",t,[],!0,n)},on=function(e){return C("/app/qr_code","get",e,[])},sn=function(e){return C("/app/qr_login","get",e,["qr_code"])},an=function(e){return C("/app/qrcode/group_sign","get",e,["group_id"],!0)},un=function(e){return C("/app/qrcode/group_invite","get",e,["qr_info"],!0)},cn=function(e){return C("/user/bind_openid","get",e,["open_id"],!0)},fn=function(e){return C("/app/wechat_login","get",e,["code"],!0)},pn=function(e){return C("/app/support_staff","get",e,[],!0)},dn=function(){return C("/app/wechat/unbind","post")},ln=function(){return C("/app/wechat/is_bind","get")},hn=function(e){return C("/app/wechat/bind","post",e,["open_id","type"])},yn=(N.prototype.setUid=function(e){this.uid=e},N.prototype.setDeviceSN=function(e){this.deviceSN=e},N);function gn(e){var t=void 0===(t=e.operation)?{type:q.UNKNOWN,mid:0}:t;void 0!==(e=Object.assign({},{type:G.NORMAL,ctype:Y.TEXT,content:"",operation:t},e)).type&&(this.type=e.type),void 0!==e.from&&(this.from=e.from),void 0!==e.to&&(this.to=e.to),void 0!==e.content&&(this.content=e.content),void 0!==e.ctype&&(this.ctype=e.ctype),void 0!==e.operation&&(this.operation=e.operation),void 0!==e.config&&(this.config=e.config),void 0!==e.attachment&&(this.attachment=e.attachment),void 0!==e.ext&&(this.ext=e.ext),void 0!==e.qos&&(this.qos=e.qos),void 0!==e.sender_name&&(this.sender_name=e.sender_name),void 0!==e.is_system&&(this.is_system=e.is_system),void 0!==e.priority&&(this.priority=e.priority)}gn.prototype={setType:function(e){this.type=e},setFrom:function(e){this.from=e},setTo:function(e){this.to=e},setContent:function(e){this.content=e},setCtype:function(e){this.ctype=e},setOperation:function(e){this.operation=e},setConfig:function(e){this.config=e},setAttachment:function(e){this.attachment=e},setExt:function(e){this.ext=e},setQos:function(e){this.qos=e},setSendername:function(e){this.sender_name=e},setIssystem:function(e){this.is_system=e},setPriority:function(e){this.priority=e}};var mn=gn;function vn(e){void 0!==(e=Object.assign({},{vsn:U.XSYNC_V1,compress_method:B.NONE},e)).vsn&&(this.vsn=e.vsn),void 0!==e.compress_method&&(this.compress_method=e.compress_method),void 0!==e.command&&(this.command=e.command),void 0!==e.payload&&(this.payload=e.payload),void 0!==e.encrypt_method&&(this.encrypt_method=e.encrypt_method),void 0!==e.encrypt_key&&(this.encrypt_key=e.encrypt_key),void 0!==e.check_sum&&(this.check_sum=e.check_sum),void 0!==e.tag&&(this.tag=e.tag)}vn.prototype={setVsn:function(e){this.vsn=e},setCompressmethod:function(e){this.compress_method=e},setCommond:function(e){this.command=e},setPayload:function(e){this.payload=e},setEncryptmethod:function(e){this.encrypt_method=e},setEncryptkey:function(e){this.encrypt_key=e},setChecksum:function(e){this.check_sum=e},setTag:function(e){this.tag=e}};var _n=vn;function bn(e){void 0!==(e=Object.assign({},{encrypt_method:F.ENCRYPT_NONE,os_type:L.WEB},e)).status&&(this.status=e.status),void 0!==e.xid&&(this.xid=e.xid),void 0!==e.encrypt_method&&(this.encrypt_method=e.encrypt_method),void 0!==e.encrypt_key&&(this.encrypt_key=e.encrypt_key),void 0!==e.password&&(this.password=e.password),void 0!==e.token&&(this.token=e.token),void 0!==e.os_type&&(this.os_type=e.os_type),void 0!==e.sdk_vsn&&(this.sdk_vsn=e.sdk_vsn),void 0!==e.is_manual_login&&(this.is_manual_login=e.is_manual_login),void 0!==e.device_guid&&(this.device_guid=e.device_guid),void 0!==e.device_notifier&&(this.device_notifier=e.device_notifier),void 0!==e.device_token&&(this.device_token=e.device_token),void 0!==e.device_info&&(this.device_info=e.device_info),void 0!==e.last_login_time&&(this.last_login_time=e.last_login_time)}bn.prototype={setStatus:function(e){this.status=e},setXid:function(e){this.xid=e},setEncryptmethod:function(e){this.encrypt_method=e},setEncryptkey:function(e){this.encrypt_key=e},setPassword:function(e){this.password=e},setToken:function(e){this.token=e},setOstype:function(e){this.os_type=e},setSdkvsn:function(e){this.sdk_vsn=e},setIsmanuallogin:function(e){this.is_manual_login=e},setDeviceguid:function(e){this.device_guid=e},setDevicenotifier:function(e){this.device_notifier=e},setDevicetoken:function(e){this.device_token=e},setDeviceinfo:function(e){this.device_info=e},setLastlogintime:function(e){this.last_login_time=e}};var En=bn;function wn(e){void 0!==(e=Object.assign({},e)).xid&&(this.xid=e.xid),void 0!==e.key&&(this.key=e.key),void 0!==e.meta&&(this.meta=e.meta),void 0!==e.is_full_sync&&(this.is_full_sync=e.is_full_sync),void 0!==e.full_sync_num&&(this.full_sync_num=e.full_sync_num)}wn.prototype={setXid:function(e){this.xid=e},setKey:function(e){this.key=e},setMeta:function(e){this.meta=e},setIsfullsync:function(e){this.is_full_sync=e},setFullsyncnum:function(e){this.full_sync_num=e}};var An=wn;function Cn(e){void 0!==(e=Object.assign({},e)).id&&(this.id=e.id),void 0!==e.from&&(this.from=e.from),void 0!==e.to&&(this.to=e.to),void 0!==e.timestamp&&(this.timestamp=e.timestamp),void 0!==e.ns&&(this.ns=e.ns),void 0!==e.payload&&(this.payload=e.payload)}Cn.prototype={setId:function(e){this.id=e},setFrom:function(e){this.from=e},setTo:function(e){this.to=e},setTimestamp:function(e){this.timestamp=e},setNs:function(e){this.ns=e},setPayload:function(e){this.payload=e}};var Nn=Cn;function kn(e){void 0!==e.type&&(this.type=e.type),void 0!==e.operation&&(this.operation=e.operation)}function On(e){var t=new _n,n=(t.setCommond(M.SYNC),new An);return e.xid&&n.setXid(e.xid),e.next_key&&n.setKey(e.next_key),t.setPayload(n),t}function Sn(e){var t=e.gid,n=e.content,r=void 0===(r=e.type)?"text":r,o=e.attachment,i=e.ext,s=(e=e.priority,r=Object.keys(Y).indexOf(r.toUpperCase()),new yn({uid:+ne.getUid(),deviceSN:Xn})),a=(t=new yn({uid:t,deviceSN:0}),new _n),u=(a.setCommond(M.SYNC),new An);n=new mn({from:s,to:t,content:n,ctype:r,type:G.GROUPCHAT,ext:i}),0<e&&(n.priority=e),0<r&&o&&(n.attachment=JSON.stringify(o)),i=new Nn({id:(new Date).getTime(),from:s,to:t,payload:n,ns:j.MESSAGE,timestamp:(new Date).getTime()});return u.setMeta(i),a.setPayload(u),a}function Rn(e){var t=e.uid,n=e.content,r=void 0===(r=e.type)?"text":r,o=e.ext,i=e.attachment,s=(e=(oe("imSendRosterMessage",e),Object.keys(Y).indexOf(r.toUpperCase())),r=new yn({uid:+ne.getUid(),deviceSN:Xn}),t=new yn({uid:+t,deviceSN:0}),new _n),a=(s.setCommond(M.SYNC),new An);n=new mn({from:r,to:t,content:n,ctype:e,type:G.CHAT,ext:o}),0<e&&i&&(n.attachment=JSON.stringify(i)),o=new Nn({id:(new Date).getTime(),from:r,to:t,payload:n,ns:j.MESSAGE,timestamp:(new Date).getTime()});return a.setMeta(o),s.setPayload(a),s}function Tn(e,t){t=s(t);var n=new _n,r=(n.setCommond(M.SYNC),new yn({uid:ne.getUid(),deviceSN:Xn})),o=(e=new yn({uid:i(e),deviceSN:0}),new An);t=new mn({from:r,to:e,ctype:Y.COMMAND,type:G.OPER,operation:{type:q.READ_ACK,mid:t}}),r=new Nn({id:(new Date).getTime()+Math.floor(256*Math.random()),from:r,to:e,payload:t,ns:j.MESSAGE});return o.setMeta(r),n.setPayload(o),n}function In(e,t){t=s(t);var n=new _n,r=(n.setCommond(M.SYNC),new yn({uid:ne.getUid(),deviceSN:Xn})),o=(e=new yn({uid:i(e),deviceSN:0}),new An);t=new mn({ctype:Y.COMMAND,type:G.OPER,operation:{type:q.RECALL,mid:t,xid:e}}),r=new Nn({id:parseInt((new Date).getTime()+""+Math.floor(256*Math.random())),from:r,to:e,payload:t,ns:j.MESSAGE});return o.setMeta(r),n.setPayload(o),n}function xn(e,t){var n=new _n,r=(n.setCommond(M.SYNC),new yn({uid:ne.getUid(),deviceSN:Xn})),o=(e=new yn({uid:i(e),deviceSN:0}),new An);e=new mn({from:r,to:r,ctype:Y.COMMAND,type:G.OPER,operation:{type:q.READ_ALL,xid:e,mid:t}}),t=new Nn({id:parseInt((new Date).getTime()+""+Math.floor(256*Math.random())),from:r,to:r,payload:e,ns:j.MESSAGE});return o.setMeta(t),n.setPayload(o),n}function Dn(e,t,n){var r=n.content,o=n.attach;n=n.type;return e?Rn({uid:e,content:r,type:n,attachment:o}):Sn({gid:t,content:r,type:n,attachment:o})}function Un(e){var t=e.status,n=(t=void 0===t?{}:t).code,r=t.reason;return n===P.OK||void 0===t.code||(n!==P.INVALID_TOKEN&&n!==P.UNAUTHORIZED||oe("flooNotice",{category:"action",desc:"relogin"}),n!==P.USER_FROZEN&&n!==P.INVALID_LICENSE&&n!==P.LICENSE_LIMIT&&n!==P.APP_FROZEN||oe("flooNotice",{category:"action",desc:"relogin_manually"}),n===P.USER_BANNED?oe("flooError",{category:"USER_BANNED",desc:""}):n===P.USER_FROZEN?oe("flooError",{category:"USER_FROZEN",desc:"App"}):n===P.APP_FROZEN?oe("flooError",{category:"APP_FROZEN",desc:"APP "}):n===P.INVALID_LICENSE?oe("flooError",{category:"LICENSE",desc:" LICENSE"}):n===P.LICENSE_LIMIT?oe("flooError",{category:"LICENSE",desc:" LICENSE "}):oe("flooError",{category:n,desc:r}),(t=e.client_mid)&&oe("onSendingMessageStatusChanged",{status:"failed",mid:i(t)}),0)}function Mn(e){var t,n=e.xid,r=n.uid,o=void 0===r?0:r;$n[o+""]?setTimeout((function(){$n[o]=!1,Mn(e)}),3e3):($n[o+""]=!0,oe("sendMessage",((r=n).uid=r.uid||0,(n=new _n).setCommond(M.SYNC),(t=new An).setXid(r),n.setPayload(t),n)))}function Bn(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){var t=e.ns;t===j.UNKNOWN&&x.log("received unknown message ...",e),t===j.MESSAGE&&er(e),t===j.GROUP_NOTICE&&tr(e),t===j.ROSTER_NOTICE&&nr(e),t===j.USER_NOTICE&&rr(e),t===j.CONVERSATION&&Qn(e)}))}function Pn(e){return(new Date).getTime()-(jr[e]||0)<1e3}function Ln(e){var t=(new Date).getTime();jr[e]=t}function Fn(){var e,t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]&&arguments[1];Array.isArray(n)||(n=[n]),r?jn(n):(e=te.getAllGroupInfos()||{},t=[],n.forEach((function(n){var r=n.group_id||n;0<n&&((e[r]||{}).name||t.push(r))})),t.length&&jn(t))}function jn(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];e.length&&Ot({group_list:e}).then((function(e){te.saveGroupInfo(e),oe("onGroupListUpdate")}))}function Gn(e,t,n,r){(!n||(n=te.getGroupMembers(e))&&n.length)&&void 0!==t&&(Array.isArray(t)||(t=[t]),St({group_id:e,user_list:t}).then((function(t){var n,o;t&&t.length&&(n=[],o=pe.getAllRosterInfos(),t.forEach((function(e){o[e.user_id]&&o[e.user_id].username?(e.display_name=e.display_name||o[e.user_id].username,e.avatar=o[e.user_id].avatar):n.push(e.user_id)})),n.length?Be({list:n}).then((function(n){pe.saveRosterInfo(n);var o=pe.getAllRosterInfos();t=t.map((function(e){return e.display_name||(e.display_name=e.display_name||o[e.user_id].username),e.avatar=o[e.user_id].avatar,e})),te.saveGroupMembers(e,t,r),oe("onGroupMemberChanged",e)})):(te.saveGroupMembers(e,t,r),oe("onGroupMemberChanged",e)))})))}function qn(e,t){var n,r=te.getGroupMembers(e);!r||0===r.length||0<=(n=r.findIndex((function(e){return e.user_id===t})))&&(r.splice(n,1),te.saveGroupMembers(e,r,!0),oe("onGroupMemberChanged",e))}function Yn(e,t){0<(t=t?ue.getGroupMessage(e):ue.getRosterMessage(e)).length&&se.saveRecent(t[t.length-1])}function Jn(e){if(!e)return{};var t=ro("ws"),n=(e=to(e)).clusters,r=e.clusterIndex,o=e.ratelIndex;e=e.fireIndex;return n&&n.length?(r=(n=n[r]).ratel[o],o=(n.webim||n.ws)[e],r&&o?{ratel:r.protocol+"://"+r.host,fireplace:(t?"https"===o.protocol?"wss":"ws":o.protocol)+"://"+o.host}:{}):{}}function Vn(e,t){e&&t&&Q(Qr("key_dns_config",e),t,!1)}function Kn(e){var t=void 0===(t=e.url)?"":t;e=void 0===(e=e.params)?{}:e;if(!t)return"";var n=ne.getToken(),r=ne.getAppid();e=Object.assign(e,{"access-token":n,app_id:r});return 0<t.indexOf("?")?t+="&":t+="?",t+le.a.stringify(e)}function Hn(e){var t=e.autoLogin,n=void 0===t||t,r=void 0===(t=e.dnsServer)?"https://dns.maximtop.com/v2/app_dns":t,o=void 0===(t=e.appid)?"welovemaxim":t;e=void 0!==(t=e.ws)&&t;ne.saveAppid(o),io.asyncGetDns(r,o,e).then((function(e){var t=e.ratel;e=e.fireplace;if(t&&e)return function(e){var t=(e=io.getServers(e)||{}).ratel;e=e.fireplace;oe("refresh_ratel",t),oe("refresh_fireplace",e)}(o),so={appid:o,baseUrl:t,autoLogin:n,fireplace:e},Hn.baseUrl=so.baseUrl,uo=!0,ao?("login"==(t=ao.type)&&Hn.login(ao.opt),"qrlogin"==t&&Hn.qrlogin(ao.opt),void("tokenLogin"==t&&Hn.tokenLogin(ao.user_id,ao.token))):void(so.autoLogin&&(co=!0,e=ne.getUid(),t=ne.getToken(),e&&t&&(e=Fr.asyncGetRosterIdList(!0),t=Zr.asyncGetJoinedGroups(!0),Promise.all([e,t]).then((function(e){var t=e[0];e=e[1];oe("imRostersGroupslistReady",{rosters:t,groups:e}),Lr.connect(so)})).catch((function(e){oe("flooNotice",{category:"loginMessage",desc:"get roster list failure:"+e.message})})))));oe("flooError",{category:"DNS_FAILED",desc:r})})).catch((function(e){}))}kn.prototype={setType:function(e){this.type=e},setOperation:function(e){this.operation=e}};var Wn=kn,Xn=ne.getDeviceSN(),zn=ne.getDeviceGuid(),$n=(b("userKicked",(function(){Xn=0,zn=999999999+Math.floor(214e4*Math.random())+""})),b("temporary_deviceSN",(function(e){Xn=e})),{}),Zn=!1,Qn=function(e){var t=(e=void 0===(e=e.payload)?{}:e).type;e=e.operation;t===X.OPER&&(e.op_type!=z.DELETE&&e.op_type!=z.DELETE_EVERYWHERE||(t=e.xid,oe("deleteConveration",{id:t.uid,source:"other_operation"})))},er=function(e){var t=(n=void 0===(n=e.payload)?{}:n).type,n=n.operation;t===G.NORMAL&&oe("messageNormal",e),t===G.CHAT&&oe("imRosterMessage",e),t===G.GROUPCHAT&&oe("imGroupMessage",e),t===G.OPER&&(n.type===q.UNKNOWN&&x.log("received unknown operation: ",e),e.isReceived=!0,oe("onActionMessage",e))},tr=function(e){var t;(t=(void 0===(t=e.payload)?{}:t).type)===V.UNKNOWN&&x.log("received unknown groupnotice: ",e),t===V.PRESENCE&&oe("imGroupPresence",e),t===V.ABSENCE&&oe("imGroupAbesence",e),t===V.CREATED&&oe("imGroupCreated",e),t===V.DESTROYED&&oe("imGroupDestoryed",e),t===V.JOINED&&oe("imGroupJoined",e),t===V.APPLYED&&oe("imGroupApplyed",e),t===V.APPLY_ACCEPTED&&oe("imGroupApplyAccepted",e),t===V.APPLY_DECLINED&&oe("imGroupApplyDeclined",e),t===V.INVITED&&oe("imGroupInvited",e),t===V.INVITE_ACCEPTED&&oe("imGroupInvitedAccepted",e),t===V.INVITE_DECLINED&&oe("imGroupInvitedDeclined",e),t===V.KICKED&&oe("imGroupKicked",e),t===V.BANNED&&oe("imGroupBaned",e),t===V.UNBANNED&&oe("imGroupUnbaned",e),t===V.OWNER_ASSIGNED&&oe("imGroupOwnerAssigned",e),t===V.ADMIN_GRANTED&&oe("imGroupAdminGranted",e),t===V.ADMIN_REVOKED&&oe("imGroupAdminRevoked",e),t===V.BLOCKED&&oe("imGroupBlocked",e),t===V.UNBLOCKED&&oe("imGroupUnblocked",e),t===V.MUTED&&oe("imGroupMuted",e),t===V.UNMUTED&&oe("imGroupUnmuted",e),t===V.INFO_UPDATED&&oe("imGroupInfoUpdated",e),t===V.ANNOUNCEMENT_UPDATED&&oe("imGroupAnnouncementUpdated",e)},nr=function(e){var t;(t=(void 0===(t=e.payload)?{}:t).type)===H.UNKNOWN&&x.log("received unknown rosterNotice: ",e),t===H.ADDED&&oe("imRosterAdded",e),t===H.REMOVED&&oe("imRosterRemoved",e),t===H.ACCEPTED&&oe("imRosterAccepted",e),t===H.DECLINED&&oe("imRosterDeclined",e),t===H.BANNED&&oe("imRosterBaned",e),t===H.UNBANNED&&oe("imRosterUnbaned",e),t===H.INFO_UPDATED&&oe("imRosterInfoUpdated",e)},rr=function(e){var t;(t=(void 0===(t=e.payload)?{}:t).type)!==W.UNKNOWN&&t!==W.PASSWORD_CHANGED&&t!==W.FROZEN&&t!==W.REMOVED&&t!==W.KICKED_BY_OTHER_DEVICE&&t!==W.DEVICE_REMOVED&&t!==W.CLUSTER_CHANGED||(ne.deleteToken(),ne.deleteDeviceSN(),oe("flooNotice",{category:"action",desc:"relogin_manually"})),t===W.UNKNOWN&&x.log("received unknown userNotice: ",e),t===W.KICK_BY_SAME_DEVICE&&(Zn=!0,oe("userKicked")),oe("flooNotice",{category:"userNotice",desc:Object.keys(W)[t]})},or=function(e){var t,n=void 0===(n=e.command)?0:n;e=e.payload;n===M.UNREAD&&(t=(t=e).unread,oe("imReceivedUnread",t=void 0===t?[]:t),t.forEach((function(e){var t=e.xid;0<e.n&&oe("sendMessage",On({xid:t,next_key:0}))}))),n===M.SYNC&&function(e){if(Un(e)){var t,n=void 0===(n=e.metas)?[]:n,r=e.xid,o=e.is_full_sync,i=e.client_mid;if(!o&&i&&s(i).gt(0))return oe("receivedSendMessage",i),setTimeout((function(){ue.dealSendedRosterMessage(e),ue.dealSendedGroupMessage(e)}),20);0!==(i=void 0===(i=e.next_key)?0:i)&&!s(i).eq(0)||(t=r.uid,delete $n[(void 0===t?0:t)+""]),o?(n&&n.length&&Bn(n),oe("onReceiveHistoryMsg",{next:i})):(n.length&&Bn(n),0===i||s(i).eq(0)||oe("sendMessage",On({xid:r,next_key:i})))}}(e),n===M.NOTICE&&Mn(e),n!==M.PROVISION||(Un(t=e)?(t=(void 0===(t=t.xid)?{}:t).deviceSN,oe("temporary_deviceSN",t),Zn||t&&ne.saveDeviceSN(t),oe("flooNotice",{category:"loginMessage",desc:"login socket success....."}),oe("loginSuccess",{}),oe("sendMessage",{vsn:0,compress_method:0,command:0})):(oe("flooNotice",{category:"loginMessage",desc:"login socket failure ......"}),oe("loginFail","socket_failure")))},ir=(de=n(0),de=n.n(de),n(2)),sr=(ir=n.n(ir),de.a.Root.fromJSON(ir.a).lookupType("im.floo.protobuf.Provision")),ar=function(e){return sr.decode(e)},ur=function(e){return sr.encode(e).finish()},cr=de.a.Root.fromJSON(ir.a).lookupType("im.floo.protobuf.XID"),fr=function(e){return cr.encode(e).finish()},pr=n(66),dr=(pr=n.n(pr),de.a.Root.fromJSON(pr.a).lookupType("im.floo.protobuf.MessageBody")),lr=(pr=n(67),pr=n.n(pr),de.a.Root.fromJSON(pr.a).lookupType("im.floo.protobuf.GroupNotice")),hr=(pr=n(68),pr=n.n(pr),de.a.Root.fromJSON(pr.a).lookupType("im.floo.protobuf.RosterNotice")),yr=(pr=n(69),pr=n.n(pr),de.a.Root.fromJSON(pr.a).lookupType("im.floo.protobuf.UserNotice")),gr=(pr=n(70),pr=n.n(pr),de.a.Root.fromJSON(pr.a).lookupType("im.floo.protobuf.Info")),mr=(pr=n(71),n=n.n(pr),de.a.Root.fromJSON(n.a).lookupType("im.floo.protobuf.Conversation")),vr=de.a.Root.fromJSON(ir.a).lookupType("im.floo.protobuf.Meta"),_r=de.a.Root.fromJSON(ir.a).lookupType("im.floo.protobuf.SyncUL"),br=function(e){return _r.decode(e)},Er=function(e){var t,n,r,o,i;return e.meta&&(e.meta=(o=(t=e.meta).ns,i=t.payload,o===j.MESSAGE&&(t.payload=dr.encode(i).finish()),o===j.GROUP_NOTICE&&(t.payload=((n=i).from=fr(n.from),r=[],(n.to||[]).forEach((function(e){r.push(fr(e))})),n.to=r,lr.encode(n).finish())),o===j.ROSTER_NOTICE&&(t.payload=hr.encode(i).finish()),o===j.USER_NOTICE&&(t.payload=yr.encode(i).finish()),o===j.INFO&&(t.payload=gr.encode(i).finish()),o===j.CONVERSATION&&(t.payload=mr.encode(i).finish()),vr.create(t))),_r.encode(e).finish()},wr=de.a.Root.fromJSON(ir.a).lookupType("im.floo.protobuf.UnreadDL"),Ar=de.a.Root.fromJSON(ir.a).lookupType("im.floo.protobuf.SyncDL"),Cr=de.a.Root.fromJSON(ir.a).lookupType("im.floo.protobuf.Notice"),Nr=de.a.Root.fromJSON(ir.a).lookupType("im.floo.protobuf.Frame"),kr=function(e){e=new Uint8Array(e);var t,n,r,o=(e=Nr.decode(e)).command,i=e.payload;return o===M.UNREAD?e.payload=wr.decode(i):o===M.SYNC?e.payload=(n=(t=Ar.decode(i)).metas,r=[],(void 0===n?[]:n).forEach((function(e){var t=e.ns,n=e.payload;t===j.MESSAGE&&(e.payload=dr.decode(n)),t===j.GROUP_NOTICE&&(e.payload=lr.decode(n)),t===j.ROSTER_NOTICE&&(e.payload=hr.decode(n)),t===j.USER_NOTICE&&(e.payload=yr.decode(n)),t===j.INFO&&(e.payload=gr.decode(n)),t===j.CONVERSATION&&(e.payload=mr.decode(n)),r.push(e)})),t.metas=r,t):o===M.NOTICE?e.payload=(n=i,{xid:cr.decode(n)}):o===M.PROVISION&&(e.payload=ar(i)),e},Or=function(e){var t=e.payload,n=e.command;return t&&(n===M.UNREAD?e.payload=wr.encode(t).finish():n===M.SYNC?e.payload=Er(t):n===M.NOTICE?e.payload=Cr.encode(t).finish():n===M.PROVISION&&(e.payload=ur(t))),Nr.encode(e).finish()},Sr=(de.a.util.Long=D.a,de.a.configure(),S.encode),Rr=S.decode,Tr={},Ir=0,xr=null,Dr="normal",Ur=null,Mr=(b("refresh_fireplace",(function(e){Tr=Object.assign({fireplace:e},Tr)})),b("loginSuccess",(function(){Ir=0,xr&&clearInterval(xr),xr=setInterval((function(){Pr({vsn:0,compress_method:0,command:0})}),5e4)})),b("sendMessage",(function(e){Pr(e)})),b("userKicked",(function(){Dr="kick"})),b("reconnect",(function(e){e.reason,"normal"===Dr&&Mr()})),function(){5<=Ir?(Ir=0,oe("fireplaceError")):Ir++,Br()}),Br=function(){var e=Math.floor(9e3*Math.random())+1e3;setTimeout((function(){Ur.connect()}),e)},Pr=function(e){x.info("SEND :"+JSON.stringify(Z(e)));e=Sr(e);var t=new ArrayBuffer(e.length),n=new Uint8Array(t);e.forEach((function(e,t){n[t]=e})),Ur.emit("frame",t)},Lr=Object.assign(O,{connect:function(e){Tr=e,Ir=0,Dr="normal",Ur&&Ur.destroy(),e=Tr.fireplace,oe("flooNotice",{category:"loginMessage",desc:"socket connecting..."}),(Ur=T()(e,{timeout:1e4+2e4*Ir,transports:["websocket"]})).on("connect",(function(){oe("flooNotice",{category:"loginMessage",desc:"socket connect success..."}),function(){var e,t,n;oe("flooNotice",{category:"loginMessage",desc:"logining socket service..."}),oe("sendMessage",(e={token:ne.getToken(),uid:ne.getUid()},t=new yn({uid:+e.uid,deviceSN:Xn}),n=new En,zn=zn||ne.getDeviceGuid(),n.setXid(t),n.setToken(e.token),n.setDeviceguid(zn),n.setSdkvsn("2.0.0"),n.setEncryptmethod(F.AES_CBC_128),n.setEncryptkey(ne.getAesKey()),n.setDeviceinfo("Web"),(t=new _n).setCommond(M.PROVISION),t.setPayload(n),t))}()})),Ur.on("frame",(function(e){!function(e){e=Rr(e),x.info("RECV :"+JSON.stringify(Z(e))),or(e)}(e)})),Ur.on("disconnect",(function(e){oe("reconnect",{reason:e})})),Ur.on("error",(function(e){oe("reconnect",{reason:"SocketError"})})),Ur.on("reconnect_attempt",(function(e){Ur.io.opts.transports=["websocket"]}))},sendMessage:Pr,disConnect:function(){Dr="logout",Ur&&Ur.disconnect()}}),Fr={asyncGetRosterIdList:function(e){return e?Lr.rosterList({}).then((function(e){return pe.saveRosterList(e),e.map((function(e){return e.user_id||e}))})):Promise.resolve(pe.getRosterList())},asyncGetRosterInfo:function(e,t){var n=pe.getRosterInfo(e);return n&&n.username&&!t?Promise.resolve(n):Lr.rosterListPost({list:[e]}).then((function(t){return pe.saveRosterInfo(t),oe("onRosterInfoUpdate",[e]),t.length&&t[0]||{}}))},asyncRegester:function(e){return Lr.userRegister(e)},asnycGetRosterListDetailByIds:function(e){if(!e||!e.length)return Promise.resolve({});var t=pe.getAllRosterInfos(),n=[],r=(e.forEach((function(e){var r=t[e];r&&r.username||n.push(e)})),Array.from(new Set(n)));return r.length?Lr.rosterListPost({list:r}).then((function(e){return pe.saveRosterInfo(e),oe("onRosterInfoUpdate",r),e})):Promise.resolve()},asyncGetUserProfile:function(e){var t=ne.getProfile();return t&&(t.name||t.mobile)&&!e?Promise.resolve(t):Lr.userProfile().then((function(e){return ne.saveProfile(e),e}))},getRosterMessageByRid:function(e){return ue.getRosterMessage(e)},readRosterMessage:function(e,t){oe("imReadRosterMessage",{roster_id:e,mid:t})},asyncDeleteRoster:function(e){return Lr.rosterDelete(e).then((function(t){return pe.removeRoster(e.user_id),se.deleteRecentById(e.user_id),oe("onRosterListUpdate"),t}))},getAllRosterDetail:function(){return pe.getAllRosterInfos()},recallMessage:function(e,t){e=In(e,t),oe("swapSendMessage",Z(e)),oe("sendMessage",e)},deleteMessage:function(e,t){e=e,t=s(t),(n=new _n).setCommond(M.SYNC),o=new yn({uid:ne.getUid(),deviceSN:Xn}),e=new yn({uid:i(e),deviceSN:0}),r=new An,t=new mn({ctype:Y.COMMAND,type:G.OPER,operation:{type:q.DELETE,mid:t,xid:e}}),e=new Nn({id:parseInt((new Date).getTime()+""+Math.floor(256*Math.random())),from:o,to:o,payload:t,ns:j.MESSAGE}),r.setMeta(e),n.setPayload(r);var n,r,o=n;oe("swapSendMessage",Z(o)),oe("sendMessage",o)},getUnreadCount:function(e){return ue.getUnreadByRosterId(e)},unreadMessage:function(e,t){e=e,t=s(t),(n=new _n).setCommond(M.SYNC),o=new yn({uid:ne.getUid(),deviceSN:Xn}),e=new yn({uid:i(e),deviceSN:0}),r=new An,t=new mn({ctype:Y.COMMAND,type:G.OPER,operation:{type:q.READ_CANCEL,mid:t,xid:e}}),e=new Nn({id:parseInt((new Date).getTime()+""+Math.floor(256*Math.random())),from:o,to:o,payload:t,ns:j.MESSAGE}),r.setMeta(e),n.setPayload(r);var n,r,o=n;oe("swapSendMessage",Z(o)),oe("sendMessage",o)},getRosterInfo:function(e){return pe.getRosterInfo(e)},asyncGetApplyList:Lr.rosterApplylist,asyncGetBlockedlist:Lr.rosterBlockedlist,asyncBlockeAdd:Lr.rosterBlockedAdd,asyncBlockeRemove:Lr.rosterBlockeRemove,asyncApply:Lr.rosterApply,asyncAccept:Lr.rosterAccept,asyncDecline:Lr.rosterDecline,asyncUpdateRosterExt:Lr.rosterExt,asyncSearchRosterByName:Lr.rosterName,asyncSearchRosterById:Lr.rosterId},jr=(b("imRostersGroupslistReady",(function(e){e=e.rosters,pe.saveRosterList([].concat(e)),Gr(e)})),{}),Gr=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=(Array.isArray(e)||(e=[e]),pe.getAllRosterInfos()||{}),n=[];e.forEach((function(e){var r,o,i;0<(e=e.user_id||e)&&(r=(i=t[e]||{}).avatar,o=i.nick_name,i=i.username,r||o||i||e&&!Pn(e)&&n.push(e)&&Ln(e))})),n.length&&Yr(n)},qr=[],Yr=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).filter((function(e){return qr.indexOf(e)<0}));e.length&&Be({list:e}).then((function(t){e.forEach((function(e){t.findIndex((function(t){return t.user_id==e}))<0&&qr.push(e)})),pe.saveRosterInfo(t),oe("onRosterListUpdate")}))},Jr=(b("imRostersGroupslistReady",(function(e){e=e.groups,te.saveJoinedGroups([].concat(e)),Fn(e)})),b("imRosterMessage",(function(e){var t=u(e),n=void 0===(n=t.ext)?"":n,r=t.from,o=t.to,i={};try{i=JSON.parse(n)}catch(e){}void 0!==i.input_status&&r!=ne.getUid()?oe("onInputStatusMessage",{ext:n,from:r,to:o}):(ue.saveRosterMessage(t),t.toType="roster",se.saveRecent(t),i=ne.getUid()==r?o:r,Gr(i),oe("onUnreadChange",i)),oe("onRosterMessage",t)})),b("imSendRosterMessage",(function(e){Gr(e.uid)})),b("imGetRecent",(function(e){Gr(e)})),b("imGroupMessage",(function(e){e=u(e);var t=(ue.saveGroupMessage(e),e.toType="group",se.saveRecent(e),ne.getUid()),n=e.config;n&&n.mentionList&&0<=n.mentionList.indexOf(t)&&oe("onMentionMessage",e),oe("onGroupMessage",e)})),b("imReceivedUnread",(function(e){var t=e.filter((function(e){return 1===e.type})).map((function(e){return i(e.xid.uid)}));e=e.filter((function(e){return 2===e.type})).map((function(e){return i(e.xid.uid)}));Jr(t),Gr(t),Vr(e),Fn(e)})),function(e){var t=pe.getAllRosterInfos()||{},n=[];e.forEach((function(e){var r=(i=t[e]||{}).avatar,o=i.nick_name,i=i.username;r||o||i||e&&!Pn(e)&&n.push(e)&&Ln(e)})),n.length?Be({list:n}).then((function(t){pe.saveRosterInfo(t),se.saveUnreadRecent(e,"roster")})):se.saveUnreadRecent(e,"roster")}),Vr=function(e){var t=te.getAllGroupInfos()||{},n=[];e.forEach((function(e){(t[e]||{}).name||e&&n.push(e)})),n.length?Ot({group_list:n}).then((function(t){te.saveGroupInfo(t),oe("onGroupListUpdate"),se.saveUnreadRecent(e,"group")})):se.saveUnreadRecent(e,"group")},Kr=(b("imRosterAdded",(function(e){var t=void 0===(t=(n=e.payload).to)?[]:t,n=n.from,r=ne.getUid();1===t.length&&i(t[0].uid)===r&&(Gr([i(n.uid)]),pe.saveRosterList(i(n.uid)),oe("onRosterListUpdate",e))})),b("imRosterRemoved",(function(e){var t=(n=e.payload).from,n=void 0===(n=n.to)?[]:n,r=ne.getUid();i(t.uid)===r&&1===n.length&&(t=i(n[0].uid),pe.removeRoster(t),ce(e),se.deleteRecentById(t),ue.deleteRosterMessageByRosterId(t),oe("onRosterRemoved",e))})),b("imRosterAccepted",(function(e){var t=(n=e.payload).from,n=void 0===(n=n.to)?[]:n,r=ne.getUid();t=i(t.uid);1===n.length&&(n=i(n[0].uid),t===r?(pe.saveRosterList(n),Gr(n)):n===r&&(pe.saveRosterList(t),Gr(t)),oe("onRosterAccepted",e))})),b("imRosterDeclined",(function(e){var t=(n=e.payload).from,n=void 0===(n=n.to)?[]:n,r=ne.getUid();t=i(t.uid);1===n.length&&(n=i(n[0].uid),t!==r&&n!==r||ce(e),oe("onRosterDeclined",e))})),b("imRrosterBaned",(function(e){oe("onRosterNotice",e)})),b("imRosterUnbaned",(function(e){oe("onRosterNotice",e)})),b("imRosterInfoUpdated",(function(e){var t=(n=e.payload).from,n=void 0===(n=n.content)?"{}":n,r=(t=i(t.uid),{});try{r=JSON.parse(n)}catch(e){}Object.keys(r).length&&(n=Object.assign({},pe.getRosterInfo(t),r),pe.saveRosterInfo([n]),oe("onRosterInfoUpdate"),oe("onRosterListUpdate"))})),b("imGroupCreated",(function(e){var t=(n=e.payload).gid,n=n.from,r=ne.getUid();t=i(t.uid),n=i(n.uid);te.saveJoinedGroups(t),n!==r&&Gr(n),Fn(t),oe("onGroupListUpdate",e),oe("onGroupCreated",e)})),b("imGroupDestoryed",(function(e){var t=(n=e.payload).gid,n=n.from,r=ne.getUid(),o=i(t.uid);(n=i(n.uid))!==r&&Gr(n),te.removeGroup(o),ce(e),se.deleteRecentById(t),ue.deleteGroupMessageByGid(t),oe("onGroupListUpdate"),oe("onGroupDestoryed",e)})),b("imGroupJoined",(function(e){var t=(r=e.payload).gid,n=r.from,r=void 0===(r=r.to)?[]:r,o=(n=i(n.uid),ne.getUid()),s=(t=i(t.uid),[]);r.forEach((function(e){s.push(i(e.uid))})),n===o?(te.saveJoinedGroups(t),Fn(t),oe("onGroupListUpdate")):(Gn(t,n,!0),Gr(n),oe("onGroupMemberChanged",t)),oe("onGroupJoined",e)})),b("imGroupApplyed",(function(e){var t;(t=i((t=e.payload.from).uid))!==ne.getUid()&&(Gr([t]),ce(e))})),b("imGroupApplyAccepted",(function(e){var t=(r=e.payload).gid,n=r.from,r=void 0===(r=r.to)?[]:r,o=(n=i(n.uid),ne.getUid()),s=(t=i(t.uid),[]);r.forEach((function(e){s.push(i(e.uid))})),n===o?(Gr(s),Gn(t,s,!0),oe("onGroupMemberChanged",t)):(te.saveJoinedGroups(t),Fn(t),Gr(n),oe("onGroupListUpdate")),oe("onGroupApplyAccepted",e)})),b("imGroupApplyDeclined",(function(e){var t=(n=e.payload).from,n=n.to,r=(t=i(t.uid),ne.getUid()),o=[];n.forEach((function(e){o.push(i(e.uid))})),t===r?Gr(o):ce(e),oe("onGroupApplyDeclined",e)})),b("imGroupInvited",(function(e){var t=(r=e.payload).gid,n=r.from,r=void 0===(r=r.to)?[]:r,o=(n=i(n.uid),ne.getUid()),s=(t=i(t.uid),[]);r.forEach((function(e){s.push(i(e.uid))})),n!==o&&-1<s.findIndex((function(e){return e===o}))?(Gr(n),Fn(t),ce(e)):Gr(s),oe("onGroupNotice",e)})),b("imGroupInvitedAccepted",(function(e){var t=(r=e.payload).gid,n=r.from,r=void 0===(r=r.to)?[]:r,o=(n=i(n.uid),ne.getUid()),s=(t=i(t.uid),[]);r.forEach((function(e){s.push(i(e.uid))})),n===o?(te.saveJoinedGroups(t),Fn(t),oe("onGroupListUpdate")):(Gn(t,n,!0),Gr(n),oe("onGroupMemberChanged",t)),oe("onGroupInvitedAccepted",e)})),b("imGroupInvitedDeclined",(function(e){var t=(n=e.payload).gid,n=i((n=n.from).uid),r=ne.getUid();t=i(t.uid);n===r?(ce(e),Fn(t)):Gr(n),oe("onGroupInvitedDeclined",e)})),b("imGroupKicked",(function(e){var t=(n=(e=Object.assign({},e)).payload).gid,n=void 0===(n=n.to)?[]:n,r=ne.getUid(),o=i(t.uid),s=[];n.forEach((function(e){s.push(i(e.uid))})),-1<s.findIndex((function(e){return e===r}))?(te.removeGroup(o),ce(e),se.deleteRecentById(t),ue.deleteGroupMessageByGid(t),oe("onGroupListUpdate")):qn(o,s)})),b("imGroupBlocked",(function(e){var t=(n=e.payload).gid,n=void 0===(n=n.to)?[]:n,r=ne.getUid(),o=i(t.uid),s=[];n.forEach((function(e){s.push(i(e.uid))})),-1<s.findIndex((function(e){return e===r}))?(te.removeGroup(o),ce(e),se.deleteRecentById(t),ue.deleteGroupMessageByGid(t),oe("onGroupListUpdate")):(Gr(s),qn(o,s))})),b("imGroupUnblocked",(function(e){e=e.payload.to;var t=[];(void 0===e?[]:e).forEach((function(e){t.push(i(e.uid))})),Gr(t)})),b("imGroupOwnerAssigned",(function(e){var t=(n=e.payload).from,n=void 0===(n=n.to)?[]:n,r=(t=i(t.uid),ne.getUid()),o=[];n.forEach((function(e){o.push(i(e.uid))})),t!==r&&o.push(t),Gr(o),oe("onGroupOwnerAssigned",e)})),b("imGroupAdminGranted",(function(e){var t=(n=e.payload).from,n=void 0===(n=n.to)?[]:n,r=(t=i(t.uid),ne.getUid()),o=[];n.forEach((function(e){o.push(i(e.uid))})),t!==r&&o.push(t),Gr(o),oe("onGroupAdminGranted",e)})),b("imGroupAdminRevoked",(function(e){var t=(n=e.payload).from,n=void 0===(n=n.to)?[]:n,r=(t=i(t.uid),ne.getUid()),o=[];n.forEach((function(e){o.push(i(e.uid))})),t!==r&&o.push(t),Gr(o),oe("onGroupAdminRevoked",e)})),b("imGroupMuted",(function(e){oe("onGroupMuted",e)})),b("imGroupUnblocked",(function(e){oe("onGroupUnblocked",e)})),b("imGroupBaned",(function(e){oe("onGroupBaned",e)})),b("imGroupUnbaned",(function(e){oe("onGroupUnbaned",e)})),b("imGroupInfoUpdated",(function(e){var t=(n=e.payload).gid,n=void 0===(n=n.content)?"{}":n,r=(t=i(t.uid),{});try{r=JSON.parse(n)}catch(e){}Object.keys(r).length&&(n=Object.assign({},te.getGroupInfo(t),r),te.saveGroupInfo([n]),oe("onGroupListUpdate"))})),b("imGroupAnnouncementUpdated",(function(e){Fn(i(e.payload.gid.uid),!0),oe("onGroupAnnouncementUpdated",e)})),b("imReadRosterMessage",(function(e){var t,n=e.roster_id,r=e.mid,o=e.isReceived,i=!1;r?(e=ue.getRosterMessageById(n,r),Kr(e)&&!o&&(i=!0,e=Tn(n,r),oe("sendMessage",e))):(ue.getRosterMessage(n).forEach((function(e){var r;Kr(e)&&!o&&(i=!0,r=Tn(n,e.id),oe("sendMessage",r)),t=e.id})),!o&&i&&(r=xn(n,t),oe("sendMessage",r))),i&&oe("onUnreadChange",n)})),function(e){var t=!1,n=Hr(e,$.READ);return e&&n&&(n=ne.getUid(),0<(e=i(e.from))&&e!=n&&(t=!0)),t}),Hr=function(e,t){var n=!1;return e&&e.status!=t&&((e=e).status=t,ue.saveRosterMessage(u(e)),n=!0),n},Wr=(b("imReadGroupMessage",(function(e){var t,n=e.group_id,r=e.mid,o=e.isReceived,i=!1;r?(e=ue.getGroupMessageById(n,r),Wr(e)&&!o&&(i=!0,e=Tn(e=a(e.from),r),oe("sendMessage",e))):((r=ue.getGroupMessage(n)).forEach((function(e){var n;Wr(e)&&!o&&(i=!0,n=Tn(n=a(e.from),e.id),oe("sendMessage",n)),t=e.id})),ue.saveFormatedGroupMessage(n,r),!o&&i&&(e=xn(n,t),oe("sendMessage",e))),i&&oe("onUnreadChange",n)})),function(e){var t,n=!1,r=Xr(e,$.READ);return e&&r&&(r=ne.getUid(),0<(t=i(e.from))&&t!=r&&e.config&&e.config.groupMemberList&&(n=!0)),n}),Xr=function(e,t){var n=!1;return e&&e.status!=t&&((e=e).status=t,ue.saveGroupMessage(u(e)),n=!0),n},zr=(b("onActionMessage",(function(e){var t,n=e.payload,r=e.from,o=e.to,i=(e=e.isReceived,n.type),s=(n=void 0===(n=n.operation)?{}:n,ne.getUid()+"");o=o?a(o.uid):0,s=s==(r=a(r.uid))+""?o:r,r=-1!=te.getJoinedGroups().indexOf(+o);i===G.OPER&&(o=n.type,i=n.mid,n=n.xid,t=r?ue.getGroupMessageById(s,i):ue.getRosterMessageById(s,i),o===q.READ_ACK?(r||Kr(t),r&&Wr(t)):o===q.DELIVER_ACK?(r||Hr(t,$.DELIVERED),r&&Xr(t,$.DELIVERED)):o===q.RECALL?(r||ue.deleteSingleRosterMessage(s,i),r&&ue.deleteSingleGroupMessage(s,i),Yn(s,r),oe("onMessageRecalled",{uid:s,mid:i})):o===q.DELETE?(r||ue.deleteSingleRosterMessage(n.uid,i),r&&ue.deleteSingleGroupMessage(n.uid,i),Yn(n.uid,r),oe("onMessageDeleted",{uid:n.uid,mid:i})):o===q.READ_CANCEL?(r||Hr(t,$.UNREAD),r&&Xr(t,$.UNREAD),oe("onMessageCanceled",{uid:s,mid:i})):o===q.READ_ALL&&(r?oe("imReadGroupMessage",{group_id:n.uid,mid:i,isReceived:e}):oe("imReadRosterMessage",{roster_id:n.uid,mid:i,isReceived:e})),t=a(n&&n.uid?n.uid:s),oe("onMessageStatusChanged",{uid:t,mid:a(i)}),oe("onUnreadChange",t))})),{}),$r=(b("swapSendMessage",(function(e){var t=e.payload.meta.id;zr[a(t)]=e})),b("receivedSendMessage",(function(e){e=a(e),!(e=zr[e])||(e=e.payload.meta).payload.type===G.OPER&&oe("onActionMessage",e)})),b("deleteConversation",(function(e){var t=e.id,n=(e=e.source,(e=(oe("flooNotice",{category:"conversation_deleted",desc:{id:t,source:e}}),se.getRecentById(t))).idx);e=e.type;n<0||("group"==e?ue.deleteGroupMessageByGid(t):ue.deleteRosterMessageByRosterId(t),se.deleteRecentById(t))})),Gn),Zr={asyncGetGroupInfo:function(e,t){var n=te.getGroupInfo(e-=0)||{};return n.name&&!t?Promise.resolve(n):Lr.groupInfo({group_id:e}).then((function(e){return te.saveGroupInfo([e]),e}))},asyncGetJoinedGroups:function(e){return e?Lr.groupUserjoined({}).then((function(e){return Array.isArray(e)?e:te.getGroupInfoList()})):Promise.resolve(te.getGroupInfoList())},openGroup:function(e){Lr.groupMemberlist({group_id:e}).then((function(t){te.saveGroupMembers(e,t),(t=t.map((function(e){return e.user_id}))).length&&$r(e,t,!1,!0),oe("onGroupMemberChanged",e)}))},getAllGroupDetail:function(){return te.getAllGroupInfos()},asyncGetGroupMembers:function(e){return Lr.groupMemberlist({group_id:e}).then((function(t){return te.saveGroupMembers(e,t),(t=t.map((function(e){return e.user_id}))).length&&$r(e,t,!1,!0),t}))},getGroupMembers:function(e){return te.getGroupMembers(e)||[]},asyncGetGroupListDetail:function(e){return e&&e.length?Lr.groupInfoBatch({group_list:e}).then((function(e){return te.saveGroupInfo(e),e})):Promise.resolve({})},getGruopMessage:function(e){return ue.getGroupMessage(e)},readGroupMessage:function(e,t){oe("imReadGroupMessage",{group_id:e,mid:t})},recallMessage:function(e,t){e=In(e,t),oe("sendMessage",e),oe("swapSendMessage",e)},getUnreadCount:function(e){return ue.getUnreadByGroupId(e)},asyncGetAdminList:Lr.groupAdminList,asyncAdminAdd:Lr.groupAdminAdd,asyncAdminRemove:Lr.groupAdminRemove,asyncGetAnouncementById:Lr.groupAnnouncement,asyncAnouncementDelete:Lr.groupAnnouncementDelete,asyncAnnouncementEdit:Lr.groupAnnouncementEdit,asyncGetAnnouncementList:Lr.groupAnnouncementList,asyncCreate:Lr.groupCreate,asyncDestroy:Lr.groupDestroy,asyncGetInfo:function(e){return e.group_id||(e={group_id:e}),Lr.groupInfo(e)},asyncUpdateAvatar:Lr.groupInfoAvatar,asyncUpdateDescription:Lr.groupInfoDdscription,asyncUpdateExt:Lr.groupInfoExt,asyncUpdateName:Lr.groupInfoName,asyncGetMemberList:function(e){return e.group_id||(e={group_id:e}),Lr.groupMemberlist(e)},asyncGroupMsgMutemode:Lr.groupMsgMutemode,asyncGetPublicList:Lr.groupPubliclist,asyncUpdateMsgNotDisturb:Lr.groupMsgNotdisturb,asyncGroupBannedList:Lr.groupBannedList,asyncGroupBab:Lr.groupBab,asyncGroupUnban:Lr.groupUnban,asyncGetSettings:Lr.groupSettings,asyncUpdateAllowMemberInvitation:Lr.groupSettingsAllowmemberinvitation,asyncUpdateAllowMemberModify:Lr.groupSettingsAllowmembermodify,asyncUpdateEnableReadack:Lr.groupSettingsEnablereadack,asyncUpdateHistoryVisible:Lr.groupSettingsHistoryvisible,asyncUpdateRequireadminapproval:Lr.groupSettingsRequireadminapproval,asyncBanAll:Lr.groupSettingsBanAll,asyncUnBanAll:Lr.groupSettingsUnBanAll,asyncOwnerTransfer:Lr.groupTransfer,asyncGetUserJoined:Lr.groupUserjoined,asyncApply:Lr.groupApply,asyncApplyHandle:Lr.groupApplyHandle,asyncGroupBockedlist:Lr.groupBockedlist,asyncGroupBlock:Lr.groupBlock,asyncGroupUnblock:Lr.groupUnblock,asyncKick:Lr.groupKick,asyncGetInvitationList:Lr.groupInvitationlist,asyncInvite:Lr.groupInvite,asyncInviteHandle:Lr.groupInviteHandle,asyncGetMemberDisplayName:Lr.groupMembersDidpayname,asyncLeave:Lr.groupLeave,asyncUpdateDisplayName:Lr.groupDisplayname,asncGetApplicationList:Lr.groupApplicationlist,asyncGetFileList:Lr.groupFilelist,asyncFileDelete:Lr.groupFiledelete,asyncFileUpload:Lr.groupFileupload},Qr=(pr={getToken:function(){return ne.getToken()},getUid:function(){return ne.getUid()},getAppid:function(){return ne.getAppid()},getConversationList:function(){return se.getRecents()},deleteToken:ne.deleteToken,getDeviceSN:function(){return ne.getDeviceSN()},asyncBindDeviceToken:Lr.bindDeviceToken,asyncUnbindDeviceToken:Lr.unbindDeviceToken,asyncTokenUser:Lr.tokenUser,asyncTokenId:Lr.tokenId,asyncRegister:Lr.userRegister,asyncUserBindMobile:Lr.userBindMobile,asyncUserUpdateMobile:Lr.userUpdateMobile,asyncUserSendSms:Lr.userSendSms,asyncCaptchaSms:Lr.captchaSms,asyncUserNameCheck:Lr.userNameCheck,asyncUserMobileBind:Lr.userMobileBind,asyncUserMobileBindSign:Lr.userMobileBindSign,asyncUserMobileLogin:Lr.userMobileLogin,asyncCaptchaImagePost:Lr.captchaImagePost,asyncUpdateAuthmode:Lr.userAuthmode,asyncUpdateAvatar:Lr.userAvatar,asyncUpdateMobile:Lr.userMobile,asyncUpdateNickName:Lr.userNickname,asyncGetProfile:Lr.userProfile,asyncUpdateProfile:Lr.userProfilePost,asyncGetSettings:Lr.userSettings,asyncUpdateSettings:Lr.userSettingsPost},function(e,t){return t&&e?e+"_"+t:""}),eo=(b("ratelError",(function(){var e,t,n,r,o=ro("app_id");i=(t=to(e=o)).clusters,n=t.clusterIndex,r=t.ratelIndex,t=t.fireIndex,i[n].ratel.length>r+1?no(e,{clusters:i,clusterIndex:n,ratelIndex:++r,fireIndex:t}):eo(e);var i=(Jn(o)||{}).ratel;oe("refresh_ratel",i)})),b("fireplaceError",(function(){var e,t,n,r,o,i=ro("app_id");n=(t=to(e=i)).clusters,r=t.clusterIndex,o=t.ratelIndex,t=t.fireIndex,((s=n[r]).webim||s.ws).length>t+1?no(e,{clusters:n,clusterIndex:r,ratelIndex:o,fireIndex:++t}):eo(e);var s=(Jn(i)||{}).fireplace;oe("refresh_fireplace",s)})),function(e){for(var t=to(e),n=t.clusters,r=t.clusterIndex;n.length>r+1;){var o=n[++r];if(0<=(o.webim||o.ws).length)return void no(e,{clusters:n,clusterIndex:r,ratelIndex:0,fireIndex:0})}oe("retrieve_dns")}),to=function(e){return p(Qr("key_dns_infos",e),!1)||{}},no=function(e,t){Q(Qr("key_dns_infos",e),t,!1)},ro=function(e){return e?p(Qr("key_dns_config",e),!1):""},oo=(b("retrieve_dns",(function(){var e=ro("dns_server"),t=ro("app_id"),n=ro("ws");oo(e,t,n)})),function(e,t,n){return Vn("dns_server",e),Vn("app_id",t),Vn("ws",n),(n=Jn(t)).ratel?Promise.resolve(n):ge(e,{app_id:t}).then((function(e){return function(t){if(t){e.version;var n=e.dns_list,r=n.findIndex((function(e){return 0==e.group_level}));r<0||(n={clusters:n[r].clusters,clusterIndex:0,ratelIndex:0,fireIndex:0},no(t,n))}}(t),Jn(t)}))}),io={asyncGetDns:oo,getServers:Jn},so=(n={getStaticVars:function(){return k},sendRosterMessage:function(e){var t=(e=Rn(e)).payload.meta;return ue.saveSendingRosterMessage(t),Lr.sendMessage(e),t.id},sendGroupMessage:function(e){var t=(e=Sn(e)).payload.meta;return ue.saveSendingGroupMessage(t),Lr.sendMessage(e),t.id},sendMentionMessage:function(e){t=e.gid,n=e.txt,c=e.mentionAll,f=e.mentionList,r=e.mentionedMessage,o=e.pushMessage,e=e.senderNickname,i=Y.TEXT,s=new yn({uid:+ne.getUid(),deviceSN:Xn}),t=new yn({uid:t,deviceSN:0}),(a=new _n).setCommond(M.SYNC),u=new An,(n=new mn({from:s,to:t,content:n,ctype:i,type:G.GROUPCHAT})).config=JSON.stringify({mentionAll:c,mentionList:f,mentionedMessage:r,pushMessage:o,senderNickname:e}),i=new Nn({id:(new Date).getTime(),from:s,to:t,payload:n,ns:j.MESSAGE}),u.setMeta(i),a.setPayload(u);var t,n,r,o,i,s,a,u,c=a,f=c.payload.meta;ue.saveSendingGroupMessage(f),Lr.sendMessage(c)},sendInputStatusMessage:function(e,t){e=e,t=t,n=Y.TEXT,i=new yn({uid:+ne.getUid(),deviceSN:Xn}),e=new yn({uid:+e,deviceSN:0}),(r=new _n).setCommond(M.SYNC),o=new An,n=new mn({from:i,to:e,ctype:n,type:G.CHAT,ext:JSON.stringify({input_status:t}),qos:J.AT_MOST_ONCE}),t=new Nn({id:(new Date).getTime(),from:i,to:e,payload:n,ns:j.MESSAGE}),o.setMeta(t),r.setPayload(o);var n,r,o,i=r;Lr.sendMessage(i)},sendMessage:Lr.sendMessage,getNoticeMessage:R(),getMessageStatus:function(e,t){return e=2<arguments.length&&void 0!==arguments[2]&&arguments[2]?ue.getGroupMessageById(e,t):ue.getRosterMessageById(e,t),(t=Object.keys($)[e.status])?t.toLowerCase():void 0},forwardMessage:function(e){var t=e.uid,n=e.mid,r=e.gid,o=void 0;(e=(o=t?ue.getRosterMessageById(t,n):ue.getGroupMessageById(r,n)).attach)&&e.url?(n=e.url.split("sign=")[1],e=ne.getToken(),Lr.fileForward({file_sign:n,"access-token":e,to_id:+(t||r),to_type:t?1:2}).then((function(e){o.attach.url=e;var n=(e=Dn(t,r,o)).payload.meta;t?ue.saveSendingRosterMessage(n):ue.saveSendingGroupMessage(n),Lr.sendMessage(e)}))):(e=(n=Dn(t,r,o)).payload.meta,t?ue.saveSendingRosterMessage(e):ue.saveSendingGroupMessage(e),Lr.sendMessage(n))},asyncFileUpload:function(e){return new Promise((function(t,n){var r=e.group_id,o=e.to_id,i=e.toType,s=e.file,a=e.fileType,u=e.chatType,c="rosterAvatar"===i?"fileUploadAvatarUrl":"chat"==i?"fileUploadChatFileUrl":"fileUploadGroupAvatarUrl",f={},p=ne.getToken();"groupAvatar"===i&&(f["access-token"]=p),a&&(f.file_type=["file","audio","image","video","audio-mp3"].indexOf(a)+100),f<100&&(f.file_type=["shareFile","shareAudio","shareImage","shareVideo"].indexOf(a)+200),r&&(f.group_id=r),"group"==u&&(f.to_type=2),"roster"==u&&(f.to_type=1),o&&(f.to_id=o),Lr[c](f).then((function(e){var n=new FormData;e.oss_body_param&&e.oss_body_param.key&&(n.append("OSSAccessKeyId",e.oss_body_param.OSSAccessKeyId),n.append("policy",e.oss_body_param.policy),n.append("signature",e.oss_body_param.signature),n.append("callback",e.oss_body_param.callback),n.append("key",e.oss_body_param.key)),n.append("file",s),Lr.asyncFileUpload(e.upload_url,n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){t({url:e.download_url})})).catch((function(e){}))})).catch((function(e){n(e)}))}))},requireHistoryMessage:function(e,t,n){e=e,n=n,t=s(t),(r=new _n).setCommond(M.SYNC),e=new yn({uid:i(e),deviceSN:0}),(o=new An).setXid(e),o.setKey(i(t)),o.setFullsyncnum(n),o.setIsfullsync(!0),r.setPayload(o);var r,o;e=r;Lr.sendMessage(e)},makeSearch:function(e){var t=[],n=[];return(pe.getRosterInfoList()||[]).forEach((function(n){var r=!1,o=n.user_id,i=n.username,s=n.avatar;(ue.getRosterMessage(o)||[]).forEach((function(n){r||0<=(n=void 0===(n=(void 0===(n=n.payload)?{}:n).content)?"":n).indexOf(e)&&(r=!0,t.push({user_id:o,username:i,avatar:s,content:n}))})),r||0<=i.indexOf(e)&&t.push({user_id:o,username:i,avatar:s})})),te.getGroupInfoList().forEach((function(t){var r=!1,o=t.group_id,i=t.name;(ue.getGroupMessage(o)||[]).forEach((function(t){r||0<=(t=void 0===(t=(void 0===(t=t.payload)?{}:t).content)?"":t).indexOf(e)&&(r=!0,n.push({group_id:o,name:i,content:t}))})),r||0<=i.indexOf(e)&&n.push({group_id:o,name:i})})),{rosterArr:t,groupArr:n}},asyncGetUserAvatarUploadUrl:Lr.fileUploadAvatarUrl,asyncGetGroupAvatarUploadUrl:Lr.fileUploadGroupAvatarUrl,asyncGetFileUploadChatFileUrl:Lr.fileUploadChatFileUrl,asyncQrcode:Lr.qrcode,asyncQrlogin:Lr.qrlogin,asyncQrcodeGroupsign:Lr.qrcodeGroupsign,asyncQrcodeGroupinvite:Lr.qrcodeGroupinvite,asyncWxlogin:Lr.wxlogin,asyncWxbind:Lr.wxbind,asyncGetStaticContact:Lr.getStaticContact,getImage:function(e){var t=void 0===(t=e.avatar)?"":t,n=void 0===(n=e.type)?"roster":n,r=void 0===(r=e.thumbnail)||r;e=void 0===(e=e.sdefault)?"":e;if(/^\//.test(t))return t;if(!t)return"roster"===n?e||"/image/roster.png":e||"/image/group.png";var o;n=t,e={};return 0!==t.indexOf("http")&&(o=ne.getAppid(),o=(io.getServers(o)||{}).ratel,!/\/$/.test(o)&&5<o.length&&(n=o+"/file/download/avatar"),e=Object.assign(e,{object_name:t})),r&&(e=Object.assign(e,{image_type:2})),Kn({url:n,type:"image",params:e})},getAudio:function(e){return Kn({url:e.url,type:void 0===(e=e.type)?"audio":e,params:{format:"mp3"}})},getChatFile:Kn,downloadAudio:function(e){var t=e.url;return e=void 0===(e=(t={url:void 0===t?"":t,type:void 0===(e=e.type)?"audio":e,params:{format:"mp3"}}).url)?"":e,t.type,t=void 0===(t=t.params)?{}:t,e?Lr.fileDownloadChatFileUrl(e,t,{operation:"download_file"}):""},getServers:io.getServers,asyncWechatUnbind:Lr.wechatUnbind,asyncWechatIsbind:Lr.wechatIsbind,asyncWechatBind:Lr.wechatBind,deleteConversation:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];oe("deleteConversation",{id:e,other_devices:t,source:"user_operation"}),e=function(e,t){var n=z.DELETE;(!(1<arguments.length&&void 0!==t)||t)&&(n=z.DELETE_EVERYWHERE),t=new yn({uid:+ne.getUid(),deviceSN:Xn}),e=new yn({uid:e}),e=new Wn({type:X.OPER,operation:{xid:e,type:n}}),n=new Nn({id:(new Date).getTime(),from:t,payload:e,ns:j.CONVERSATION});return(e=((t=new An).setMeta(n),new _n)).setCommond(M.SYNC),e.setPayload(t),e}(e,t);Lr.sendMessage(e)}},{}),ao=null,uo=!1,co=!1,fo=(Hn.login=function(e){uo?(oe("flooNotice",{category:"loginMessage",desc:"getting token..."}),Lr.tokenUser(e).then((function(e){var t=e.token,n=e.user_id,r=(e=e.public_key,e=(ne.saveUid(n),ne.saveToken(t),ne.saveAesKey(e),Fr.asyncGetRosterIdList(!0)),Zr.asyncGetJoinedGroups(!0));co=!0,oe("flooNotice",{category:"loginMessage",desc:"token sucecc, getting roster lists.."}),Promise.all([e,r]).then((function(e){var r=e[0];e=e[1];oe("imRostersGroupslistReady",{rosters:r,groups:e}),so=Object.assign({uid:n,token:t},so),Lr.connect(so),ao=null})).catch((function(e){oe("flooNotice",{category:"loginMessage",desc:"get roster list failure:"+e.message})}))})).catch((function(e){oe("loginFail","token failure:"+e.message)}))):ao={type:"login",opt:e}},Hn.qrlogin=function(e){uo?(oe("flooNotice",{category:"loginMessage",desc:"getting token..."}),Lr.tokenId(e).then((function(e){var t=e.token,n=e.user_id,r=(e=e.public_key,e=(ne.saveUid(n),ne.saveToken(t),ne.saveAesKey(e),Fr.asyncGetRosterIdList(!0)),Zr.asyncGetJoinedGroups(!0));oe("flooNotice",{category:"loginMessage",desc:"token sucecc, getting roster lists.."}),co=!0,Promise.all([e,r]).then((function(e){var r=e[0];e=e[1];oe("imRostersGroupslistReady",{rosters:r,groups:e}),so=Object.assign({uid:n,token:t},so),Lr.connect(so),ao=null})).catch((function(e){oe("flooNotice",{category:"loginMessage",desc:"get roster list failure:"+e.message})}))})).catch((function(e){oe("loginFail","token failure:"+e.message)}))):ao={type:"qrlogin",opt:e}},Hn.tokenLogin=function(e,t,n){var r;uo?(ne.saveUid(e),ne.saveToken(t),ne.saveAesKey(n),n=Fr.asyncGetRosterIdList(!0),r=Zr.asyncGetJoinedGroups(!0),oe("flooNotice",{category:"loginMessage",desc:"token sucecc, getting roster lists.."}),co=!0,Promise.all([n,r]).then((function(n){var r=n[0];n=n[1];oe("imRostersGroupslistReady",{rosters:r,groups:n}),so=Object.assign({uid:e,token:t},so),Lr.connect(so),ao=null})).catch((function(e){oe("flooNotice",{category:"loginMessage",desc:"get roster list failure:"+e.message})}))):ao={type:"tokenLogin",user_id:e,token:t}},Hn.idLogin=function(e){Lr.tokenId(e).then((function(e){var t=e.token,n=e.user_id,r=(e=e.public_key,e=(ne.saveUid(n),ne.saveToken(t),ne.saveAesKey(e),Fr.asyncGetRosterIdList(!0)),Zr.asyncGetJoinedGroups(!0));oe("flooNotice",{category:"loginMessage",desc:"token success, getting roster lists.."}),co=!0,Promise.all([e,r]).then((function(e){var r=e[0]||[];r.push(n),e=e[1];oe("imRostersGroupslistReady",{rosters:r,groups:e}),so=Object.assign({uid:n,token:t},so),Lr.connect(so),ao=null})).catch((function(e){oe("flooNotice",{category:"loginMessage",desc:"get roster list failure:"+e.message})}))})).catch((function(e){oe("loginFail","token failure:"+e.message)}))},Hn.wxlogin=function(){},Hn.cleanup=function(){se.clear(),pe.clear(),te.clear(),ne.clear(),ue.clearAll()},Hn.isLogin=function(){return co&&ne.getUid()&&ne.getToken()},Hn.on=Hn.listen=function(e,t){t?b(e,t):Object.keys(e).forEach((function(t){b(t,e[t])}))},Hn.off=function(e,t){t?E(e,t):Object.keys(e).forEach((function(t){E(t,e[t])}))},Hn.logout=function(){Lr.disConnect(),Hn.cleanup()},Hn.isReady=function(){return uo},Hn.disConnect=Lr.disConnect,Hn);function po(e){return new fo(e),fo}fo.rosterManage=Fr,fo.groupManage=Zr,fo.userManage=pr,fo.sysManage=n,t.default=po,window.flooIM=po}],X={},Y.m=W,Y.c=X,Y.d=function(e,t,n){Y.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},Y.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},Y.t=function(e,t){if(1&t&&(e=Y(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(Y.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)Y.d(n,r,function(t){return e[t]}.bind(null,r));return n},Y.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Y.d(t,"a",t),t},Y.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Y.p="",Y(Y.s=131);function Y(e){if(X[e])return X[e].exports;var t=X[e]={i:e,l:!1,exports:{}};return W[e].call(t.exports,t,t.exports,Y),t.l=!0,t.exports}var W,X},module.exports=V()}(core),getDefaultExportFromCjs(core.exports));function createChatroom(e){var t=this;return this.groupManage.asyncCreate({name:e,type:2}).then((function(e){return t.groupManage.asyncUpdateRequireadminapproval({group_id:e.group_id,apply_approval:0})}))}function joinChatroom(e){return this.groupManage.asyncApply({group_id:e})}function leaveChatroom(e){return this.groupManage.asyncLeave({group_id:e})}function destroyChatroom(e){return this.groupManage.asyncDestroy({group_id:e})}function init(e){return(e=coreIM(__assign({ws:!1,autoLogin:!0},e))).chatroomManage={create:createChatroom.bind(e),join:joinChatroom.bind(e),leave:leaveChatroom.bind(e),destroy:destroyChatroom.bind(e)},e}exports.init=init,exports.version=version,Object.defineProperty(exports,"__esModule",{value:!0})}));
